<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[This blog is powered by gatsby]]></description><link>https://ksy8230.github.io/todayILearned</link><generator>GatsbyJS</generator><lastBuildDate>Sat, 17 Dec 2022 00:19:52 GMT</lastBuildDate><item><title><![CDATA[웹 성능 개선 지표들]]></title><description><![CDATA[웹반응성 로딩 성능 개선 실험적 환경 속 테스트
리얼 유저 환경 속 테스트 성능 개선 가이드 로드 이후 인터렉션(상호작용)에 집중 사용자인식 연구 결과
사용자 입력 이후 100ms 이내 반응하는게 목표 웹 반응성 지표들
TBT INP CLS…]]></description><link>https://ksy8230.github.io/todayILearned/base/web-performance/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/base/web-performance/</guid><pubDate>Mon, 12 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;웹반응성&lt;/p&gt;
&lt;p&gt;로딩 성능 개선&lt;/p&gt;
&lt;p&gt;실험적 환경 속 테스트
리얼 유저 환경 속 테스트&lt;/p&gt;
&lt;p&gt;성능 개선 가이드&lt;/p&gt;
&lt;p&gt;로드 이후 인터렉션(상호작용)에 집중&lt;/p&gt;
&lt;p&gt;사용자인식 연구 결과
사용자 입력 이후 100ms 이내 반응하는게 목표&lt;/p&gt;
&lt;p&gt;웹 반응성 지표들
TBT INP CLS&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;total blocking time&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;= 인터렉션 동안 발생한 총 블럭킹 시간의 합&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;interaction to next paint&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;= 사용자 입력이 발생하고 화면의 변화가 생길때까지의 시간&lt;/p&gt;
&lt;p&gt;사용자 입력이 발생하고 그 전의 작업이 끝날때까지 발생한 시간
사용자 입력에 대한 이벤트 핸들러를 처리하는 시간
사용자에게 전달할 시각적 피드백이 브라우저에서 돔에 반영되고 화면에 나타나기까지 걸리는 시간&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;cumulative layout shift&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;= 페이지 전체 수명동안 발생하는 예기치 않은 레이아웃 이동 점수&lt;/p&gt;
&lt;p&gt;반응성 측정 도구
라이트하우스
= 특정 환경에서 로드 성능 개선을 포함한 다양한 성능 측정
&amp;#x26; lighthouse user flow
= 네비게이션 + 스냅샷 + 타임스팬
= 단일 페이지 로드 성능 측정 + 사용자 인터렉션 후 페이지 상태 측정 + 임의의 시간동안 사용자 인터렉션 측정
2. spa나 복잡한 폼의 접근성 이슈 확인&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;performance, accessibility, best practice, seo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;크롬 데브툴스 리코더를 활용해 json 값을 가져와 cypress 같은 라이브러리로 실행하면 해당 수행 동작에 따라 반응성이 측정된 리포트를 볼 수 있다&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;total blocking time 개선 사례&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;브라우저가 화면을 렌더링하는 과정
1.브라우저가 자바스크립트를 실행
2.그 결과로 각 엘리먼트들의 스타일과 레이아웃을 계산
3. 페인트 과정에서 이 계산된 결과를 화면에 어떻게 그릴지 전달
4. 컴포짓 단계에서 실제 화면에 반영&lt;/p&gt;
&lt;p&gt;하지만 자바스크립트를 실행하는 과정에서 계산되지 않은 스타일 혹은 레이아웃을 참조해야하는 경우 강제로 계산하는 리플로우 과정이 추가되어 자바스크립트 수행 시간이 길어진다.&lt;/p&gt;
&lt;p&gt;개선
계산되지 않은 스타일 및 레이아웃을 참조하지 않기 위해서 1~4과정이 수행된 뒤 참조할 수 있도록 자바스크립트 실행을 다음 프레임에 전달하는 requestAnimation 함수를 활용할 수 있다&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;interaction to next paint&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;긴급 업데이트, 전환 업데이트로 나눠서 사용자가 직접 클릭한 영역만 바로 업데이트되고 나머지 영역은 그 뒤에 업데이트되도록 수정 (react18에서 제공하는 api 함수 활용)
startTransition&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;cumulative layout shift&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;최소 height 값을 부여해 레이아웃이 전후가 유지되도록 활용&lt;/p&gt;
&lt;p&gt;정리
반응성 지표별 개선&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;블로킹 타임 발생시 강제 리플로우를 확인&lt;/li&gt;
&lt;li&gt;전체 화면 업데이트 발생 시 중요 부분 우선 업데이트 진행&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Javascript 기본-클래스]]></title><link>https://ksy8230.github.io/todayILearned/javascript/how_it_works5/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/javascript/how_it_works5/</guid><pubDate>Wed, 30 Nov 2022 00:00:00 GMT</pubDate><content:encoded></content:encoded></item><item><title><![CDATA[Javascript 기본-프로토타입]]></title><description><![CDATA[Frame 55 개체를 표현하기 위해 객체라는 개념이 있고 이 객체의 행위를 위해 메서드 함수를 사용하며 메서드 함수가 객체에 접근하기 위해 this…]]></description><link>https://ksy8230.github.io/todayILearned/javascript/how_it_works4/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/javascript/how_it_works4/</guid><pubDate>Mon, 28 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203940809-40ff5208-ed46-46ba-8568-4ff0237c59da.png&quot; alt=&quot;Frame 55&quot;&gt;&lt;/p&gt;
&lt;p&gt;개체를 표현하기 위해 객체라는 개념이 있고 이 객체의 행위를 위해 메서드 함수를 사용하며 메서드 함수가 객체에 접근하기 위해 this라는 개념이 있다는 것까지 정리되었다.&lt;br&gt;
그런데 이 객체가 아주 많은 케이스를 개발해야하는 상황이 온다면 이 모든 객체들을 어떻게 만들어줘야할까? 단순히 백 개의 객체를 만들어야한다고 해서 100번의 복붙 작업이 이루어지지는 않을 것이다.&lt;br&gt;
객체들끼리의 상관관계를 따져서 최대한 비슷한 기능을 가진 추상적인 객체를 만들어 재활용 가능한 객체를 만든다면 훨씬 더 유용하다. 바로 프로토타입이 존재하는 이유가 여기서 나온다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204169773-427758f8-0f66-4cdb-8026-1d884034689c.JPG&quot; alt=&quot;프로토타입1&quot;&gt;&lt;/p&gt;
&lt;p&gt;test라는 함수를 만든 뒤 이 함수를 &lt;code class=&quot;language-text&quot;&gt;console.dir(test)&lt;/code&gt;로 찍어서 보면 위와 같은 결과가 나온다.&lt;/p&gt;
&lt;h3 id=&quot;prototype&quot; style=&quot;position:relative;&quot;&gt;[[Prototype]]&lt;a href=&quot;#prototype&quot; aria-label=&quot;prototype permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;자바스크립트에서의 객체들은 모두 숨김 프로퍼티를 갖는다. 이 숨김 프로퍼티의 값은 부모 참조값을 누굴 갖냐에 따라 null이 될수도 있고 다른 대상을 참조하는 값으로 가질 수도 있다. (부모를 참조하는 값 = 프로토타입) 자바스크립트에서 프로토타입의 동작은 참 편리하게 작동한다. 특정 객체의 프로퍼티를 읽으려했을 때 값이 없는 경우 자동으로 프로토타입에서 프로퍼티가 있는지 찾아준다. 예시가 조금 그렇지만 사람으로 따지면 마치 자식에게 돈이 없으면 이 자식의 부모를 알아서 찾아내 돈을 뽑아내는 느낌이다. 자유로운 자바스크립트는 또한 이런 프로토타입의 값을 개발자가 수정하도록 해 주는 함수를 제공해 준다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;❗ [[Prototype]]의 값을 추가하거나 가져오는 게터세터의 역할로 &lt;strong&gt;proto&lt;/strong&gt;가 있고 근래에는 Object.getPrototypeOf, Object.setPrototypeOf 함수를 많이 쓴다고 한다&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;리터럴-객체의-프로토타입&quot; style=&quot;position:relative;&quot;&gt;리터럴 객체의 프로토타입&lt;a href=&quot;#%EB%A6%AC%ED%84%B0%EB%9F%B4-%EA%B0%9D%EC%B2%B4%EC%9D%98-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85&quot; aria-label=&quot;리터럴 객체의 프로토타입 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; animal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;eats&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; rabbit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;jumps&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
rabbit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__proto__ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; animal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rabbit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;rabbit 리터럴 객체의 프로토타입에 animal 리터럴 객체 값을 부여했다. 결과를 확인해 보면 rabbit 리터럴 객체의 프로토타입에 eats라는 프로퍼티가 추가됐다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204171239-8bf227c0-3698-4189-ad3e-156e48b702c3.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;생성자-함수의-프로토타입&quot; style=&quot;position:relative;&quot;&gt;생성자 함수의 프로토타입&lt;a href=&quot;#%EC%83%9D%EC%84%B1%EC%9E%90-%ED%95%A8%EC%88%98%EC%9D%98-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85&quot; aria-label=&quot;생성자 함수의 프로토타입 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; rabbit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;그냥 흰 토끼&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rabbit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204172352-c9dba09e-34d1-49ed-8c3f-5f9d95baf35f.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;자바스크립트에서는 리터럴 객체 말고도 new 생성자 함수를 이용해 객체를 만들 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; animal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;eats&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; animal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; rabbit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;먹는 흰 토끼&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rabbit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204172527-d4a1c6ca-47f0-415d-b189-8eb8b11c7379.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;그리고 생성자 함수에서 프로토타입 정보를 접근하는 방법은 &lt;strong&gt;함수 객체 내에 기본으로 존재하는 prototype 프로퍼티를 통해 가능하다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;prototype 프로퍼티를 이용해 Rabbit 함수 프로토타입에 값을 추가하기 전의 new 생성자 Rabbit 함수로 만들어진 rabbit의 형태를 먼저 살펴보면 아래와 같이 생겼다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204172881-d5c3bb1e-3a11-427e-a2f1-c65068129619.JPG&quot; alt=&quot;프로토타입4&quot;&gt;&lt;/p&gt;
&lt;p&gt;rabbit은 생성자 함수(constructor function)를 통해 만들어진 변수 객체이다. 자바스크립트 생성자의 특징 중 하나로, 생성자 함수는 new 키워드를 통해 만들어질 때 빈 객체를 만들어 this를 할당시킨다. 그러고나서 해당 함수 본문을 실행하는데 위 코드의 Rabbit을 예로 들자면 this에 name이라는 프로퍼티를 추가한 상태가 된다. 그리고 런타임에서 this를 반환하기 때문에 rabbit.name의 결과값이 “그냥 흰 토끼”가 되는 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; rabbit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;그냥 흰 토끼&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사실 이 코드의 동작과&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; rabbit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;그냥 흰 토끼&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드는 동일하게 동작한다. 다만 new 생성자 함수를 사용한다면 리터럴 객체보다 쉽게 다른 이름을 가진 Rabbit 객체를 만들 수 있게 된다.&lt;/p&gt;
&lt;h4 id=&quot;생성자-함수-객체와-일반-함수의-차이&quot; style=&quot;position:relative;&quot;&gt;생성자 함수 객체와 일반 함수의 차이&lt;a href=&quot;#%EC%83%9D%EC%84%B1%EC%9E%90-%ED%95%A8%EC%88%98-%EA%B0%9D%EC%B2%B4%EC%99%80-%EC%9D%BC%EB%B0%98-%ED%95%A8%EC%88%98%EC%9D%98-%EC%B0%A8%EC%9D%B4&quot; aria-label=&quot;생성자 함수 객체와 일반 함수의 차이 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Rabbit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204173581-881d0663-78a0-4219-af31-73e97e8a150e.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;함수 자체를 조회해 보면 [[Prototype]] 는 f 함수를 가리키고 있고 함수도 결국은 객체이기에 f 함수의 [[Prototype]] 은 Object를 가리키고 있다.
하지만 이 Rabbit을 생성자로 함수로 만들어 해당 함수의 인스턴스인 rabbit을 조회해 보면&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204173760-7f1de34b-ea2e-4af1-8db6-9c0f7d9b9ed9.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;인스턴스는 객체이기에 당연히 부모를 참조하는 [[Prototype]] 은 Object를 가리키고 있다.&lt;br&gt;
또한 prototype 프로퍼티는 함수에만 존재한다는 사실을 다시 확인해 볼 수 있다.&lt;/p&gt;
&lt;h3 id=&quot;함수-prototype-프로퍼티-의도대로-사용하기&quot; style=&quot;position:relative;&quot;&gt;함수 prototype 프로퍼티 의도대로 사용하기&lt;a href=&quot;#%ED%95%A8%EC%88%98-prototype-%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0-%EC%9D%98%EB%8F%84%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0&quot; aria-label=&quot;함수 prototype 프로퍼티 의도대로 사용하기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;다시 아까의 예시로 돌아가서 Rabbit이라는 함수로 new 생성자를 이용해 각각 다른 이름을 가진 토끼 객체를 만들려고 한다. 그런데 이 토끼 객체의 부모 참조값에 eat:true 속성을 공통으로 부여하고 싶다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204174411-20d4ce0d-da2e-402c-ad31-a884ec1fdff7.JPG&quot; alt=&quot;프로토타입5&quot;&gt;&lt;/p&gt;
&lt;p&gt;위와 같이 Rabbit 함수의 prototype에 eats:true 객체 리터럴을 부여하고 rabbit 인스턴스를 조회해보면 의도한 것처럼 콘솔 결과가 잘 나온다. 그런데 Rabbit 함수 자체를 조회해 보면 일반 함수와 뭔가 다른 점이 보인다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204175107-2ff3a7c7-665a-4ebf-aca0-43e9b171fcb3.png&quot; alt=&quot;image&quot;&gt; &lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204173581-881d0663-78a0-4219-af31-73e97e8a150e.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;함수의 prototype에 생성자 역할을 하는 constructor가 존재하지 않게 되었다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204175270-f81f5f92-5ba8-4d29-a01a-7361322f5595.JPG&quot; alt=&quot;프로토타입6&quot;&gt;&lt;/p&gt;
&lt;p&gt;Rabbit 함수는 생성자 함수가 없는 객체가 되어 당연히 위와 같이 다른 이름을 가진 토끼를 만들 수 없다.&lt;br&gt;
이런 상황을 방지하기 위해 함수의 propertype 속성을 건드릴 때는 객체를 부여하는 식의 덮어쓰기 말고 &lt;strong&gt;Rabbit.prototype.eats = true 식으로 프로퍼티를 추가해야한다.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;prototype-최적화&quot; style=&quot;position:relative;&quot;&gt;[[Prototype]] 최적화&lt;a href=&quot;#prototype-%EC%B5%9C%EC%A0%81%ED%99%94&quot; aria-label=&quot;prototype 최적화 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;대개는 객체를 생성할 때만 [[Prototype]]을 설정하고 이후엔 수정하지 않는 걸 권장한다. 위 코드들의 예시를 들자면 rabbit이 animal을 상속받도록 설정하고 난 이후엔 상속 관계를 변경하지 않는 게 좋다는 뜻이다. 왜냐면 자바스크립트 엔진은 설정된 상속 시나리오를 토대로 최적화가 되어있기 때문에 Object.setPrototypeOf나 obj.&lt;strong&gt;proto&lt;/strong&gt;=를 써서 프로토타입을 그때그때 바꾸는 연산은 객체 프로퍼티 접근과 관련된 최적화를 망치기 때문에 성능에 나쁜 영향을 미친다. [[Prototype]]을 수정했을 때 다음 결과가 정확한 경우, 혹은 속도가 중요하지 않은 경우가 아니라면 [[Prototype]]의 잦은 수정은 지양해야한다.&lt;/p&gt;
&lt;h3 id=&quot;참고한-글&quot; style=&quot;position:relative;&quot;&gt;참고한 글&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EA%B8%80&quot; aria-label=&quot;참고한 글 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://ko.javascript.info/function-prototype&quot;&gt;함수의 prototype 프로퍼티&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Javascript 기본-객체와 메서드, 그리고 this]]></title><description><![CDATA[Frame 41 (…]]></description><link>https://ksy8230.github.io/todayILearned/javascript/how_it_works3/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/javascript/how_it_works3/</guid><pubDate>Fri, 25 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203472502-a8534622-8fd4-4a12-98e8-e4385213fb06.png&quot; alt=&quot;Frame 41 (2)&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;객체&quot; style=&quot;position:relative;&quot;&gt;객체&lt;a href=&quot;#%EA%B0%9D%EC%B2%B4&quot; aria-label=&quot;객체 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;자바스크립트를 설명하는 위키의 설명글에 따르면 아래와 같다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;자바스크립트는 객체 기반의 프로그래밍을 가능하게 해 주는 언어이다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;객체란 사람, 블로그, 토끼 등 실존하는 개체를 표현할 때 사용하는 단어로 이 실존 개체들을 자바스크립트를 통해 프로그래밍으로써 표현이 가능하다는 의미이기도 하다. 또한 개체는 특정한 행위를 하는데 이런 동적인 개념을 자바스크립트에선 메서드로서 표현이 가능하다.&lt;/p&gt;
&lt;h3 id=&quot;메서드&quot; style=&quot;position:relative;&quot;&gt;메서드&lt;a href=&quot;#%EB%A9%94%EC%84%9C%EB%93%9C&quot; aria-label=&quot;메서드 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;개체에 행위를 부여하기위해선 메서드는 개체에 접근할 수단이 필요하다. 그리고 그 수단으로 this가 있다.&lt;br&gt;
&lt;strong&gt;리터럴 객체 속 메서드의 this는 객체를 가리킨다&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ksy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;studyJS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;가 공부를 합니다.&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;studyJS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ksy가 공부를 합니다.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;user라는 객체에 studyJS 메서드를 만들어 user객체가 해당 메서드를 호출했을 때 “ksy가 공부를 합니다”라는 행위를 하게 한다. 그리고 studyJS 메서드 내부에서 this를 이용해 user 객체의 정보 중 name 값을 가져오는 걸 확인할 수 있다.&lt;/p&gt;
&lt;h3 id=&quot;함수-안의-this&quot; style=&quot;position:relative;&quot;&gt;함수 안의 this&lt;a href=&quot;#%ED%95%A8%EC%88%98-%EC%95%88%EC%9D%98-this&quot; aria-label=&quot;함수 안의 this permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;그렇다면 함수 안에서의 this도 마찬가지일까?&lt;br&gt;
함수와 메서드의 용어에 혼동이 와서 많이 헷갈렸는데 this를 설명할 때만큼은 분명하게 짚고 넘어가야 편하다.&lt;/p&gt;
&lt;p&gt;객체 &gt; 함수 &gt; 메서드 (&gt; 포괄의 의미)&lt;/p&gt;
&lt;p&gt;메서드는 리터럴 객체{…}에 포함되어 있는 함수이고&lt;br&gt;
더 큰 개념의 함수는 자바스크립트에서 작업을 수행하는 구성 블록, 혹은 독립적인 코드 조각이다.&lt;br&gt;
그리고 함수에서 더 큰 개념에 바로 객체가 있다.&lt;/p&gt;
&lt;p&gt;자바스크립트에선 모든 함수에 this를 사용할 수 있다. 그리고 this가 나온 자바스크립트 코드를 이해할 때 헷갈리지 말아야할 부분이 있는데 다른 프로그래밍과 다르게 &lt;strong&gt;자바스크립트의 this는 런타임에서 결정된다.&lt;/strong&gt; 호출한 주체가 누구냐에 따라 값이 달라진다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; picka &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;피카츄&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; kobugi &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;꼬부기&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;skill&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;가 공격한다&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

picka&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;attack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; skill&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
kobugi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;attack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; skill&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

picka&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
kobugi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;동일한 함수 skill을 다른 객체 정보를 갖고 있는 pick와 kobugi에게 각각 attack이라는 프로퍼티에 동일한 함수 skill을 연결해줬다. 하지만 결과값은 각 객체의 정보에 따라 다르게 나온다. this가 런타임 단계에서 호출한 주체 정보에 따라 달라진 것이다.&lt;/p&gt;
&lt;h4 id=&quot;길을-잃은-this&quot; style=&quot;position:relative;&quot;&gt;길을 잃은 this&lt;a href=&quot;#%EA%B8%B8%EC%9D%84-%EC%9E%83%EC%9D%80-this&quot; aria-label=&quot;길을 잃은 this permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ksy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;- 뭐가 찍힐까?&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드의 마지막 줄 콘솔에는 어떤 값이 찍힐까?&lt;/p&gt;
&lt;p&gt;답은 undefined이다. (실행 환경 nodejs)&lt;/p&gt;
&lt;p&gt;8번 줄에서 makeUser()호출할 당시의 리턴된 this는 호출의 주체가 함수였기 때문에 makeUser를 가르키지 못하고 makeUser 바깥으로 나와 참조할 대상을 찾는다. 이때 ‘user strict’ 엄격모드에서 자바스크립트를 실행하면 대상이 없다고 판단해 undefined를 줄 것이고 엄격모드가 아닌 경우에는 실행 컨텍스트에 따라 값이 달라진다. 브라우저에서는 전역값인 window를 줄 것이고 nodejs에서는 전역값인 global을 준다.&lt;/p&gt;
&lt;p&gt;길을 잃어버린 이 this가 원래 의도대로 makeUser를 가리키게하려면 어떻게 해야할까?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ksy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 👈&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;함수를 객체 프로퍼티에 저장해 object.method() 형태로 호출하면 this는 object를 참조한다.&lt;/strong&gt; 따라서 해당 코드는 콘솔에 본래 의도했던대로 makerUser 함수에 대한 정보가 찍힌다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name: &lt;span class=&quot;token string&quot;&gt;&apos;John&apos;&lt;/span&gt;, ref: &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Function: ref&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;settimeout과-this&quot; style=&quot;position:relative;&quot;&gt;setTimeout과 this&lt;a href=&quot;#settimeout%EA%B3%BC-this&quot; aria-label=&quot;settimeout과 this permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;이런 경우는 어떨까? setTimeout에 객체의 메서드를 콜백으로 전달해도 this가 호출한 객체를 기억할까?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ksy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;hi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; 안녕!&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hi&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ?&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결과는 undefined다.&lt;br&gt;
user.hi 메서드가 setTimeout으로 전달될 때 user 객체에서 분리된 채로 전달되어 name이라는 정보를 잃어버리기 때문이다. 이는 setTimeout만이 가진 특별한 동작 방식 때문인데, setTimeout은 인수로 전달받은 함수를 호출할 때 this에 window를 할당한다. 위 코드에선 window.name 값은 미리 지정하지 않았으니 당연히 undefined가 떴던 것이다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;방법1: 래핑 함수로 this 잡아두기&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ksy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;hi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; 안녕!&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// () =&gt; {} 래핑!&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 전달한 메서드 위에 함수를 한겹 씌워서 호출하면 메서드 내부 this가 참조하는 값은 () =&gt; {} 함수 블록에 걸리게 되고 user 값을 찾 user 안의 name 정보를 가져와 올바른 결과값이 나온다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;방법2: bind 메서드로 this 붙여놓기&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ksy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;hi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; 안녕!&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// bind!&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;모든 함수는 this를 수정하게 해주는 내장 메서드 bind를 제공한다&lt;/strong&gt; this가 바라봤으면 하는 객체를 대상 함수 뒤에 bind 메서드로 붙여놓으면 원하는 결과값이 나온다.&lt;/p&gt;
&lt;h4 id=&quot;헷갈리기-쉬운-예시-코드들-test&quot; style=&quot;position:relative;&quot;&gt;헷갈리기 쉬운 예시 코드들 Test!&lt;a href=&quot;#%ED%97%B7%EA%B0%88%EB%A6%AC%EA%B8%B0-%EC%89%AC%EC%9A%B4-%EC%98%88%EC%8B%9C-%EC%BD%94%EB%93%9C%EB%93%A4-test&quot; aria-label=&quot;헷갈리기 쉬운 예시 코드들 test permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;예시 코드들의 답을 유추해 보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; test &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;tester&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;sy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;test2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name2&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; play!&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;details&gt;
    &lt;summary&gt; 정답 &lt;/summary&gt;
&lt;!-- empty line --&gt;
    this는 호출한 당시의 주체를 가리키기 때문에 sy를 가리키고 roto 안에 name 값이 없기 때문에 undefined test2 play! 가 찍힌다
&lt;/details&gt;
&lt;!-- empty line --&gt;
&lt;hr&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; test &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;tester&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;sy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;test2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name2&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; play!&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;details&gt;
    &lt;summary&gt; 정답 &lt;/summary&gt;
&lt;!-- empty line --&gt;
    this는 호출한 당시의 주체를 가리키는데 화살표 함수는 this 값이 존재하지 않으므로 undefined undefined play!가 찍힌다
&lt;/details&gt;
&lt;!-- empty line --&gt;
&lt;hr&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;John&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;details&gt;
    &lt;summary&gt; 정답 &lt;/summary&gt;
&lt;!-- empty line --&gt;
    this는 호출한 당시의 주체를 가리키는데 makeUser 호출 시 this가 객체의 메서드로 호출된게 아니라서 this는 undefined가 되므로 name 값을 찾을 수 없다고 찍힌다.
&lt;/details&gt;
&lt;!-- empty line --&gt;
&lt;hr&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;John&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;details&gt;
    &lt;summary&gt; 정답 &lt;/summary&gt;
&lt;!-- empty line --&gt;
    this는 호출한 당시의 주체를 가리키는데 this는 객체의 메서드 ref()로 호출되었으므로 . 앞에 있는 주체인 user를 가리킨다. 그러므로 user를 가리키는 this는 name 값을 찾을 수 있게 된다.
&lt;/details&gt;
&lt;!-- empty line --&gt;
&lt;hr&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;RockBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;members&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;members &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;perform&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; theOralCigarettes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RockBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;takuya&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a e u i a e u i&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

theOralCigarettes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;details&gt;
    &lt;summary&gt; 정답 &lt;/summary&gt;
&lt;!-- empty line --&gt;
    setTimeout은 인수로 전달받은 함수를 호출할 때 this를 window에 할당한다. this가 RockBand를 가리키고 있지 않기 때문에 this.members가 undefined가 뜬다.
&lt;/details&gt;
&lt;!-- empty line --&gt;
&lt;hr&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;RockBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;members&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; that &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;members &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;perform&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      that&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; theOralCigarettes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RockBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;takuya&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a e u i a e u i&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

theOralCigarettes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;details&gt;
    &lt;summary&gt; 해결법1 - 클로저 &lt;/summary&gt;
&lt;!-- empty line --&gt;
    자바스크립트에서는 함수가 함수를 반환할 때 당시의 환경정보를 기억한다.
    this.perform 함수를 호출할 때 that 정보를 기억하고 this 값이 할당된 that은 Rockband 객체를 가리키고 있어서 Rockband 내부에 members 값을 읽을 수 있으므로 정상 값이 출력된다.
&lt;/details&gt;
&lt;!-- empty line --&gt;
&lt;hr&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;RockBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;members&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;members &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;perform&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; theOralCigarettes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RockBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;takuya&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a e u i a e u i&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

theOralCigarettes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;details&gt;
    &lt;summary&gt; 해결법2 - bind &lt;/summary&gt;
&lt;!-- empty line --&gt;
    모든 함수는 this를 수정시켜주는 bind를 제공한다.
    setTimeout은 인수로 전달받은 함수를 호출할 때 this를 window에 할당하는데 이때 this를 RockBand로 바라보도록 수정한다.
&lt;/details&gt;
&lt;!-- empty line --&gt;
&lt;h3 id=&quot;참고한-글&quot; style=&quot;position:relative;&quot;&gt;참고한 글&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EA%B8%80&quot; aria-label=&quot;참고한 글 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://ko.javascript.info/object-methods&quot;&gt;메서드와 this&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NHN FORWARD]]></title><description><![CDATA[(사진) 2022년 11월 24일 목요일 nhn forward…]]></description><link>https://ksy8230.github.io/todayILearned/review/2022/NHNFORWARD/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/review/2022/NHNFORWARD/</guid><pubDate>Thu, 24 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;(사진)&lt;/p&gt;
&lt;p&gt;2022년 11월 24일 목요일 nhn forward에 다녀오며 느낀점을 적어보자.&lt;br&gt;
우선 기술 컨퍼런스 자체가 처음이라 굉장히 어벙벙했다. 긴 줄이 보여서 뭔지도 모르고 일단 서서 기다리다 깃헙에서 포춘쿠키를 받은 자랑부터, 생각보다 정말 많은 사람들이 지식과 경험에 관심을 갖고 기꺼이 시간을 내서 참석하는 문화가 있다는 걸 육안으로 체험한 계기가 되었다.&lt;br&gt;
나는 사실 2021 nhn forward에서 “결국 자바스크립트를 알아보기로 했다” 세션을 진행해 주신 이진우님의 이야기가 인상 깊고 내용이 유익해 올해는 꼭 오프라인으로 참석해야지라며 신청을 했는데 이번 포워드에서는 자바스크립트 본질에 대한 세션보다는 프론트엔드 개발 라이브러리로 핫한 리액트와 관련된 내용이 더 많았던 것 같다. 다른 회사의 프론트엔드 개발자들이 관심 갖고 유용하다 생각하는 업무 방식과 기술 스택을 엿보고 싶은 마음이 1.5순위였는데 일단 그 범주에 올해도 여전히 리액트가 있었음에 안도(?)아닌 안도를 했다.&lt;/p&gt;
&lt;h3 id=&quot;마이크로-프론트엔드&quot; style=&quot;position:relative;&quot;&gt;마이크로 프론트엔드&lt;a href=&quot;#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C&quot; aria-label=&quot;마이크로 프론트엔드 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;키워드만 놓고 봤을 땐 새로운 기술이 또(!) 나온 줄 알았다. 마이크로 프론트엔드란 대규모 서비스에서 개발 범위에 있는 아주 많은 서비스들의 프론트 개발을 운용하기 위해 나온 단어이다.&lt;br&gt;
해당 세션에서는 nhn 두레이 리뉴얼을 예시로 진행됐다.&lt;br&gt;
두레이는 기본 베이스가 문서형 일정 관리 시스템이라 생각하는데 nhn사는 내년을 목표로 두레이에 메일 기능, 드라이브 기능, 결제 기능 등 조금 더 거대한 서비스를 제공하는 두레이로 제공할 계획이라 했다. 이런 경우에 각 서비스들을 하나의 리액트 프로젝트 안에서 페이지별로 개발하면 어떤 문제가 생길까?&lt;br&gt;
우리가 단일 기능 위주의 독립적인 함수 단위로 개발하는 이유를 생각해 보면 어렴풋하게나마 그 걱정들을 유추해 볼 수 있을 것이다. 두레이라는 큰 엄마 밑에 각 서비스 별로 자식들을 관리했을 때 개발-테스트-배포-QA 의 범위가 줄어들 것이다. 내가 수정한 건 메일 기능인데 드라이브 기능을 담당하는 코드까지 포함해서 테스트한다는 건 불필요한 시간을 소요할 수도 있기 때문이다.&lt;br&gt;
그렇다면 이 수많은 서비스별 프로젝트들은 어땋게 만들어볼 수 있을까?&lt;br&gt;
서비스별로 프로젝트를 만들어놓고 각 서비스끼리의 연결은 &lt;a href=&quot;http://domain/v1/mail&quot;&gt;http://domain/v1/mail&lt;/a&gt; &lt;a href=&quot;http://domain/v1/driver&quot;&gt;http://domain/v1/driver&lt;/a&gt; 식으로 링크만 맞춰서 연결해 주면 결과물 자체는 같을지 모르나 링크를 변경할 때마다 같은 모듈을 로드하는 경우가 생길 것이다. 왜냐면 이 두 링크는 같은 개발 모듈이 아닌 내용만 같은 다른 개발 모듈을 불러올 것이기 때문이다.&lt;br&gt;
여기에서 새로 ‘webpack 5 module federation’ 키워드가 던져졌다.&lt;/p&gt;
&lt;p&gt;webpack은 웹앱을 최적화시켜 구동시키기 위해 웹앱을 만들어주기 위해 만들어진 수많은 자바스크립트 파일들을 하나의 묶음(번들) 단위로 만들고 압축시키는 역할을 한다. 그런데 이제는 이 webpack이 빌드 단계가 아닌 런타임 단계에서 호스트 최상단으로 여기저기 개발된 각 서비스들의 코드 조각들을 모아 하나의 부모 앱으로 실행시킨다.&lt;/p&gt;
&lt;p&gt;‘webpack 5 module federation을 이용하면 각 서비스별로 개발 운용한 뒤 큰 부모 서비스에서 모아 배포하는 이상적인 작업 형태가 가능’해진 것이다. 이제는 기술이 발전하다못해 함수들만 모아 배포시키는 게 아닌 프로젝트 덩어리를 모아 최종 부모 프로젝트에 배포시키는 단계로 발전한 것 같다.&lt;/p&gt;
&lt;h3 id=&quot;디자인-시스템&quot; style=&quot;position:relative;&quot;&gt;디자인 시스템&lt;a href=&quot;#%EB%94%94%EC%9E%90%EC%9D%B8-%EC%8B%9C%EC%8A%A4%ED%85%9C&quot; aria-label=&quot;디자인 시스템 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;디자인 시스템은 사실 이미 현업에서 운용하고 있지만 짜집기 코드가 많고 (리팩토링이 안 된 개발만을 위한 소스들) 어떻게든 굴러가는 형태로 배포시켜 사용 중이라 개인적으로 마음에 들지 않는 부분이 굉장히 많았다. 이런 내 현주소에서 어떤 점부터 개선점을 찾아야할지 궁금해 해당 세션을 들었는데 사실 여전히 뜬구름 잡는 이야기에 머물러있기는 하다. 그럼에도 디자인 시스템을 놓고 싶지 않은 이유는 디자인 시스템이란 완료 단계가 없는 시스템이라 생각하고 꾸준히 가져가 현 시점에서 가능한 만큼이라도 디자인의 통일성을 다지고 싶기 때문이다. 세션의 내용은 크게 세 가지로 정리할 수 있겠다.&lt;/p&gt;
&lt;p&gt;1 디자인 시스템의 가치&lt;br&gt;
2 진화하는 디자인 시스템&lt;br&gt;
3 디자인 시스템 언제 시작할까&lt;/p&gt;
&lt;p&gt;디자인 시스템 가치는 ‘효율성과 사용성’을 같이 가져가기 위해 만드는 시스템이라 생각한다. 디자인은 다지아너의 영역이나 엔지니어는 몰라도 된다의 방식은 더 이상 현업에서 채택하지 않는 추세인 것 같다. 오히려 엔지니어 쪽에서 디자인 시스템에 더 많은 관심과 피드백을 줘야 실용적인 디자인 시스템이 나온다. 왜냐면 결국 그 다자인을 코드로 실현시키는 작업자가 엔지니어이고 그 디자인을 미리 구동해 보는 환경이 디자인 시스템이 되어야되기 때문이다.&lt;/p&gt;
&lt;p&gt;현재 대부분의 회사에서 채택하고 있는 디자인 툴은 포토샵을 지나 스케치를 지나 피그마에 머물러있다고 한다. 그도 그럴 것이 요즘 개발 방식이 점점 컴포넌트와 같은 작은 단위부터 시작하는 것과 일맥상통하게 디자인도 그에 맞게 작은 개체 디자인부터 관리하는 방향으로 적용되고 있기 때문이다. 여기에 머터리얼 디자인이라는 개념이 생긴다. 디자인 시스템은 부모 디자인이 존재하고 이 부모 디자인을 참조하는 하위 디자인 컴포넌트들이 만들어지고 관리되어야 한다. 피그마를 사용하면 컴포넌트의 개념을 적용하지 않으면 툴을 사용하기 힘들게 만들었기 때문에 많은 회사에서 디자인 시스템을 구축할 때 피그마를 사용한다고 한다.&lt;/p&gt;
&lt;p&gt;그렇다면 이런 디자인 시스템을 시작해야하는 시기는 언제일까? 팀이 점점 커지면 일관성이 무너지기 쉽다. 업무는 사람 자체가 문서화되어 있어야하는데 개별 직원들마다 시스템을 갖고 있다면 아주 작은 부분부터 시작해 치명적인 부분까지 비효율적인 방향으로 영향을 끼칠 것이다. 본 개발자도 손 대기 힘든 지독한 레거시 코드를 피하는 길은 앞서 말한 마이크로 프론트엔드 개발 방식만이 아닌 디자인 시스템을 구축하는 것도 방안이 될 거라 생각한다. 단순히 뷰단에서 색상값이 중구난방이고 레이아웃이 제각각인 결과물을 개선하는 게 아닌 코드 관리도 같이 가져갈 수 있다고 생각한다. 세션에서는 여기에 대한 예시로 디자인 토큰값 적용을 들었다. #fff 색상 코드를 그대로 사용하는 것이 아닌 md.design.darkTheme.white 식으로 코드화시킨다면 디자이너와 엔지니어가 하얀색에 대해 색상값을 떠오르고 접근할 때 동일한 싱크를 가져갈 수 있고 이 토큰이 머터리얼 디자인에 적용되어 있다면 머터리얼 디자인을 상속한 다른 자식 프로젝트 디자인 또한 일관된 정보로 내려줄 수 있어 프로세스를 저동으로 문서화시킬 수도 있다고 생각한다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Javascript 작동 원리]]></title><description><![CDATA[…]]></description><link>https://ksy8230.github.io/todayILearned/javascript/how_it_works2/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/javascript/how_it_works2/</guid><pubDate>Tue, 22 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;새로운 프레임워크가 유난히 빠르게 등장하는 프론트엔드 영역이지만 코어에는 여전히 자바스크립트가 있고 이에 대한 학습이 부족하다는 생각이 들어 짬이 난 김에 공부한 내용을 글로, 그림으로 정리해 보려고 한다.&lt;br&gt;
자바스크립트는 객체 기반의 프로그래밍을 가능하게 해 주는 언어로 주로 웹 브라우저에서 사용이 되고 NodeJS와 같은 자바스크립트 런타임 환경에서도 활용이 가능하다. 자바스크립트를 구동할 수 있는 가장 대중적인 자바스크립트 엔진으로 V8이 있는데 이 엔진은 구글 크롬, NodeJS에서 사용 중이다.&lt;br&gt;
자바스크립트 코드 동작의 근간이 되는 곳부터 시작하기 위해 실행 컨텍스트와 콜스택부터 이해해보자.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203189007-b73a4104-7b20-4d44-868a-87b6dee62901.png&quot; alt=&quot;실행컨택스트&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;자바스크립트 엔진 = 콜스택 + 메모리로 이루어져있다&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;실행-컨텍스트&quot; style=&quot;position:relative;&quot;&gt;실행 컨텍스트&lt;a href=&quot;#%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8&quot; aria-label=&quot;실행 컨텍스트 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203189541-2bfe5764-88bd-42ab-8814-abdae71c9ae0.jpg&quot; alt=&quot;Frame 33&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;💡 자바스크립트 코드가 진행되는 상황을 추적하는데 필요한 정보를 모아둔 영역으로 자바스크립트 엔진의 메모리에 필요한 정보들이 할당된다&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;동작의 개념을 이해하기 위해 크게 두 영역이 있음을 기억하자.&lt;br&gt;
코드를 실행시키는 &lt;strong&gt;실행 컨텍스트 영역&lt;/strong&gt;&lt;br&gt;
코드 실행을 위해 저장되는 &lt;strong&gt;메모리 영역&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드가 실제로는 어떤 과정을 거쳐 numer 변수 3이 할당되는 걸까.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203006199-a0310b46-e42d-450b-8631-50ce30686340.png&quot; alt=&quot;Group 7&quot;&gt;&lt;/p&gt;
&lt;p&gt;자바스크립트(이하 js)는 우선 전역 메모리에 sum이라는 이름을 가진 함수 정보와 numer라는 변수를 등록시킨다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203006312-553d6baf-cf0a-4ddd-bb18-11ea6bf48743.png&quot; alt=&quot;Group 9&quot;&gt;&lt;/p&gt;
&lt;p&gt;함수 sum(1, 2)의 호출을 통해 전역 실행 컨텍스트에서 sum 함수 실행 컨텍스트가 실행된다. 이 실행 컨텍스트도 위 그림 도식과 마찬가지로 컨텍스트 영역과 메모리 영역(이하 지역 메모리 영역)을 생성한다. 이 지역 메모리 영역에서는 함수가 받은 매개 변수와 연산값을 담을 result 변수를 등록시킨다. 다시 sum 함수 실행 컨택스트로 돌아와서 함수 내부 연산을 실행하면 result에 3이라는 값이 할당된다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203008449-c5fd724d-7e95-4dc8-bab5-7494706e2ab8.png&quot; alt=&quot;Group 10&quot;&gt;&lt;/p&gt;
&lt;p&gt;그리고 이 result 값을 함수가 반환하면 전역 메모리 변수인 number에 3이 할당된다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203007793-a1df4016-f966-4b94-beec-76a08e1f69d0.png&quot; alt=&quot;Group 11&quot;&gt;&lt;/p&gt;
&lt;p&gt;sum 함수가 종료되면 실행 컨텍스트에서 sum 함수 실행 컨텍스트가 사라진다.&lt;/p&gt;
&lt;h3 id=&quot;콜스택&quot; style=&quot;position:relative;&quot;&gt;콜스택&lt;a href=&quot;#%EC%BD%9C%EC%8A%A4%ED%83%9D&quot; aria-label=&quot;콜스택 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;💡 엔진은 콜스택을 통해 현재 실행 중인 실행 컨텍스트가 어떤 것인지 알 수 있다. (aka. 실행 컨텍스트 추적기)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203189789-bccea3c1-5561-4c35-afc0-7359b4b21051.png&quot; alt=&quot;Frame 35&quot;&gt;&lt;/p&gt;
&lt;p&gt;비커처럼 생긴 콜스택이라는 구조체 바닥에 전역 컨텍스트가 있다고 가정하고 다시 다른 예시 코드를 보며 이해해 보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;c&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; d&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; sumResult &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; sumResult&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exterFn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; calcResult &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;exterFn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; calcResult&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sum&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203241814-9deeff15-6b1f-4650-8604-67f17cc92655.png&quot; alt=&quot;Frame 48 (2)&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;해당 코드가 자바스크립트로 실행되면 전역 메모리에 sum 함수, calc 함수, number 변수가 등록된다.&lt;/li&gt;
&lt;li&gt;그리고 calc () 호출을 통해 전역 실행 컨텍스트 내부에 calc 함수 실행 컨텍스트가 생성된다. 이때 calc 함수 실행 컨텍스트가 콜스택에 쌓인다.&lt;/li&gt;
&lt;li&gt;calc 함수 실행컨텍스트가 만들어질 때 해당 함수와 관련된 정보가 등록된 함수 및 변수들(a, b, exterFn)이 지역 메모리 안에 등록되는데 이때 exterFn 변수는 전역 메모리에 등록된 sum 함수 정보가 연결된다.&lt;/li&gt;
&lt;li&gt;이후 exterFn 함수가 호출되면서 exterFn 함수 실행 컨텍스트가 콜스택에 쌓인다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203241781-08463a46-5c25-4869-8c96-6cb8ef2c5853.png&quot; alt=&quot;Frame 49&quot;&gt;&lt;/p&gt;
&lt;p&gt;이렇게 콜스택에 쌓여 대기 중인 실행 컨텍스트를 자바스크립트 엔진이 콜스택을 보고 위에서부터 차례로 실행하기 시작한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;sum 함수 내부 코드 연산을 통해 sumResult에 3이라는 값이 sum 함수 지역 메모리에 할당되고, sumResult가 반환되면서 calc 메모리의 calcResult 변수에 그 값이 할당된다.&lt;/li&gt;
&lt;li&gt;sum 함수가 반환됐기 때문에 여기에 연결되었던 exterFn 함수 실행 컨텍스트가 종료되며 콜스택에서도 삭제된다.&lt;/li&gt;
&lt;li&gt;같은 원리로 calc 함수에서 calcResult 값이 반환되어 전역 메모리의 number 변수에 할당된다.&lt;/li&gt;
&lt;li&gt;calc 함수가 반환됐기 때문에 calc 함수 실행 컨텍스트가 종료되며 콜스택에서도 삭제된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;계속해서 나오는 전역 메모리, 지역 메모리에 변수라는 것이 등록되는데 자바스크립트 동작을 이해하기 위해서는 이 변수에 대해서도 조금 더 알아볼 필요가 있겠다.&lt;/p&gt;
&lt;h3 id=&quot;var-let-const-그리고-스코프&quot; style=&quot;position:relative;&quot;&gt;var, let, const 그리고 스코프&lt;a href=&quot;#var-let-const-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%8A%A4%EC%BD%94%ED%94%84&quot; aria-label=&quot;var let const 그리고 스코프 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203207706-c3a6854c-026e-4b83-a9a5-2e32f12e45ea.png&quot; alt=&quot;Frame 40&quot;&gt;&lt;/p&gt;
&lt;p&gt;자바스크립트 안에서 변수 선언은 세 키워드를 통해 가능하다.&lt;br&gt;
var, let, const&lt;/p&gt;
&lt;p&gt;ECMAScript6가 나오기 전까지는 var 키워드를 이용해서만 변수 할당이 가능했다. 다만 var 키워드가 가진 문제가 몇 가지 있는데 이를 보완하기 위해 let, const가 나왔다. 그리고 이 둘의 뚜렷한 차이점에 바로 스코프(어디까지 유효 범위를 가지는지)가 있다.&lt;/p&gt;
&lt;h4 id=&quot;var-키워드-특징&quot; style=&quot;position:relative;&quot;&gt;var 키워드 특징&lt;a href=&quot;#var-%ED%82%A4%EC%9B%8C%EB%93%9C-%ED%8A%B9%EC%A7%95&quot; aria-label=&quot;var 키워드 특징 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;함수 레벨의 범위를 갖는다 (= 함수 이외에 선언된 변수들은 전역 변수로 남발될 가능성이 높다)&lt;/li&gt;
&lt;li&gt;키워드 생략 허용이 된다 (= 암묵적인 전역 변수 생성 가능성이 높다)&lt;/li&gt;
&lt;li&gt;변중복 선언 허용 (= 개발자가 의도하지 않은 변수 변경 가능성이 높다)&lt;/li&gt;
&lt;li&gt;변수 호이스팅 (= 변수 선언 이전에 값을 참조해 버려 의도하지 않은 값이 할당되는 경우가 생긴다)&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;var&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;let&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;const&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;함수 범위&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;블록 범위&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;블록 범위&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;프론트 개발 신입 면접을 보던 당시 손코딩 면접에서 등장했던 for문 코드가 있는데 이 예시가 var, let 스코프 차이를 설명하기 적절한 것 같다.&lt;/p&gt;
&lt;p&gt;아래 코드에서 ‘전역 변수’ 값이 콘솔창에 찍힐까?&lt;br&gt;
arrayObjs 배열에는 개발자가 의도한대로 console.log(0), console.log(1), console.log(2)를 찍는 함수들이 배열에 들어갈까?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; arrayObjs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;전역 변수 i&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;루프 함수 변수 i&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    arrayObjs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203221963-d1350113-d018-41c5-9073-071eb401c4b9.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;결과창을 보면 위와 같이 for문에 선언된 i 변수가 전역 변수 i로 3이 할당되어 찍힌다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203222319-8e5d92b2-079b-4cd4-8079-67085500eeaf.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;arrayObjs에 push된 함수들을 실행시켜보면 for문의 i 값에 따라 순차적으로 함수가 저장된 게 아닌 i 값이 for문 전체를 돌고 난 후의 값인 console.log(3)을 담고 있는 함수들이 for문 개수만큼 들어가있다.&lt;br&gt;
의도치 않은 이런 결과가 나온 이유는 var 키워드가 함수 스코프를 갖고 있기 때문이다. for문{}은 함수가 아닌 블록이라서 for문 내부에 생성된 함수에서 i를 접근하려고 했을 때 바로 위에 있는 for문{} i 변수를 참조할 수 없어 for문이 모두 돌고난 후 전역으로 자동 저장된 i(3)를 참조하게 되는 것이다.&lt;br&gt;
즉, 3번 코드줄에서 콘솔로 i값에 접근했을 때 에러가 나지 않은 이유는 for문의 i 변수가 호이스팅되었기 때문이다.&lt;/p&gt;
&lt;p&gt;똑같은 코드를 let으로 바꿨을 때의 결과와 비교하면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; arrayObjs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;전역 변수 i&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;루프 함수 변수 i&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    arrayObjs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;i&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203224004-f8a209a9-b27f-4d8b-9c51-bef639b4f75f.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;전역 변수에 i 콘솔 로그를 찍은 부분에 에러가 뜬다. var 키워드로 for문을 작성했던 이전 코드와 달리 let 키워드를 사용한 for문은 let이 블록 스코프를 갖기 때문에 for문 블록에서 선언한 i를 블록의 바깥에서 접근하려 했기 때문에 참조 에러가 뜨는 것이다. 해당 콘솔 부분을 지우고 함수들을 push한 arrayObjs 배열을 조회해 보면 아래와 같은 결과가 나온다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203224733-e8767947-8927-49e3-aba3-3a07e474fd75.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;let은 블록 범위에서 유효한 값을 유지하기 때문에 for문이 순차로 돌 때 i 값을 유지한 채로 arrayObjs 배열에 함수를 push한 것이다.&lt;br&gt;
const는 let과 비교했을 때 한 번 const 변수로 선언하면 이후에 재할당이 불가능하다는 점 이외에는 모두 같다. 즉, const는 불변의 상수 값을 변수로 할당시킬 때 사용하는 키워드라 보면 된다.&lt;/p&gt;
&lt;h4 id=&quot;스코프-체인&quot; style=&quot;position:relative;&quot;&gt;스코프 체인&lt;a href=&quot;#%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B2%B4%EC%9D%B8&quot; aria-label=&quot;스코프 체인 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;자바스크립트 코드에 익숙한 사람들이 아래 코드로 결과값을 유추해 보라고 한다면 익숙하게 5라는 답을 줄 것이다. 실제로는 어떤 흐름을 통해서 getDiscountedPrice 함수가 바깥에 선언된 discount에 접근할 수 있었던 걸까?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; discount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDiscountedPrice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; price &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; discount&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; totalPrice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDiscountedPrice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;getDiscountedPrice 함수에서 연산하기 위해 필요한 discount 변수는 함수 바깥에 선언되어있고 let은 블록 스코프를 갖고 있어 제약없이 함수 스코프에 필요한 참조값이 없으면 그 위 단계에서 참조값을 찾아 연산한 것이다. 이 현상이 바로 스코프 체인이다.&lt;br&gt;
만일 아래처럼 discount가 선언되었다면 참조 에러가 떴을 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; discount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDiscountedPrice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; price &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; discount&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; totalPrice &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDiscountedPrice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;호이스팅&quot; style=&quot;position:relative;&quot;&gt;호이스팅&lt;a href=&quot;#%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85&quot; aria-label=&quot;호이스팅 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203231155-60bb345b-8e1a-457e-9f29-0223ee2c9aa5.png&quot; alt=&quot;Frame 41&quot;&gt;&lt;/p&gt;
&lt;p&gt;호이스팅이란 실행문이 선언문보다 앞에 있음에도 마치 선언문이 실행문보다 선두에 위치된 것처럼 동작하는 걸 말한다.&lt;br&gt;
또한 헷갈리기 쉬운 개념인데 호이스팅은 전역 변수 빌런 var 키워드에서만 일어나는 게 아닌 let, const, function class 모든 선언에서 호이스팅이 일어난다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;test1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// undefined&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; test1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;test2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Error: Uncaught ReferenceError&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; test2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 var 키워드와 달리 let 키워드는 선언 이전의 변수를 실행시켰을 때 참조 에러를 띄운다. 하지만 참조 에러를 띄웠다는 게 호이스팅이 일어나지 않았다는 의미는 아니다. 이를 설명하기 위해서는 자바스크립트가 변수를 생성하는 단계를 알아야한다. 변수는 총 세 단계에 거쳐 생성된다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;선언 단계&lt;br&gt;
변수를 실행 컨텍스트의 변수 객체에 등록한다. 이 변수 객체는 스코프가 참조하는 대상이 된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;초기화 단계&lt;br&gt;
변수 객체에 등록된 변수를 위한 공간을 메모리에 확보한다. 이 단계에서 변수는 undefined로 초기화된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;할당 단계&lt;br&gt;
undefined로 초기화된 변수에 실제 값을 할당한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;test1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 변수 등록도 하고 undefined 할당되어 있음&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; test1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;var 키워드는 선언과 동시에 해당 값을 초기화시킨다. 스코프의 선두에 변수를 등록하는 동시에 undefined 라는 초기값이 할당되어있기 때문에 변수 선언문 이전에 변수를 에러없이 참조할 수 있었던 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;test1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 변수 등록은 했는데 초기화가 안 되어있다 -&gt; 일시적 사각지대에 들어감&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; test1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 변수 선언문 코드까지 와야 undefined 할당시킴&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;let 키워드는 선언과 초기화 단계가 분리되어 진행된다. 스코프의 선두에 변수를 등록은 시키나(1. 선언 단계는 완료했으나) 변수 선언문까지 와야 초기화 값을 할당(2. 초기화 단계)시킨다. 따라서 값이 없는 변수를 콘솔로 찍으려고 하니 참조 에러가 떴던 것이다. 1. 선언 단계(스코프 시작 지점부터)부터 2. 초기화 단계 직전까지의 구간을 일시적 사각지대(Temporal Dead Zone = TDZ)라 부른다.&lt;/p&gt;
&lt;h3 id=&quot;클로저&quot; style=&quot;position:relative;&quot;&gt;클로저&lt;a href=&quot;#%ED%81%B4%EB%A1%9C%EC%A0%80&quot; aria-label=&quot;클로저 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203251617-87d363c9-01ec-4a79-b8ce-223fc5e40c07.png&quot; alt=&quot;Frame 41&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;💡 함수가 함수를 반환할때 반환되는 함수는 자신을 둘러싼 환경 정보를 가지고 반환된다&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;스코프체인이 일어나기 전에 클로저가 먼저 일어나는데 이에 대한 예시를 코드를 통해 이해해 보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;increase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       number &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; increase&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; newCalc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;newCalc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;newCalc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 코드가 실행되면 전역 메모리에 cal 함수 정보와 newCalc 변수가 등록된다.&lt;br&gt;
이후 calc() 함수가 호출되면서 콜스택에 calc 함수 실행 컨텍스트가 쌓이고 콜스택이 해당 컨텍스트의 순서가 왔을 때 calc 함수 내부 코드를 실행시킨다.&lt;br&gt;
calc 함수 실행 컨텍스트가 생성되고 지역 메모리 공간이 생성되는데 이 메모리 공간에 number와 increase 함수 정보가 등록된다.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;number: 0&lt;br&gt;
increase : 함수&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;calc 함수가 increase 함수를 리턴하면서 increase 함수 정보가 전역 메모리의 newCalc 변수에 할당되고, calc 함수 실행 컨텍스트는 종료된다.&lt;br&gt;
전역 메모리의 newCalc() 호출로 newCalc 함수 실행 컨텍스트가 생성되고 해당 컨텍스트의 지역 메모리도 만들어진다. 여기까지는 앞서 말한 컨텍스트와 지역 메모리의 동작 방식들과 다를 게 없다. 그런데 newCalc에 연결된 increase 함수 내부를 실행하려고 보니 실행에 필요한 number 변수의 참조값이 없다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;increase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 👈 number 어디서 가져오지&lt;/span&gt;
   number &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;calc 함수의 지역 메모리에 등록되 number 변수는 calc 실행 함수 컨텍스트가 종료되면서 이미 사라진 상태이고 전역 메모리에도 newCalc 변수와 calc 함수 정보 밖에 없어서 전역으로 스코프체인을 해도 number 변수 참조값을 찾을 수가 없는 것 같다. 그런데 해당 코드를 실행시켜보면 정상 동작하는데 number는 어디서 튀어나온 걸까?&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;newCalc: 변수&lt;br&gt;
calc : 함수 (increase 정보 할당)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;여기서 클로저라는 개념이 등장한다.&lt;br&gt;
increase 함수가 calc에서 리턴될 때 increase 함수 주변의 정보도 같이 반환된 것이다. 그리고 그 안에 number가 있고 이 number 정보도 newCalc 변수에 함수 정보로 연결되었던 것이다.&lt;br&gt;
이걸 바로 number 변수를 클로저로 찾았다고 표현한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
여기서부터 👉 &lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;increase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       number &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; increase&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 👈 여기까지 정보를 함께 가져온다&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; newCalc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;newCalc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;newCalc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;자바스크립트 엔진은 지역 메모리에서 값을 찾지 못한 경우 상위 컨텍스트로 스코프 체이닝을 하기 전에 클로저로 먼저 정보를 찾는다. newCalc 함수를 호출해 실행하면 number 0 값을 1로 연산해주고 실행 컨텍스트가 종료되면서 콜스택에서도 삭제된다.&lt;br&gt;
newCalc 함수를 두 번째로 호출했을 때도 앞선 동작과 마찬가지로 클로저로 increase 함수가 등록될 때 같이 추가된 환경 정보를 뒤적여 number 값을 찾아내는데 이때의 number 값은 1이므로 최종적으로 2가 반환되어 해당 컨텍스트까지 최종 종료되어 콜스택에서도 삭제된다.&lt;/p&gt;
&lt;h3 id=&quot;렉시컬-환경&quot; style=&quot;position:relative;&quot;&gt;렉시컬 환경&lt;a href=&quot;#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD&quot; aria-label=&quot;렉시컬 환경 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203262429-4124cfbc-b921-4fdb-8473-0af4214ce19c.png&quot; alt=&quot;Frame 41 (1)&quot;&gt;&lt;/p&gt;
&lt;p&gt;클로저가 주변 환경 정보를 기억해서 가져오는 부분에 대해 조금 자세히 이해하려면 렉시컬 환경에 대한 이해가 선행되어야한다.&lt;br&gt;
렉시컬 환경이란 변수와 변수에 할당된 값, 그리고 상위 스코프에 대한 참조를 기록하는 사전적 정의 환경이다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;💡 자바스크립트 동작의 모든 기반에 컨텍스트가 있고, 이 컨텍스트의 환경을 사전적 정의로 풀어낸 객체가 렉시컬 환경이다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;실행 중인 함수, 코드 블럭 등 스크립트를 구성하는 전체는 렉시컬 환경이라 불리는 내부 숨김 연관 객체(internal hidden associated object)를 갖는다.&lt;br&gt;
렉시컬 환경 객체는 두 부분으로 구성된다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/204733344-7bfbb998-08a7-4c35-8fde-11edf01a72d7.png&quot; alt=&quot;Frame 57&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;환경 레코드 : 모든 지역 변수에 대한 정보를 저장하는 객체&lt;br&gt;
외부 환경 참조 : 외부 코드와 연관된 환경 정보&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&quot;렉시컬-환경-변수&quot; style=&quot;position:relative;&quot;&gt;렉시컬 환경-변수&lt;a href=&quot;#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98&quot; aria-label=&quot;렉시컬 환경 변수 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;우리가 자바스크립트 파일에서 아래와 같이 변수를 만든다는 것은 결국 렉시컬 환경 객체에 환경 레코드의 프로퍼티를 만든다는 이야기와 동일하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; me &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;sy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203271747-eb4c4301-9e88-4b1a-905e-6ad1ada9210d.png&quot; alt=&quot;Frame 51 (1)&quot;&gt;&lt;/p&gt;
&lt;p&gt;위 코드는 전역에 등록된 렉시컬 환경 레코드 프로퍼티이므로 외부 렉시컬 환경은 참조하지 않기 때문에 null을 가리킬 것이다.&lt;/p&gt;
&lt;h4 id=&quot;렉시컬-환경-함수&quot; style=&quot;position:relative;&quot;&gt;렉시컬 환경-함수&lt;a href=&quot;#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%ED%95%A8%EC%88%98&quot; aria-label=&quot;렉시컬 환경 함수 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; me &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;sy&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;me&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; 은 내 &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;printName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;이름&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// sy는 내 이름&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;렉시컬 환경에서 함수를 실행하면 새로운 렉시컬 환경이 자동으로 만들어진다. 새로 만들어진 렉시컬 환경에는 name:“이름” 이라는 변수가 저장될 것이다.&lt;/p&gt;
&lt;p&gt;만들어진 printName 렉시컬 환경이 참조하는 외부 렉시컬 환경에는 me:“sy”, printName: 함수 정보라는 변수 정보가 등록되어있을 것이다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203271640-e76b8201-5930-48f7-813f-f84f3907be80.png&quot; alt=&quot;Frame 54&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;렉시컬-환경-함수를-반환하는-함수&quot; style=&quot;position:relative;&quot;&gt;렉시컬 환경-함수를 반환하는 함수&lt;a href=&quot;#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%ED%95%A8%EC%88%98%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%98%EB%8A%94-%ED%95%A8%EC%88%98&quot; aria-label=&quot;렉시컬 환경 함수를 반환하는 함수 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;아까의 클로저 예시 코드를 다시 가져와 보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;increase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        number &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; increase&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; newCalc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;newCalc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;newCalc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;newCalc() 함수를 호출할 때마다 새로운 렉시컬 환경 객체가 만들어질 것이고 여기에는 newCalc 함수를 실행하는데 필요한 변수 정보들이 담겨있을 것이다. 위에서 함수를 생성할 때와 마찬가지로 newCalc 렉시컬 환경의 외부 렉시컬 환경은 그 이전에 실행된 함수의 렉시컬 환경이 될 것이고 이 연쇄는 전역의 null까지 이어져야 끝이 난다.&lt;br&gt;
그런데 클로저 예시 코드는 일반 함수와 다르게 함수를 리턴하는 점에서 기억해야될 부분이 있다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/203272569-2da69ec3-7c50-4719-89d8-24af7414a64d.png&quot; alt=&quot;Frame 54 (1)&quot;&gt;&lt;/p&gt;
&lt;p&gt;자바스크립트에서 &lt;strong&gt;모든 함수는 함수가 생성된 곳의 렉시컬 환경을 기억한다&lt;/strong&gt;는 점이다. 함수는 &lt;code class=&quot;language-text&quot;&gt;[[Environment]]&lt;/code&gt;이라 불리는 숨김 프로퍼티를 갖는데 여기에 함수가 만들어진 곳의 렉시컬 환경에 대한 참조 정보가 저장된다.&lt;br&gt;
즉, 클로저는 렉시컬 스코프로 정보를 가져온다고 말할 수 있는 것이다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;렉시컬 스코프&lt;br&gt;
함수의 호출에서 정의된 위치가 아닌 다른 공간에서 값이 결정되는 스코프&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;렉시컬-환경과-실행-컨텍스트의-관계&quot; style=&quot;position:relative;&quot;&gt;렉시컬 환경과 실행 컨텍스트의 관계&lt;a href=&quot;#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD%EA%B3%BC-%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%EA%B4%80%EA%B3%84&quot; aria-label=&quot;렉시컬 환경과 실행 컨텍스트의 관계 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;실행 컨텍스트와 렉시컬 환경의 구성이 이름만 다를 뿐 동작하는 모양이 비슷하게 보여서 같은 건가 헷갈렸는데 이 둘은 다른 개념이다.&lt;br&gt;
js 파일이 실행될 때 생성되는 렉시컬 환경은 무수히 많지만 (각 함수마다 누가 어떤 외부를 참조하는지 해당 함수의 변수들에는 어떤 정보가 있는지 등) 코드 라인마다 실행되는 함수는 특정되는데 이때 이 특정한 함수의 렉시컬 환경을 실행시키는 것이 실행 컨텍스트이다. (= this 바인딩이 여기서 나온다)&lt;/p&gt;
&lt;h3 id=&quot;참고한-글&quot; style=&quot;position:relative;&quot;&gt;참고한 글&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EA%B8%80&quot; aria-label=&quot;참고한 글 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://forward.nhn.com/2021/sessions/17&quot;&gt;nhn 2021 포럼&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://poiemaweb.com/es6-block-scope&quot;&gt;es6-block-scope&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/31219420/are-variables-declared-with-let-or-const-hoisted&quot;&gt;are-variables-declared-with-let-or-const-hoisted?&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://ko.javascript.info/closure&quot;&gt;변수의 유효범위와 클로저&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NextJS로 마이그레이션하기 - 도커라이징(feat.NGINX)]]></title><description><![CDATA[해당 포스팅은 이 글을 번역해 실습하며 정리한 글이다. 또한 NextJS 사용 방법을 검색해 보면 NGINX가 심심찮게 보이는 걸 확인할 수 있다. 사내 프로젝트에서도 리액트의 정적인 빌드 결과물을 NGINX…]]></description><link>https://ksy8230.github.io/todayILearned/nextjs/02.NextJS-migration-docker/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/nextjs/02.NextJS-migration-docker/</guid><pubDate>Sat, 19 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;해당 포스팅은 &lt;a href=&quot;https://steveholgado.com/nginx-for-nextjs/&quot;&gt;이 글&lt;/a&gt;을 번역해 실습하며 정리한 글이다. 또한 NextJS 사용 방법을 검색해 보면 NGINX가 심심찮게 보이는 걸 확인할 수 있다. 사내 프로젝트에서도 리액트의 정적인 빌드 결과물을 NGINX를 이용해 서버로 올린다는 표현을 했는데 웹 서버에 NGINX를 사용하는 이유가 뭔지 궁금해 NextJS 웹앱을 도커로 배포하는 작업과 함께 NGINX에 대해서도 짤막하게 공부해 봤다.&lt;/p&gt;
&lt;h3 id=&quot;nginx와-웹앱의-연관성&quot; style=&quot;position:relative;&quot;&gt;NGINX와 웹앱의 연관성&lt;a href=&quot;#nginx%EC%99%80-%EC%9B%B9%EC%95%B1%EC%9D%98-%EC%97%B0%EA%B4%80%EC%84%B1&quot; aria-label=&quot;nginx와 웹앱의 연관성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NGINX가 웹에서 하는 역할로는 프록시 서버라는 기능이 있다. 웹을 띄워주는 서버의 실제 포트가 3000이라면 NGINX에서 80으로 맵핑시켜 실제 서버의 주소를 한 겹 숨겨주는 보안적 기능을 가져갈 수 있다. NGINX는 프록시 기능 외에도 고성능 기능들이 많다는데 이 글에서는 프록시와 NextJS 웹앱의 정적 리소스를 캐싱시켜주는 기능에 대해서만 다룰 예정이다.&lt;/p&gt;
&lt;h4 id=&quot;nginx-설정-파일-내부-위치별-역할&quot; style=&quot;position:relative;&quot;&gt;NGINX 설정 파일 내부 위치별 역할&lt;a href=&quot;#nginx-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EB%82%B4%EB%B6%80-%EC%9C%84%EC%B9%98%EB%B3%84-%EC%97%AD%ED%95%A0&quot; aria-label=&quot;nginx 설정 파일 내부 위치별 역할 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# core 모듈 설정&lt;/span&gt;
&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;worker_process&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# events 블록&lt;/span&gt;
&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;events&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;worker_connections&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# http 블록&lt;/span&gt;
&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;http&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ...
  &lt;span class=&quot;token comment&quot;&gt;# server 블록들&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server_name&lt;/span&gt; domain1.com&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;root&lt;/span&gt; /var/www/domain1.com&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# location 블록들&lt;/span&gt;
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; /&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;root&lt;/span&gt; html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;index&lt;/span&gt; index.html index.htm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; /user/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;root&lt;/span&gt; /home/user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server_name&lt;/span&gt; domain2.com&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;root&lt;/span&gt; /var/www/domain2.com&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;** core 모듈 설정 **&lt;br&gt;
NGINX conf 파일의 최상단에는 NGINX의 프로세스를 관리해 주는 프로세스의 수 및 기본적인 동작 방식을 정의한다. NGINX는 하나의 마스터 프로세스와 여러 개의 작업자 프로세스로 구성되어 실행된다. 마스터의 역할은 설정 파일을 읽고 이를 토대로 구성 및 평가하여 여러 작업자 프로세스들이 실제 요청된 일을 처리하도록 관리한다.&lt;/p&gt;
&lt;p&gt;** events 블록 **&lt;br&gt;
이벤트 블록 안에서는 네트워크 동작 방법에 관련된 설정이 가능하다.&lt;br&gt;
예시로 worker_connections의 값이 100이라는 의미는 한 개의 작업자 프로세스가 동시에 처리할 수 있는 커넥션의 수를 의미한다.&lt;/p&gt;
&lt;p&gt;** http 블록 **&lt;br&gt;
http 블록은 server 블록의 루트 역할을 한다. 루트에 기재한 값들은 모든 server 블록들의 기본값이 된다. 테스트해 보니 server가 하나인 경우 생략해도 정상 작동하는 것 같다.&lt;/p&gt;
&lt;p&gt;** server 블록 **&lt;br&gt;
서버의 포트가 어디로 연결될 것인지 해당 서버의 이름은 무엇인지 정의하는 곳이다. 또한, 하나의 서버에서 한 개 이상의 도메인을 서비스할 수 있다.&lt;/p&gt;
&lt;p&gt;** location 블록 **&lt;br&gt;
location 블록은 server 블록 안에 쓰여지며 server와 마찬가지로 여러 개 사용 가능하다. 해당 링크로 접근했을 때 어떤 경로의 파일을 root로 정할 지 결정하는 지시문이다.&lt;/p&gt;
&lt;p&gt;❗ 아래 글부터는 NextJS 프레임워크를 설치했다는 가정하에 진행된다.&lt;/p&gt;
&lt;h3 id=&quot;nextjs-웹앱-컨테이너화&quot; style=&quot;position:relative;&quot;&gt;NextJS 웹앱 컨테이너화&lt;a href=&quot;#nextjs-%EC%9B%B9%EC%95%B1-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%ED%99%94&quot; aria-label=&quot;nextjs 웹앱 컨테이너화 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NextJS를 설치한 프로젝트 폴더를 열어보면 package.json이 있는데 해당 파일과 동일한 위치에 Dockerfile을 생성한다.&lt;br&gt;
./Dockerfile&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-dockerfile line-numbers&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node:16-alpine &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; builder&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json .&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm install --force&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . .&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm run build&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 3000&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# USER node&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [&lt;span class=&quot;token string&quot;&gt;&quot;npm&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;start&quot;&lt;/span&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NextJS는 리액트 기반의 웹 어플리케이션 기능들을 가능하게 하는 NodeJS 위에서 빌드된 웹 개발 프레임워크이기 때문에 NodeJS가 반드시 설치되어야 NextJS 웹앱 서버가 구동된다.&lt;br&gt;
해당 도커파일에 설치된 노드 버전이 16-alpine인데 alpine은 보안 및 작은 파일 크기에 중점을 둔 무척 가벼운 리눅스 배포판이라는 뜻이다.&lt;br&gt;
이후 작업 폴더를 /app 으로 지정하고 package.json 파일을 복사해 NextJS에 종속된 패키지가 설치되도록 설정한다. package.json을 먼저 복사하는 이유는 도커 캐싱 시스템을 활용하기 위함이다. 프로세스의 각 단계마다 레이어가 생성이 되고 도커 캐싱 시스템은 이 레이어들을 기억할 수 있다. 만일 package.json에 변화가 없다면 NextJS에 종속된 패키지 설치를 진행하지 않고 캐싱시켜 건너뛰어준다. (도커 이미지 만드는 속도가 빨라진다 👍)&lt;/p&gt;
&lt;p&gt;❗ 기본적으로 도커는 컨테이너를 루트로 실행한다. 하지만 NodeJS를 루트로 실행하면 보안 문제가 발생할 수 있다. 이를 방지하기 위해 &lt;code class=&quot;language-text&quot;&gt;USER node&lt;/code&gt; 를 통해 루트 권한이 없는 사용자인 노드로 전환해 주는 게 좋다. node라는 사용자는 node:16-alpine에서 제공이 된다. 하지만 나는 테스트용 프로젝트를 작업 중이므로… 권한이 맘껏 뚫린 루트 권한 그대로 가져가려고 한다. 배포 때 추가해 보자.&lt;/p&gt;
&lt;p&gt;종속된 패키지 설치까지 끝낸다면 NextJS 빌드 작업이 진행되고 로컬 포트 3000에서 npm start 스크립트를 통해 NextJS 서버가 배포 모드로 실행이 된다.&lt;/p&gt;
&lt;p&gt;🙄 해당 글에는 pm2를 배포 준비 프로세스에 포함시켰다. pm2는 NodeJS 어플리케이션을 위한 배포용 준비 프로세스로 어떤 이유에서 웹앱 이미지가 깨져 NodeJS 프로세스가 종료되면 웹앱을 더이상 사용할 수 없게 된다. 이를 방지하기 위해 pm2는 충돌 및 에러가 난 경우 앱이 항상 자동으로 다시 시작되도록 되살림 기능을 해 주는 역할을 하는데 내가 진행하고 있는 NextJS 웹앱은 쿠버네티스로 올라갈 것 같아서 pm2 프로세스는 제거한 상태로 진행했다.&lt;/p&gt;
&lt;h3 id=&quot;nginx-설정-파일-생성&quot; style=&quot;position:relative;&quot;&gt;NGINX 설정 파일 생성&lt;a href=&quot;#nginx-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1&quot; aria-label=&quot;nginx 설정 파일 생성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202807237-a3695ff9-0f12-4af4-a0f5-17066b607350.jpg&quot; alt=&quot;Frame 12&quot;&gt;&lt;/p&gt;
&lt;p&gt;위 그림과 같이 NGINX는 NextJS 웹앱으로 들어오는 모든 요청을 다루는 디폴트 서버의 역할을 할 예정이라 default.conf라 이름 지었다. 이름은 뭐라 짓든 관련이 전혀 없으나 &lt;code class=&quot;language-text&quot;&gt;.conf&lt;/code&gt; 확장자는 꼭 잊지 말자.&lt;/p&gt;
&lt;p&gt;nginx 폴더 하위 경로에 default.conf 파일을 생성했다.&lt;br&gt;
/nginx/default.conf&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; nextjs_upstream&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; nextjs:3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt; default_server&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server_name&lt;/span&gt; _&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server_tokens&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;off&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NGINX에 설정한 디폴트 서버는 단 하나이기 때문에 다른 여러 server 블록이 필요 없어서 http 블록을 생략하고 바로 server 블록부터 지시했다. 또한 디폴트 하나라서 이름도 필요가 없기에 _; 으로 지정했다. server_tokens off; 는 NGINX 버전이 응답의 헤더에 나타나지 않도록 하는 기능이다. 마찬가지로 보안 이슈와 관련이 있는 것 같다.&lt;br&gt;
위 그림과 같이 도커 컨테이너는 NGINX, NextJS 두 개가 뜰 예정이다. NextJS 웹앱이 어떤 이유로 두 개 이상 띄워야한다면 서로 다른 포트를 가진 여러 개의 NextJS 컨테이너들을 NGINX 상단에 업스트림 형태로 추가할 수 있다. 그리고 NGINX는 이들 간의 요청을 로드 밸런싱하는 역할을 해 준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; nextjs_upstream&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; nextjs:3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 nextjs:3000 은 어디서 읽어들이고 있는 걸까?&lt;br&gt;
위 conf 파일은 NGINX 컨테이너고 해당 컨테이너의 localhost는 NGINX 자체를 참조한다. NGINX 컨테이너에서 NextJS 웹앱을 띄우고 있는 다른 컨테이너를 참조할 수 있는 방법은 IP 주소를 통해 가능하다. 또한 도커를 실행시킬 때 링크 옵션 기능을 이용해 참조할 수 있는 이름을 nextjs로 할당시켜주면 해당 IP 주소를 이름을 이용해서도 매핑할 수 있다.&lt;/p&gt;
&lt;p&gt;🙄 나중에 Docker Compose를 설정해서 컨테이너를 실행하면 서로 다른 컨테이너끼리의 링크가 자동으로 설정된다고 한다. 하지만 마이그레이션 대상인 현재 웹앱은 Docker Compose를 사용하고 있지 않다. 쿠버네티스에 올라가 있는 앱들의 폴더 내부에 Docker Compose 파일이 없고 도커 파일만 존재하기에… 일단 Docker Compose 설정 없이 진행해 보았다. 어떤 경우에서 Docker Compose를 사용할 수 없는지도 나중에 꼭 알아보자.&lt;/p&gt;
&lt;p&gt;어쨌든 링크 옵션 기능을 사용하든 Docker Composer 설정으로 컨테이너를 실행하든 nextjs:3000을 참조할 때 실제로는 NextJS 컨테이너의 localhost:3000을 참조하게 된다.&lt;/p&gt;
&lt;h3 id=&quot;nextjs-웹앱으로-요청-보내기&quot; style=&quot;position:relative;&quot;&gt;NextJS 웹앱으로 요청 보내기&lt;a href=&quot;#nextjs-%EC%9B%B9%EC%95%B1%EC%9C%BC%EB%A1%9C-%EC%9A%94%EC%B2%AD-%EB%B3%B4%EB%82%B4%EA%B8%B0&quot; aria-label=&quot;nextjs 웹앱으로 요청 보내기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NextJS 웹앱 앞단에 NGINX를 리버스 프록시로 사용하고 있기 때문에 모든 요청들이 NGINX에 들어온다. 그리고 이 NGINX가 올바른 응답을 NextJS 웹앱으로 넘겨주기 위해선 프록시 헤더와 관련된 추가 설정이 필요하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; nextjs_upstream&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; nextjs:3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt; default_server&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server_name&lt;/span&gt; _&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server_tokens&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;off&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_http_version&lt;/span&gt; 1.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_set_header&lt;/span&gt; Upgrade &lt;span class=&quot;token variable&quot;&gt;$http_upgrade&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_set_header&lt;/span&gt; Connection &lt;span class=&quot;token string&quot;&gt;&apos;upgrade&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_set_header&lt;/span&gt; Host &lt;span class=&quot;token variable&quot;&gt;$host&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache_bypass&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$http_upgrade&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; /&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_pass&lt;/span&gt; http://nextjs_upstream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;모든 요청은 NextJS 웹앱 서버 구성에 지정된 &lt;a href=&quot;http://localhost:3000&quot;&gt;http://localhost:3000&lt;/a&gt; 으로 들어가는 게 아니라 NGINX 설정과 같이 업스트림으로 지정된 http://nextjs_upstream 에 요청을 전달하고 있다.&lt;/p&gt;
&lt;p&gt;❓ NGINX 에서 upstream 이란?&lt;br&gt;
proxy_pass 지시자를 통해 NGINX가 받은 요청을 넘겨줄 서버들을 정의하는 지시자를 의미한다.&lt;br&gt;
&lt;a href=&quot;https://brunch.co.kr/@alden/11&quot;&gt;nginx stream 성능 최적화에 관련된 글&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;🙄 잘 쫓아가다 갑자기 헤더 설정이 나오니 어려워지기 시작해 서브 공부한 내용을 간략하게 적어보았다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP 헤더의 역할&lt;/strong&gt;&lt;br&gt;
클라이언트와 서버가 요청 또는 응답으로 부가적인 정보를 전송하도록 도와주는 역할을 한다.&lt;br&gt;
헤더라는 이름에서 알 수 있듯 저장되거나 전송되는 데이터 블록의 맨 앞에 위치한 데이터를 HTTP 헤더라고도 한다. 특정 프로토콜로 통신해야하는 경우엔 특정 프로토콜의 기능을 제공하는 헤더 정보로 담아줘야 한다. 헤더의 뒤에 이어지는 데이터가 바로 프론트에서 주로 전달 받는 페이로드, 혹은 바디라 불리는 본문 데이터다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP 헤더의 종류&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;end-to-end&lt;/li&gt;
&lt;li&gt;** hop-by-hop ** : Connection, Keep-Alive, Proxy-Authenticate, Proxy-Authorization, TE, Trailer, Transfer-Encoding, Upgrade&lt;/li&gt;
&lt;li&gt;general header&lt;/li&gt;
&lt;li&gt;request header&lt;/li&gt;
&lt;li&gt;response header&lt;/li&gt;
&lt;li&gt;entity header&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 많은 헤더 중 프록시 설정에 Upgrade와 Connection이라는 hop-by-hop 헤더를 사용했다. NGINX.conf 파일에서 프록시 서버의 헤더를 설정할 때 hop-by-hop을 사용하는 이유가 뭘까?&lt;br&gt;
여기서 나오는 홉이란 쉽게 말해 네크워크에서 출발지와 목적지 사이의 경로를 의미한다. 홉 바이 홉 = 네트워크 경로 간의 경로를 의미하는데 프록시 특성상 버스 환승점처럼 원래의 목적지로 가기 위해 한 점을 찍고 넘어간다는 의미에서 hop-by-hop 헤더를 사용한 것이다. 그런데 이런 헤더의 특징으로는 요청의 헤더들이 다음 연결점에 영향을 끼쳐선 안 되기 때문에 현재 요청의 헤더 정보들을 모두 삭제하고 다음 연결점으로 넘어간다. 하지만 여기서 쓰고 있는 프록시 헤더들의 정보를 NextJS 웹앱 목적지로 모두 넘어가야하기 때문에 &lt;code class=&quot;language-text&quot;&gt;Upgrade&lt;/code&gt; 값을 사용해 클라이언트의 헤더 값들을 NextJS 헤더로 넘겨주고 있는 것이다.&lt;br&gt;
다양한 &lt;a href=&quot;http://nginx.org/en/docs/varindex.html&quot;&gt;NGINX 변수들&lt;/a&gt;이 있는데 나중에 꼭 참고하자.&lt;/p&gt;
&lt;h3 id=&quot;nginx를-이용한-정적-리소스-캐시&quot; style=&quot;position:relative;&quot;&gt;NGINX를 이용한 정적 리소스 캐시&lt;a href=&quot;#nginx%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%A0%95%EC%A0%81-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%BA%90%EC%8B%9C&quot; aria-label=&quot;nginx를 이용한 정적 리소스 캐시 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NGINX를 사용했을 때 가져갈 수 있는 주요 이점 중 하나는 NodeJS보다 정적 리소스를 효율적으로 관리할 수 있다는 점이다.&lt;br&gt;
NGINX는 설정한 디렉터리에 한해서 효율적인 캐싱 기능을 제공한다. 사용자가 최초에 웹앱에서 정적 리소스를 요청하면 (ex. 첫 화면에서 이미지 로드) NGINX가 해당 파일이 캐싱으로 설정한 디렉터리에 있는 경우, 요청 정보를 저장해 둔다. 이렇게 하면 사용자는 매 요청마다 같은 리소스를 반복해서 NodeJS 서버에 요청하지 않아도 된다.&lt;/p&gt;
&lt;p&gt;** 캐싱 영역 만들기 **&lt;/p&gt;
&lt;p&gt;NGINX는 어떤 방식으로 캐싱시키는 걸까?&lt;br&gt;
NGINX는 우선 캐싱 영역이라는 메모리 영역을 생성한다. 그리고 그 캐싱 영역에 특정 파일에 대한 캐시 키를 저장해 놓는데, 이 키는 해당 파일이 캐싱 영역에 저장되어있는지 아닌지 판별하기 위해 사용된다.&lt;br&gt;
캐싱 설정은 NGINX 설정 파일 최상단에 아래와 같이 기재해 준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache_path&lt;/span&gt; /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; nextjs_upstream&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; nextjs:3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NGINX에서 캐싱 영역에 대한 세부 설정은 아래와 같이 설명된다&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/var/cache/nginx&lt;/code&gt; 캐싱된 리소스를 저장할 디렉터리&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;levels=1:2&lt;/code&gt; 너무 많은 파일이 하나의 디렉터리에 있는 경우 파일 접근 속도가 감소될 수 있으니 2단계 디렉터리의 계층 구조로 만들겠다는 의미&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;keys_zone=STATIC:10m&lt;/code&gt; STATIC이라는 이름을 가진 캐시용 메모리 영역을 명명하고 크기 제한은 10MB로 설정한다 (파일이 수천 개가 아닌 이상 충분)&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;inactive=7d&lt;/code&gt; 캐싱된 리소스가 유지되는 기간이고 이후에 접근되지 않은 리소스는 캐싱 영역에서 삭제한다&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;use_temp_path=off&lt;/code&gt; 리소스를 캐싱 디렉터리에 직접 사용하고 임시 저장될 영역을 자동으로 생성하지 않도록 설정한다&lt;/p&gt;
&lt;p&gt;** NextJS에서 빌드된 정적 리소스 캐싱 설정 **&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache_path&lt;/span&gt; /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; nextjs_upstream&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; nextjs:3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ...
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; /_next/static&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache&lt;/span&gt; STATIC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_pass&lt;/span&gt; http://nextjs_upstream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;# For testing cache - remove before deploying to production&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;add_header&lt;/span&gt; X-Cache-Status &lt;span class=&quot;token variable&quot;&gt;$upstream_cache_status&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  ...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NextJS는 빌드할 때 웹앱에서 구동할 각 페이지들을 만들어주기 위해 자바스크립트 번들러를 생성한다. 그리고 이 자바스크립트 번들러들은 /_next/static/* 경로에서 생성되어 NextJS가 페이지를 렌더링하게끔 만들어준다.&lt;br&gt;
이 정적인 번들러 파일들을 캐싱하기 위해 /_next/static 경로로 설정된 location 블럭 내부에 STATIC이라는 이름을 가진 프록시 캐시를 지정해주었다. 이렇게 지정해 두면 /_next/static 디렉터리 하위에 포함하고 있는 리소스들이 캐싱된다. 이렇게 해당 경로의 리소스들이 캐싱된 이후 모든 요청들은 NextJS 웹앱으로 전달된다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202636898-b00441bd-f54e-47ae-8305-0d5b67ecbe99.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;NextJS는 웹에서 브라우저 캐싱 작업을 처리하기 위해 응답의 헤더를 설정하는데 /_next/static/* 에 있는 빌드된 정적인 리소스의 경우 각 URL에 고유한 빌드 ID가 존재해 브라우저 캐시 헤더가 동작하도록 설정한다. (NextJS를 다시 빌드해 보면 이 ID 값들이 달라져있는 걸 확인할 수 있다.)&lt;br&gt;
문제는 static/ 디렉터리(사용자가 생성한)의 동적 리소스에는 고유한 빌드 ID가 생성되지 않는다는 점이다. NextJS는 이런 리소스들에 대해서는 캐시가 없는 헤더를 설정하기 때문에 브라우저가 해당 리소스들은 캐시하지 않게 된다. 이 경우 NGINX에 해당 디렉터리에 대한 추가 설정이 필요하다.&lt;/p&gt;
&lt;p&gt;** NextJS에서 빌드된 동적 리소스 캐싱 설정 **&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache_path&lt;/span&gt; /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; nextjs_upstream&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; nextjs:3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ...
    &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; /static&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache&lt;/span&gt; STATIC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_ignore_headers&lt;/span&gt; Cache-Control&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache_valid&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60m&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_pass&lt;/span&gt; http://nextjs_upstream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;# For testing cache - remove before deploying to production&lt;/span&gt;
      &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;add_header&lt;/span&gt; X-Cache-Status &lt;span class=&quot;token variable&quot;&gt;$upstream_cache_status&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  ...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 NGINX에 들어오는 요청들 /static 하위 경로에 한해서, 캐시가 없는 헤더를 무시하는 작업이 필요하다. /static 경로로 설정된 location 블럭 내부에 마찬가지로 아까 이름 지어둔 STATIC 캐시를 연결해 주고 캐시된 파일의 유효 기간을 60분으로 설정했다. 이렇게 설정해 두면 /static/* 리소스에 한해서 최대 60분에 한 번만 캐시 메모리를 새로고침해 준다. 만약에 유효 기간을 설정하지 않으면 리소스들이 캐시 영역에 무기한으로 남지만 캐싱된 리소스는 기본적으로 비활성 기간이 7일이기 때문에 7일이 지나면 캐싱 영역에서 제거된다.&lt;/p&gt;
&lt;h3 id=&quot;nginx에서-gzip-설정&quot; style=&quot;position:relative;&quot;&gt;NGINX에서 gzip 설정&lt;a href=&quot;#nginx%EC%97%90%EC%84%9C-gzip-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;nginx에서 gzip 설정 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NGINX 서버에서 gzip을 활성화해 사용자에게 리소스들이 압축된 상태로 로드되도록 설정하자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-nginx line-numbers&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_cache_path&lt;/span&gt; /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; nextjs_upstream&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; nextjs:3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ...
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;gzip&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;on&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;gzip_proxied&lt;/span&gt; any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;gzip_comp_level&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;gzip_types&lt;/span&gt; text/css application/javascript image/svg+xml&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  ...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;gzip on&lt;/code&gt; gzip 활성&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;gzip_proxied any&lt;/code&gt; NGINX에게 어떤 파일이든 gzip되도록 지정&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;gzip_comp_level 4&lt;/code&gt; gzip 압축 레벨 설정 (4 정도가 평균)&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;gzip_types text/css application/javascript image/svg+xml&lt;/code&gt; 압축할 파일 타입 지정&lt;/p&gt;
&lt;p&gt;파일의 크기가 작을수록 압축 수준을 높게 설정할 수 있지만 압축 수준이 높을수록 압축 및 압축 해제에 시간이 더 오래 걸린다. 그리고 본문 글에 따르면 파일 크기가 절약되는 구간이 4 이후부터 감소된다고 하니 평균 4 정도가 적당하다고 본다. gzip 압축 형식은 텍스트가 많은 파일에서 가장 잘 작동하고 일반적으로 이미지 파일을 압축하는 건 권장하지 않는다. 이미지 파일의 경우 고도로 압축되는 경향이 있어 gzip에 실행되는 시간이 예상보다 더 많이 걸릴 수 있다. 하지만 svg 는 텍스트 기반이라 gzip 압축의 장점을 고스란히 가져갈 수 있다고 한다. 이미지들을 웬만하면 svg 형태로 표현해주는 게 최적화에 도움이 되겠다.&lt;/p&gt;
&lt;h3 id=&quot;nginx-도커라이징&quot; style=&quot;position:relative;&quot;&gt;NGINX 도커라이징&lt;a href=&quot;#nginx-%EB%8F%84%EC%BB%A4%EB%9D%BC%EC%9D%B4%EC%A7%95&quot; aria-label=&quot;nginx 도커라이징 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;nginx 폴더 하위 경로에 Dockerfile 파일을 생성했다.&lt;br&gt;
/nginx/Dockerfile&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-dockerfile line-numbers&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; nginx:alpine&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; rm /etc/nginx/conf.d/*&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; ./default.conf /etc/nginx/conf.d/&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 80&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [ &lt;span class=&quot;token string&quot;&gt;&quot;nginx&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;-g&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;daemon off;&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;리눅스의 alpine 배포판을 사용해 NGINX 도커 이미지를 기반으로 컨테이너를 생성한다. 그런 다음 NGINX 에 기본적으로 제공되는 구성 파일을 삭제하고 위에서 작업한 설정 파일로 교체하고 컨테이너 80 포트를 열어 실행해주면 해당 이미지를 실행 시 우리가 설정한 NGINX.conf 파일에 따라 NGINX가 실행된다.&lt;/p&gt;
&lt;h3 id=&quot;도커에서-생성된-컨테이너들-실행하기&quot; style=&quot;position:relative;&quot;&gt;도커에서 생성된 컨테이너들 실행하기&lt;a href=&quot;#%EB%8F%84%EC%BB%A4%EC%97%90%EC%84%9C-%EC%83%9D%EC%84%B1%EB%90%9C-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%93%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0&quot; aria-label=&quot;도커에서 생성된 컨테이너들 실행하기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;도커 파일이 있는 곳에서 각각 NextJS 이미지, NGNX 이미지를 생성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; build &lt;span class=&quot;token parameter variable&quot;&gt;--t&lt;/span&gt; nextjs-image &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; build &lt;span class=&quot;token parameter variable&quot;&gt;--t&lt;/span&gt; nextjs-image ./nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;두 컨테이너가 공유할 네트워크를 생성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; network create my-network&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;두 컨테이너를 링크시켜 실행한다.&lt;br&gt;
NextJS 도커 컨테이너의 네트워크는 앞서 생성한 my-network에 연결해 주고 컨테이너 이름을 nextjs-container라 명명한 뒤 nextjs-image 이미지를 이용해 도커 실행&lt;br&gt;
NGINX 도커 컨테이너의 네트워크도 앞서 생성한 my-network에 연결해 주고 nextjs-container 컨테이너를 nextjs로 link 옵션을 이용해 맵핑시킨 뒤 nginx-image 이미지를 이용해 localhost:80 포트로 도커를 실행&lt;/p&gt;
&lt;p&gt;반드시 —link 옵션을사용해 default.conf에서 nextjs로 참조되는 Next.js 컨테이너를 NGINX 컨테이너에 매핑해야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;--network&lt;/span&gt; my-network &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; nextjs-container nextjs-image
&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;--network&lt;/span&gt; my-network &lt;span class=&quot;token parameter variable&quot;&gt;--link&lt;/span&gt; nextjs-container:nextjs &lt;span class=&quot;token parameter variable&quot;&gt;--publish&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;:80 nginx-image&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;캐싱-결과&quot; style=&quot;position:relative;&quot;&gt;캐싱 결과&lt;a href=&quot;#%EC%BA%90%EC%8B%B1-%EA%B2%B0%EA%B3%BC&quot; aria-label=&quot;캐싱 결과 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202617408-9221d78c-49d3-4f62-884a-e18b3a2c29a3.jpg&quot; alt=&quot;nginx_설정전_nextjs화면&quot;&gt;&lt;/p&gt;
&lt;p&gt;NGINX를 적용하기 전 그냥 도커로 NextJS를 띄운 웹앱 화면을 보면 /static 경로에 들어있는 이미지의 네트워크 탭에서 해당 이미지를 로딩하는데 70 밀리초정도 걸린다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202617872-dbe14d20-f775-44fa-9d86-d14c94d676e4.jpg&quot; alt=&quot;nginx_설정후_nextjs_정적리소스_캐시화면_miss&quot;&gt;&lt;/p&gt;
&lt;p&gt;NextJS 웹앱 앞단에 NGINX를 적용해 프록시 리소스 캐싱을 적용한 웹앱 화면을 보면 NGINX 적용 전과 달리 30 밀리초보다 조금 덜 미치는 걸 확인할 수 있다. 그리고 NextJS 웹앱의 응답 헤더에 X-Cache-Status: MISS 값이 보이는데 이 의미는 해당 리소스가 첫 로딩이라 NGINX 캐싱 영역에 해당 리소스가 없어서 나오는 결과다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202618212-74d00b8a-ae9f-4c93-8cd6-e76c54d8e021.jpg&quot; alt=&quot;nginx_설정후_nextjs_정적리소스_캐시화면_hit&quot;&gt;&lt;/p&gt;
&lt;p&gt;다시 새로고침을 해서 결과를 보면 X-Cache-Status 값이 HIT 로 바뀌면서 NGINX 캐싱 영역에서 해당 리소스를 찾아 캐싱된 결과를 볼 수 있다.&lt;/p&gt;
&lt;h3 id=&quot;마치며&quot; style=&quot;position:relative;&quot;&gt;마치며&lt;a href=&quot;#%EB%A7%88%EC%B9%98%EB%A9%B0&quot; aria-label=&quot;마치며 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://steveholgado.com/nginx-for-nextjs/&quot;&gt;본문&lt;/a&gt;글을 한 줄 한 줄 번역하며 실습하는 과정이 생각보다 꽤 재밌었다. 모르는 개념에 대해서 조금 더 찾아내 살을 붙이고 공부를 해본 경험이 된 것 같고 무엇보다 NGINX와 친해질 마음이 생긴(?) 계기도 된 것 같아 기쁘다. 조금 더 잘 다루게 되면 내가 띄운 웹에서 어떤 부분을 어떻게 캐싱 정책으로 가져갈지도 고민해 봐야겠다. 그리고 NextJS와 NGINX 두 개의 컨테이너를 띄우는 게 아니라 하나의 컨테이너에 같이 띄우는 것도 시도해 보자. (마이그레이션할 현재 프로젝트가 이렇게 되어있으니까)&lt;/p&gt;
&lt;h3 id=&quot;참고-자료&quot; style=&quot;position:relative;&quot;&gt;참고 자료&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;참고 자료 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://steveholgado.com/nginx-for-nextjs/&quot;&gt;https://steveholgado.com/nginx-for-nextjs/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NextJS로 마이그레이션하기 - 도커라이징(feat.NGINX)]]></title><description><![CDATA[해당 포스팅은 이 글을 번역해 실습하며 정리한 글이다. 또한 NextJS 사용 방법을 검색해 보면 NGINX가 심심찮게 보이는 걸 확인할 수 있다. 사내 프로젝트에서도 리액트의 정적인 빌드 결과물을 NGINX…]]></description><link>https://ksy8230.github.io/todayILearned/nextjs/nextjs로 마이그레이션하기 - 도커라이징(feat.nginx)/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/nextjs/nextjs로 마이그레이션하기 - 도커라이징(feat.nginx)/</guid><pubDate>Fri, 18 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;해당 포스팅은 &lt;a href=&quot;https://steveholgado.com/nginx-for-nextjs/&quot;&gt;이 글&lt;/a&gt;을 번역해 실습하며 정리한 글이다. 또한 NextJS 사용 방법을 검색해 보면 NGINX가 심심찮게 보이는 걸 확인할 수 있다. 사내 프로젝트에서도 리액트의 정적인 빌드 결과물을 NGINX를 이용해 서버로 올린다는 표현을 했는데 웹 서버에 NGINX를 사용하는 이유가 뭔지 궁금해 NextJS 웹앱을 도커로 배포하는 작업과 함께 NGINX에 대해서도 짤막하게 공부해 봤다.&lt;/p&gt;
&lt;h3 id=&quot;nginx와-웹앱의-연관성&quot; style=&quot;position:relative;&quot;&gt;NGINX와 웹앱의 연관성&lt;a href=&quot;#nginx%EC%99%80-%EC%9B%B9%EC%95%B1%EC%9D%98-%EC%97%B0%EA%B4%80%EC%84%B1&quot; aria-label=&quot;nginx와 웹앱의 연관성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NGINX가 웹에서 하는 역할로는 프록시 서버라는 기능이 있다. 웹을 띄워주는 서버의 실제 포트가 3000이라면 NGINX에서 80으로 맵핑시켜 실제 서버의 주소를 한 겹 숨겨주는 보안적 기능을 가져갈 수 있다. NGINX는 프록시 기능 외에도 고성능 기능들이 많다는데 이 글에서는 프록시와 NextJS 웹앱의 정적 리소스를 캐싱시켜주는 기능에 대해서만 다룰 예정이다.&lt;/p&gt;
&lt;h4 id=&quot;nginx-설정-파일-내부-위치별-역할&quot; style=&quot;position:relative;&quot;&gt;NGINX 설정 파일 내부 위치별 역할&lt;a href=&quot;#nginx-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EB%82%B4%EB%B6%80-%EC%9C%84%EC%B9%98%EB%B3%84-%EC%97%AD%ED%95%A0&quot; aria-label=&quot;nginx 설정 파일 내부 위치별 역할 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;# core 모듈 설정
worker_process 1;

# events 블록
events {
  worker_connections 100;
}

# http 블록
http {
  ...
  # server 블록들
  server {
    server_name domain1.com;
    root /var/www/domain1.com;
    # location 블록들
    location / {
      root html;
      index index.html index.htm;
    }
    location /user/ {
      root /home/user;
    }
  }
  server {
    server_name domain2.com;
    root /var/www/domain2.com;
  }
}
&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;** core 모듈 설정 **&lt;br&gt;
NGINX conf 파일의 최상단에는 NGINX의 프로세스를 관리해 주는 프로세스의 수 및 기본적인 동작 방식을 정의한다. NGINX는 하나의 마스터 프로세스와 여러 개의 작업자 프로세스로 구성되어 실행된다. 마스터의 역할은 설정 파일을 읽고 이를 토대로 구성 및 평가하여 여러 작업자 프로세스들이 실제 요청된 일을 처리하도록 관리한다.&lt;/p&gt;
&lt;p&gt;** events 블록 **&lt;br&gt;
이벤트 블록 안에서는 네트워크 동작 방법에 관련된 설정이 가능하다.&lt;br&gt;
예시로 worker_connections의 값이 100이라는 의미는 한 개의 작업자 프로세스가 동시에 처리할 수 있는 커넥션의 수를 의미한다.&lt;/p&gt;
&lt;p&gt;** http 블록 **&lt;br&gt;
http 블록은 server 블록의 루트 역할을 한다. 루트에 기재한 값들은 모든 server 블록들의 기본값이 된다. 테스트해 보니 server가 하나인 경우 생략해도 정상 작동하는 것 같다.&lt;/p&gt;
&lt;p&gt;** server 블록 **&lt;br&gt;
서버의 포트가 어디로 연결될 것인지 해당 서버의 이름은 무엇인지 정의하는 곳이다. 또한, 하나의 서버에서 한 개 이상의 도메인을 서비스할 수 있다.&lt;/p&gt;
&lt;p&gt;** location 블록 **&lt;br&gt;
location 블록은 server 블록 안에 쓰여지며 server와 마찬가지로 여러 개 사용 가능하다. 해당 링크로 접근했을 때 어떤 경로의 파일을 root로 정할 지 결정하는 지시문이다.&lt;/p&gt;
&lt;p&gt;❗ 아래 글부터는 NextJS 프레임워크를 설치했다는 가정하에 진행된다.&lt;/p&gt;
&lt;h3 id=&quot;nextjs-웹앱-컨테이너화&quot; style=&quot;position:relative;&quot;&gt;NextJS 웹앱 컨테이너화&lt;a href=&quot;#nextjs-%EC%9B%B9%EC%95%B1-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%ED%99%94&quot; aria-label=&quot;nextjs 웹앱 컨테이너화 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NextJS를 설치한 프로젝트 폴더를 열어보면 package.json이 있는데 해당 파일과 동일한 위치에 Dockerfile을 생성한다.&lt;br&gt;
./Dockerfile&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-dockerfile line-numbers&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node:16-alpine &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; builder&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json .&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm install --force&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . .&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm run build&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 3000&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# USER node&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [&lt;span class=&quot;token string&quot;&gt;&quot;npm&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;start&quot;&lt;/span&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NextJS는 리액트 기반의 웹 어플리케이션 기능들을 가능하게 하는 NodeJS 위에서 빌드된 웹 개발 프레임워크이기 때문에 NodeJS가 반드시 설치되어야 NextJS 웹앱 서버가 구동된다.&lt;br&gt;
해당 도커파일에 설치된 노드 버전이 16-alpine인데 alpine은 보안 및 작은 파일 크기에 중점을 둔 무척 가벼운 리눅스 배포판이라는 뜻이다.&lt;br&gt;
이후 작업 폴더를 /app 으로 지정하고 package.json 파일을 복사해 NextJS에 종속된 패키지가 설치되도록 설정한다. package.json을 먼저 복사하는 이유는 도커 캐싱 시스템을 활용하기 위함이다. 프로세스의 각 단계마다 레이어가 생성이 되고 도커 캐싱 시스템은 이 레이어들을 기억할 수 있다. 만일 package.json에 변화가 없다면 NextJS에 종속된 패키지 설치를 진행하지 않고 캐싱시켜 건너뛰어준다. (도커 이미지 만드는 속도가 빨라진다 👍)&lt;/p&gt;
&lt;p&gt;❗ 기본적으로 도커는 컨테이너를 루트로 실행한다. 하지만 NodeJS를 루트로 실행하면 보안 문제가 발생할 수 있다. 이를 방지하기 위해 &lt;code class=&quot;language-text&quot;&gt;USER node&lt;/code&gt; 를 통해 루트 권한이 없는 사용자인 노드로 전환해 주는 게 좋다. node라는 사용자는 node:16-alpine에서 제공이 된다. 하지만 나는 테스트용 프로젝트를 작업 중이므로… 권한이 맘껏 뚫린 루트 권한 그대로 가져가려고 한다. 배포 때 추가해 보자.&lt;/p&gt;
&lt;p&gt;종속된 패키지 설치까지 끝낸다면 NextJS 빌드 작업이 진행되고 로컬 포트 3000에서 npm start 스크립트를 통해 NextJS 서버가 배포 모드로 실행이 된다.&lt;/p&gt;
&lt;p&gt;🙄 해당 글에는 pm2를 배포 준비 프로세스에 포함시켰다. pm2는 NodeJS 어플리케이션을 위한 배포용 준비 프로세스로 어떤 이유에서 웹앱 이미지가 깨져 NodeJS 프로세스가 종료되면 웹앱을 더이상 사용할 수 없게 된다. 이를 방지하기 위해 pm2는 충돌 및 에러가 난 경우 앱이 항상 자동으로 다시 시작되도록 되살림 기능을 해 주는 역할을 하는데 내가 진행하고 있는 NextJS 웹앱은 쿠버네티스로 올라갈 것 같아서 pm2 프로세스는 제거한 상태로 진행했다.&lt;/p&gt;
&lt;h3 id=&quot;nginx-설정-파일-생성&quot; style=&quot;position:relative;&quot;&gt;NGINX 설정 파일 생성&lt;a href=&quot;#nginx-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1&quot; aria-label=&quot;nginx 설정 파일 생성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;(nginx, nextjs 도커라이진된 컨테이너 도식화 그림 추가)
위 그림과 같이 NGINX는 NextJS 웹앱으로 들어오는 모든 요청을 다루는 디폴트 서버의 역할을 할 예정이라 default.conf라 이름 지었다. 이름은 뭐라 짓든 관련이 전혀 없으나 &lt;code class=&quot;language-text&quot;&gt;.conf&lt;/code&gt; 확장자는 꼭 잊지 말자.&lt;/p&gt;
&lt;p&gt;nginx 폴더 하위 경로에 default.conf 파일을 생성했다.&lt;br&gt;
/nginx/default.conf&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;upstream nextjs_upstream {
  server nextjs:3000;
}

server {
  listen 80 default_server;

  server_name _;

  server_tokens off;
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NGINX에 설정한 디폴트 서버는 단 하나이기 때문에 다른 여러 server 블록이 필요 없어서 http 블록을 생략하고 바로 server 블록부터 지시했다. 또한 디폴트 하나라서 이름도 필요가 없기에 _; 으로 지정했다. server_tokens off; 는 NGINX 버전이 응답의 헤더에 나타나지 않도록 하는 기능이다. 마찬가지로 보안 이슈와 관련이 있는 것 같다.&lt;br&gt;
위 그림과 같이 도커 컨테이너는 NGINX, NextJS 두 개가 뜰 예정이다. NextJS 웹앱이 어떤 이유로 두 개 이상 띄워야한다면 서로 다른 포트를 가진 여러 개의 NextJS 컨테이너들을 NGINX 상단에 업스트림 형태로 추가할 수 있다. 그리고 NGINX는 이들 간의 요청을 로드 밸런싱하는 역할을 해 준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;upstream nextjs_upstream {
  server nextjs:3000;
}
...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 nextjs:3000 은 어디서 읽어들이고 있는 걸까?&lt;br&gt;
위 conf 파일은 NGINX 컨테이너고 해당 컨테이너의 localhost는 NGINX 자체를 참조한다. NGINX 컨테이너에서 NextJS 웹앱을 띄우고 있는 다른 컨테이너를 참조할 수 있는 방법은 IP 주소를 통해 가능하다. 또한 도커를 실행시킬 때 링크 옵션 기능을 이용해 참조할 수 있는 이름을 nextjs로 할당시켜주면 해당 IP 주소를 이름을 이용해서도 매핑할 수 있다.&lt;/p&gt;
&lt;p&gt;🙄 나중에 Docker Compose를 설정해서 컨테이너를 실행하면 서로 다른 컨테이너끼리의 링크가 자동으로 설정된다고 한다. 하지만 마이그레이션 대상인 현재 웹앱은 Docker Compose를 사용하고 있지 않다. 쿠버네티스에 올라가 있는 앱들의 폴더 내부에 Docker Compose 파일이 없고 도커 파일만 존재하기에… 일단 Docker Compose 설정 없이 진행해 보았다. 어떤 경우에서 Docker Compose를 사용할 수 없는지도 나중에 꼭 알아보자.&lt;/p&gt;
&lt;p&gt;어쨌든 링크 옵션 기능을 사용하든 Docker Composer 설정으로 컨테이너를 실행하든 nextjs:3000을 참조할 때 실제로는 NextJS 컨테이너의 localhost:3000을 참조하게 된다.&lt;/p&gt;
&lt;h3 id=&quot;nextjs-웹앱으로-요청-보내기&quot; style=&quot;position:relative;&quot;&gt;NextJS 웹앱으로 요청 보내기&lt;a href=&quot;#nextjs-%EC%9B%B9%EC%95%B1%EC%9C%BC%EB%A1%9C-%EC%9A%94%EC%B2%AD-%EB%B3%B4%EB%82%B4%EA%B8%B0&quot; aria-label=&quot;nextjs 웹앱으로 요청 보내기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NextJS 웹앱 앞단에 NGINX를 리버스 프록시로 사용하고 있기 때문에 모든 요청들이 NGINX에 들어온다. 그리고 이 NGINX가 올바른 응답을 NextJS 웹앱으로 넘겨주기 위해선 프록시 헤더와 관련된 추가 설정이 필요하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;upstream nextjs_upstream {
  server nextjs:3000;
}

server {
  listen 80 default_server;

  server_name _;

  server_tokens off;

  proxy_http_version 1.1;
  proxy_set_header Upgrade $http_upgrade;
  proxy_set_header Connection &amp;#39;upgrade&amp;#39;;
  proxy_set_header Host $host;
  proxy_cache_bypass $http_upgrade;

  location / {
    proxy_pass http://nextjs_upstream;
  }
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;모든 요청은 NextJS 웹앱 서버 구성에 지정된 &lt;a href=&quot;http://localhost:3000&quot;&gt;http://localhost:3000&lt;/a&gt; 으로 들어가는 게 아니라 NGINX 설정과 같이 업스트림으로 지정된 http://nextjs_upstream 에 요청을 전달하고 있다.&lt;/p&gt;
&lt;p&gt;❓ NGINX 에서 upstream 이란?&lt;br&gt;
proxy_pass 지시자를 통해 NGINX가 받은 요청을 넘겨줄 서버들을 정의하는 지시자를 의미한다.&lt;br&gt;
&lt;a href=&quot;https://brunch.co.kr/@alden/11&quot;&gt;nginx stream 성능 최적화에 관련된 글&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;🙄 잘 쫓아가다 갑자기 헤더 설정이 나오니 어려워지기 시작해 서브 공부한 내용을 간략하게 적어보았다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP 헤더의 역할&lt;/strong&gt;&lt;br&gt;
클라이언트와 서버가 요청 또는 응답으로 부가적인 정보를 전송하도록 도와주는 역할을 한다.&lt;br&gt;
헤더라는 이름에서 알 수 있듯 저장되거나 전송되는 데이터 블록의 맨 앞에 위치한 데이터를 HTTP 헤더라고도 한다. 특정 프로토콜로 통신해야하는 경우엔 특정 프로토콜의 기능을 제공하는 헤더 정보로 담아줘야 한다. 헤더의 뒤에 이어지는 데이터가 바로 프론트에서 주로 전달 받는 페이로드, 혹은 바디라 불리는 본문 데이터다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP 헤더의 종류&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;end-to-end&lt;/li&gt;
&lt;li&gt;** hop-by-hop ** : Connection, Keep-Alive, Proxy-Authenticate, Proxy-Authorization, TE, Trailer, Transfer-Encoding, Upgrade&lt;/li&gt;
&lt;li&gt;general header&lt;/li&gt;
&lt;li&gt;request header&lt;/li&gt;
&lt;li&gt;response header&lt;/li&gt;
&lt;li&gt;entity header&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 많은 헤더 중 프록시 설정에 Upgrade와 Connection이라는 hop-by-hop 헤더를 사용했다. NGINX.conf 파일에서 프록시 서버의 헤더를 설정할 때 hop-by-hop을 사용하는 이유가 뭘까?&lt;br&gt;
여기서 나오는 홉이란 쉽게 말해 네크워크에서 출발지와 목적지 사이의 경로를 의미한다. 홉 바이 홉 = 네트워크 경로 간의 경로를 의미하는데 프록시 특성상 버스 환승점처럼 원래의 목적지로 가기 위해 한 점을 찍고 넘어간다는 의미에서 hop-by-hop 헤더를 사용한 것이다. 그런데 이런 헤더의 특징으로는 요청의 헤더들이 다음 연결점에 영향을 끼쳐선 안 되기 때문에 현재 요청의 헤더 정보들을 모두 삭제하고 다음 연결점으로 넘어간다. 하지만 여기서 쓰고 있는 프록시 헤더들의 정보를 NextJS 웹앱 목적지로 모두 넘어가야하기 때문에 &lt;code class=&quot;language-text&quot;&gt;Upgrade&lt;/code&gt; 값을 사용해 클라이언트의 헤더 값들을 NextJS 헤더로 넘겨주고 있는 것이다.&lt;br&gt;
다양한 &lt;a href=&quot;http://nginx.org/en/docs/varindex.html&quot;&gt;NGINX 변수들&lt;/a&gt;이 있는데 나중에 꼭 참고하자.&lt;/p&gt;
&lt;h3 id=&quot;nginx를-이용한-정적-리소스-캐시&quot; style=&quot;position:relative;&quot;&gt;NGINX를 이용한 정적 리소스 캐시&lt;a href=&quot;#nginx%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%A0%95%EC%A0%81-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%BA%90%EC%8B%9C&quot; aria-label=&quot;nginx를 이용한 정적 리소스 캐시 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NGINX를 사용했을 때 가져갈 수 있는 주요 이점 중 하나는 NodeJS보다 정적 리소스를 효율적으로 관리할 수 있다는 점이다.&lt;br&gt;
NGINX는 설정한 디렉터리에 한해서 효율적인 캐싱 기능을 제공한다. 사용자가 최초에 웹앱에서 정적 리소스를 요청하면 (ex. 첫 화면에서 이미지 로드) NGINX가 해당 파일이 캐싱으로 설정한 디렉터리에 있는 경우, 요청 정보를 저장해 둔다. 이렇게 하면 사용자는 매 요청마다 같은 리소스를 반복해서 NodeJS 서버에 요청하지 않아도 된다.&lt;/p&gt;
&lt;p&gt;** 캐싱 영역 만들기 **&lt;/p&gt;
&lt;p&gt;NGINX는 어떤 방식으로 캐싱시키는 걸까?&lt;br&gt;
NGINX는 우선 캐싱 영역이라는 메모리 영역을 생성한다. 그리고 그 캐싱 영역에 특정 파일에 대한 캐시 키를 저장해 놓는데, 이 키는 해당 파일이 캐싱 영역에 저장되어있는지 아닌지 판별하기 위해 사용된다.&lt;br&gt;
캐싱 설정은 NGINX 설정 파일 최상단에 아래와 같이 기재해 준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off;

upstream nextjs_upstream {
  server nextjs:3000;
}

...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NGINX에서 캐싱 영역에 대한 세부 설정은 아래와 같이 설명된다&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/var/cache/nginx&lt;/code&gt; 캐싱된 리소스를 저장할 디렉터리&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;levels=1:2&lt;/code&gt; 너무 많은 파일이 하나의 디렉터리에 있는 경우 파일 접근 속도가 감소될 수 있으니 2단계 디렉터리의 계층 구조로 만들겠다는 의미
&lt;code class=&quot;language-text&quot;&gt;keys_zone=STATIC:10m&lt;/code&gt; STATIC이라는 이름을 가진 캐시용 메모리 영역을 명명하고 크기 제한은 10MB로 설정한다 (파일이 수천 개가 아닌 이상 충분)
&lt;code class=&quot;language-text&quot;&gt;inactive=7d&lt;/code&gt; 캐싱된 리소스가 유지되는 기간이고 이후에 접근되지 않은 리소스는 캐싱 영역에서 삭제한다
&lt;code class=&quot;language-text&quot;&gt;use_temp_path=off&lt;/code&gt; 리소스를 캐싱 디렉터리에 직접 사용하고 임시 저장될 영역을 자동으로 생성하지 않도록 설정한다&lt;/p&gt;
&lt;p&gt;** NextJS에서 빌드된 정적 리소스 캐싱 설정 **&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off;

upstream nextjs_upstream {
  server nextjs:3000;
}

server{
  ...
    location /_next/static {
      proxy_cache STATIC;
      proxy_pass http://nextjs_upstream;

      # For testing cache - remove before deploying to production
      add_header X-Cache-Status $upstream_cache_status;
    }
  ...
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NextJS는 빌드할 때 웹앱에서 구동할 각 페이지들을 만들어주기 위해 자바스크립트 번들러를 생성한다. 그리고 이 자바스크립트 번들러들은 /_next/static/* 경로에서 생성되어 NextJS가 페이지를 렌더링하게끔 만들어준다.&lt;br&gt;
이 정적인 번들러 파일들을 캐싱하기 위해 /_next/static 경로로 설정된 location 블럭 내부에 STATIC이라는 이름을 가진 프록시 캐시를 지정해주었다. 이렇게 지정해 두면 /_next/static 디렉터리 하위에 포함하고 있는 리소스들이 캐싱된다.&lt;br&gt;
캐싱된 이후 모든 요청들은 NextJS 웹앱으로 전달된다.&lt;br&gt;
(NextJS 빌드된 캡처)&lt;br&gt;
NextJS는 웹에서 브라우저 캐싱 작업을 처리하기 위해 응답의 헤더를 설정하는데 /_next/static/* 에 있는 빌드된 정적인 리소스의 경우 각 URL에 고유한 빌드 ID가 존재해 브라우저 캐시 헤더가 동작하도록 설정한다. (NextJS를 다시 빌드해 보면 이 ID 값들이 달라져있는 걸 확인할 수 있다.)&lt;br&gt;
문제는 static/ 디렉터리(사용자가 생성한)의 동적 리소스에는 고유한 빌드 ID가 생성되지 않는다는 점이다. NextJS는 이런 리소스들에 대해서는 캐시가 없는 헤더를 설정하기 때문에 브라우저가 해당 리소스들은 캐시하지 않게 된다. 이 경우 NGINX에 해당 디렉터리에 대한 추가 설정이 필요하다.&lt;/p&gt;
&lt;p&gt;** NextJS에서 빌드된 동적 리소스 캐싱 설정 **&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off;

upstream nextjs_upstream {
  server nextjs:3000;
}

server{
  ...
    location /static {
      proxy_cache STATIC;
      proxy_ignore_headers Cache-Control;
      proxy_cache_valid 60m;
      proxy_pass http://nextjs_upstream;

      # For testing cache - remove before deploying to production
      add_header X-Cache-Status $upstream_cache_status;
    }
  ...
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 NGINX에 들어오는 요청들 /static 하위 경로에 한해서, 캐시가 없는 헤더를 무시하는 작업이 필요하다. /static 경로로 설정된 location 블럭 내부에 마찬가지로 아까 이름 지어둔 STATIC 캐시를 연결해 주고 캐시된 파일의 유효 기간을 60분으로 설정했다. 이렇게 설정해 두면 /static/* 리소스에 한해서 최대 60분에 한 번만 캐시 메모리를 새로고침해 준다. 만약에 유효 기간을 설정하지 않으면 리소스들이 캐시 영역에 무기한으로 남지만 캐싱된 리소스는 기본적으로 비활성 기간이 7일이기 때문에 7일이 지나면 캐싱 영역에서 제거된다.&lt;/p&gt;
&lt;h3 id=&quot;nginx에서-gzip-설정&quot; style=&quot;position:relative;&quot;&gt;NGINX에서 gzip 설정&lt;a href=&quot;#nginx%EC%97%90%EC%84%9C-gzip-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;nginx에서 gzip 설정 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NGINX 서버에서 gzip을 활성화해 사용자에게 리소스들이 압축된 상태로 로드되도록 설정하자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;conf&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-conf line-numbers&quot;&gt;&lt;code class=&quot;language-conf&quot;&gt;proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off;

upstream nextjs_upstream {
  server nextjs:3000;
}

server{
  ...
  gzip on;
  gzip_proxied any;
  gzip_comp_level 4;
  gzip_types text/css application/javascript image/svg+xml;
  ...
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;gzip on&lt;/code&gt; gzip 활성&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;gzip_proxied any&lt;/code&gt; NGINX에게 어떤 파일이든 gzip되도록 지정&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;gzip_comp_level 4&lt;/code&gt; gzip 압축 레벨 설정 (4 정도가 평균)
&lt;code class=&quot;language-text&quot;&gt;gzip_types text/css application/javascript image/svg+xml&lt;/code&gt; 압축할 파일 타입 지정&lt;/p&gt;
&lt;p&gt;파일의 크기가 작을수록 압축 수준을 높게 설정할 수 있지만 압축 수준이 높을수록 압축 및 압축 해제에 시간이 더 오래 걸린다. 그리고 본문 글에 따르면 파일 크기가 절약되는 구간이 4 이후부터 감소된다고 하니 평균 4 정도가 적당하다고 본다. gzip 압축 형식은 텍스트가 많은 파일에서 가장 잘 작동하고 일반적으로 이미지 파일을 압축하는 건 권장하지 않는다. 이미지 파일의 경우 고도로 압축되는 경향이 있어 gzip에 실행되는 시간이 예상보다 더 많이 걸릴 수 있다. 하지만 svg 는 텍스트 기반이라 gzip 압축의 장점을 고스란히 가져갈 수 있다고 한다. 이미지들을 웬만하면 svg 형태로 표현해주는 게 최적화에 도움이 되겠다.&lt;/p&gt;
&lt;h3 id=&quot;nginx-도커라이징&quot; style=&quot;position:relative;&quot;&gt;NGINX 도커라이징&lt;a href=&quot;#nginx-%EB%8F%84%EC%BB%A4%EB%9D%BC%EC%9D%B4%EC%A7%95&quot; aria-label=&quot;nginx 도커라이징 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;nginx 폴더 하위 경로에 Dockerfile 파일을 생성했다.&lt;br&gt;
/nginx/Dockerfile&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-dockerfile line-numbers&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; nginx:alpine&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; rm /etc/nginx/conf.d/*&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; ./default.conf /etc/nginx/conf.d/&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 80&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [ &lt;span class=&quot;token string&quot;&gt;&quot;nginx&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;-g&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;daemon off;&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;리눅스의 alpine 배포판을 사용해 NGINX 도커 이미지를 기반으로 컨테이너를 생성한다. 그런 다음 NGINX 에 기본적으로 제공되는 구성 파일을 삭제하고 위에서 작업한 설정 파일로 교체하고 컨테이너 80 포트를 열어 실행해주면 해당 이미지를 실행 시 우리가 설정한 NGINX.conf 파일에 따라 NGINX가 실행된다.&lt;/p&gt;
&lt;h3 id=&quot;도커에서-생성된-컨테이너들-실행하기&quot; style=&quot;position:relative;&quot;&gt;도커에서 생성된 컨테이너들 실행하기&lt;a href=&quot;#%EB%8F%84%EC%BB%A4%EC%97%90%EC%84%9C-%EC%83%9D%EC%84%B1%EB%90%9C-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%93%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0&quot; aria-label=&quot;도커에서 생성된 컨테이너들 실행하기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;도커 파일이 있는 곳에서 각각 NextJS 이미지, NGNX 이미지를 생성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; build &lt;span class=&quot;token parameter variable&quot;&gt;--t&lt;/span&gt; nextjs-image &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; build &lt;span class=&quot;token parameter variable&quot;&gt;--t&lt;/span&gt; nextjs-image ./nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;두 컨테이너가 공유할 네트워크를 생성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; network create my-network&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;두 컨테이너를 링크시켜 실행한다.&lt;br&gt;
NextJS 도커 컨테이너의 네트워크는 앞서 생성한 my-network에 연결해 주고 컨테이너 이름을 nextjs-container라 명명한 뒤 nextjs-image 이미지를 이용해 도커 실행&lt;br&gt;
NGINX 도커 컨테이너의 네트워크도 앞서 생성한 my-network에 연결해 주고 nextjs-container 컨테이너를 nextjs로 link 옵션을 이용해 맵핑시킨 뒤 nginx-image 이미지를 이용해 localhost:80 포트로 도커를 실행&lt;/p&gt;
&lt;p&gt;반드시 —link 옵션을사용해 default.conf에서 nextjs로 참조되는 Next.js 컨테이너를 NGINX 컨테이너에 매핑해야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;--network&lt;/span&gt; my-network &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; nextjs-container nextjs-image
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;--network&lt;/span&gt; my-network &lt;span class=&quot;token parameter variable&quot;&gt;--link&lt;/span&gt; nextjs-container:nextjs &lt;span class=&quot;token parameter variable&quot;&gt;--publish&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;:80 nginx-image&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;참고-자료&quot; style=&quot;position:relative;&quot;&gt;참고 자료&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;참고 자료 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://steveholgado.com/nginx-for-nextjs/&quot;&gt;https://steveholgado.com/nginx-for-nextjs/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NextJS로 마이그레이션하기 - 개념]]></title><description><![CDATA[기존에 개발된 프로젝트들이 모두 CRA(Create React App…]]></description><link>https://ksy8230.github.io/todayILearned/nextjs/01.NextJS-migration-basic/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/nextjs/01.NextJS-migration-basic/</guid><pubDate>Thu, 17 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;기존에 개발된 프로젝트들이 모두 CRA(Create React App)를 이용한 리액트 라이브러리로 이루어져있고 배포를 위한 빌드 단계에서 긴 시간을 잡아먹는 게 불편하다는 생각이 들었다. 그래서 빌드 툴만 바꿀 생각으로 이런 저런 내용들을 찾아보았는데… 결국 NextJS로 다시 돌아왔다. 리액트 api들을 그대로 쓸 수 있다는 점에서 마이그레이션 기간이 짧을 것 같았고 (&amp;#x26; 거대한 커뮤니티 = 물어볼 슨생님들이 많아보였다) NextJS 의 컴파일러가 SWC라는 점에서 채택을 하게 됐다. (*추후에 SWC로도 개발을 해 보고 SWC 도입 전후 웹앱 속도가 얼마나 빠른지 느껴보고 싶지만 우선은 조금 더 진입장벽이 낮아보이는 NextJS를 선택)&lt;br&gt;
현재까지 나온 NextJS의 버전은 13이고 버전 12부터 SWC 라는 컴파일러를 사용한다고 한다. (*SWC는 웹을 위해 나온 러스트 기반의 플랫폼이다)&lt;/p&gt;
&lt;h3 id=&quot;nextjs란&quot; style=&quot;position:relative;&quot;&gt;NextJS란&lt;a href=&quot;#nextjs%EB%9E%80&quot; aria-label=&quot;nextjs란 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;리액트 라이브러리 + express + react-router-dom + ssr&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;한 줄로 설명하자면 이렇게 되겠다. 정확히 expressjs, reac-router-dom을 가져다 쓰고 있다는 의미가 아닌, express의 기능을 갖추고 있고 리액트 프로젝트로 구성을 할 때 매번 따로 설치해줘야했던 라우터 설정이 이미 포함되어있다는 의미로 이렇게 표현한다.&lt;/p&gt;
&lt;h4 id=&quot;단일-페이지-개발-기능&quot; style=&quot;position:relative;&quot;&gt;단일 페이지 개발 기능&lt;a href=&quot;#%EB%8B%A8%EC%9D%BC-%ED%8E%98%EC%9D%B4%EC%A7%80-%EA%B0%9C%EB%B0%9C-%EA%B8%B0%EB%8A%A5&quot; aria-label=&quot;단일 페이지 개발 기능 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;NextJS의 베이스에는 리액트 라이브러리가 존재한다. 즉, 리액트에서 사용하던 useEffect, useState 등 리액트에서 유용하게 활용하던 api 함수들을 모두 가져다 쓸 수 있다는 말이다. NextJS는 SPA 형식으로 웹 개발이 가능하고 NextJS에서 제공해 주는 api들을 통해 특정 페이지 범위, 혹은 전역 범위에서 서버사이드렌더링 개발이 별다른 설치 없이 이루어지도록 만들어진 프레임워크이다.&lt;/p&gt;
&lt;h4 id=&quot;자체-api-기능&quot; style=&quot;position:relative;&quot;&gt;자체 API 기능&lt;a href=&quot;#%EC%9E%90%EC%B2%B4-api-%EA%B8%B0%EB%8A%A5&quot; aria-label=&quot;자체 api 기능 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;NextJS에서 express에 해당하는 기능으로는 웹 api 기능을 자체적으로 지원하는 부분에서 유사하다.&lt;br&gt;
NextJS를 처음 설치를 하고 폴더를 확인해 보면 pages/api/* 하위 경로에 아래와 같은 소스가 보인다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;John Doe&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 파일의 이름이 hello.js라면 브라우저에 &lt;a href=&quot;http://localhost:3000/api/hello&quot;&gt;http://localhost:3000/api/hello&lt;/a&gt; 접속 시, 일반 웹 화면이 아닌 json 결과 값이 보인다. NextJS 문서에 따르면 /page/api/* 하위에 해당하는 파일들은 서버 측 전용 번들에 포함되므로 클라이언트 측 번들 크기를 늘리지 않는다고 한다. 이 기능을 본 프로젝트(리액트 프로젝트)를 마이그레이션할 때 사용할 것 같지는 않지만 일단 지금은 이런 기능이 있구나 하고 넘어가자.&lt;/p&gt;
&lt;h4 id=&quot;페이지-단위-라우팅-기능&quot; style=&quot;position:relative;&quot;&gt;페이지 단위 라우팅 기능&lt;a href=&quot;#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%8B%A8%EC%9C%84-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EA%B8%B0%EB%8A%A5&quot; aria-label=&quot;페이지 단위 라우팅 기능 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;package.json 과 같은 경로에서 npm run build 명령어로 NextJS 프레임워크를 빌드해 보면 .next 폴더가 생긴다. 그리고 이 폴더의 내부를 살펴보면 /static 하위에 페이지별로 js 파일들이 나뉘어서 들어가있는 걸 확인할 수 있다.&lt;br&gt;
페이지 별로 uri를 라우팅시키는 개발 방식 또한 굉장히 간단하다.&lt;br&gt;
&lt;a href=&quot;http://localhost:3000/main&quot;&gt;http://localhost:3000/main&lt;/a&gt; -&gt; /page/main/index.ts&lt;br&gt;
&lt;a href=&quot;http://localhost:3000/detail/1&quot;&gt;http://localhost:3000/detail/1&lt;/a&gt; (동적 페이지) -&gt; /page/detail/[id].ts&lt;/p&gt;
&lt;h4 id=&quot;서버사이드렌더링&quot; style=&quot;position:relative;&quot;&gt;서버사이드렌더링&lt;a href=&quot;#%EC%84%9C%EB%B2%84%EC%82%AC%EC%9D%B4%EB%93%9C%EB%A0%8C%EB%8D%94%EB%A7%81&quot; aria-label=&quot;서버사이드렌더링 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;NextJS를 도입하는 대부분의 이유 중 하나가 SSR 개발 기능이 무척 편하다는 점이다. 관련 글들을 SSR, SSG, CSR 요 세 개의 단어가 마치 한 세트처럼 같이 비교 설명되어 있는 글들이 많아서 간단하게 각각의 차이가 뭔지 알아보았다.&lt;/p&gt;
&lt;p&gt;SSG(Static Site Generation)&lt;br&gt;
NextJS에서 사용하는 pre-render 방식이다. 특징으로는 &lt;strong&gt;빌드 시에 html이 생성되고 매 요청마다 html을 만들어주는 것이 아니라 재사용한다.&lt;/strong&gt; 관련된NextJS API로는 &lt;code class=&quot;language-text&quot;&gt;getStaticProps&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;getStaticPaths&lt;/code&gt;가 있다. 지금 보고 있는 블로그는 정적 페이지 생성기로 사용되는 gatsby를 이용해 개발되었는데 gatsby가 아마 SSG에 해당되지 않을까?&lt;/p&gt;
&lt;p&gt;SSR(Server Side Rendering)&lt;br&gt;
NextJS에서 사용하는 pre-render 방식이다. 리액트와 같은 SPA 웹앱이 나오기 전 옛날 사이트들은 대부분 SSR 형식으로 이루어져있다고 알고 있다. SSR은 &lt;strong&gt;매 요청마다 HTML을 생성한다&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;브라우저가 렌더링 과정 한 줄 👉 서버로부터 완성된 html을 받아 브라우저가 html 돔트리, CCS 돔트리를 결합해 화면에 배치시키는 Render 트리를 만들어 주고, 페인팅 과정을 거쳐 사용자 눈에 완성된 페이지가 보인다. 이후 자바스크립트가 실행되면서 동적인 기능이 등록되는데 이때는 이미 ui는 완성된 상태이다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;CSR(Client Side Rendering)&lt;br&gt;
NextJS에서 사용하는 SPA 방식이다. 처음에 웹 서버에 요청을 할 때 몽땅 빈 HTML을 받아온다. 이후에 브라우저 단에서 렌더링을 위한 자바스크립트 코드가 실행되어 동적으로 html 태그들과 스타일을 생성해 완성된 페이지를 채워준다. 첫 화면 로딩 때 빈 html을 받는 것 말고 페이지 렌더링을 위한 별도의 HTTP 통신이 필요없고 이후 사용자의 동작에 따라 Ajax를 통해 필요한 데이터만 주고 받으며 웹앱이 동작한다. 웹 서버에 처음 요청할 때 몽땅 빈 HTML이기 때문에 SEO(Search Engine Optimization) 이슈가 생긴다. 웹 크롤러들은 웹 사이트의 html을 읽어서 이게 어떤 페이지구나 파악을 하는데 리액트로 개발된 사이트를 크롤러가 가져갔을 땐 빈 html만 결과값으로 나오기 때문에 검색에 빈번하게 노출되어야하는 페이지인 경우 따로 SSR 처리를 해줘야한다. 그리고 바로 이 부분이 NextJS에서 쉽게 작업이 된다는 점이다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;브라우저가 렌더링 과정 한 줄 👉 서버로부터 빈 html을 받아 브라우저가 html 돔트리, CCS 돔트리를 결합해 화면에 배치시키는 Render 트리를 만들어 주고, 페인팅 과정을 거쳐 사용자 눈에 완성된 페이지가 보인다. 이후 자바스크립트(리액트.js)가 실제 돔의 구조를 분석해 실행되는데 이 자바스크립트 안에서 ui를 완성시키는 코드들이 동적으로 생성되고 동적인 기능도 함께 등록된다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;root-html이-없는-nextjs&quot; style=&quot;position:relative;&quot;&gt;root html이 없는 NextJS&lt;a href=&quot;#root-html%EC%9D%B4-%EC%97%86%EB%8A%94-nextjs&quot; aria-label=&quot;root html이 없는 nextjs permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;NextJS를 빌드한 결과물은 다음과 같다.&lt;br&gt;
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202131938-87e20156-8380-484e-8338-093227c268e7.png&quot; alt=&quot;image&quot;&gt;&lt;br&gt;
ReactJS를 빌드했던 결과물과 비교했을 때 가장 어색한 부분은 아마 root(뼈대 html)에 해당하는 html 파일이 없다는 것이다.&lt;br&gt;
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202132315-c0ef4078-55fb-40de-8b2f-0b178abbe68d.png&quot; alt=&quot;image&quot;&gt;&lt;br&gt;
NextJS에서 뼈대 html에 해당하는 파일은 _app.tsx 파일이 역할을 하는데 나는 이 말에도 구현 방식이 확 닿지 않아서 express를 살펴보니 아하… 싶은 개념이 떠올랐다. 잠깐 express 기반의 웹 구동 방식을 살펴보면 얼핏 유사하다. express 모듈을 설치하고 app.js 파일을 아래와 같이 기재 후 node app.js로 실행을 하면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; express &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;requeire&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;express&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// node_modules에 있는 express 관련 파일 임포트&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// express 함수의 결과값을 app으로 지정&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3002&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 3002 포트로 서버 열기&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &quot;/&quot; 라우트로 접속 시 작성된 태그를 반환하여 브라우저에 노출&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;h1&gt;i am root content&amp;lt;/h1&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 뿅… 내가 접근한 라우팅 페이지에 들어가면 작성했던 html 태그가 반환되어 정상적인 페이지를 그려준다. 정적 페이지 정도는 js 모듈들만으로도 만들어지는 신기한 세상…&lt;br&gt;
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/202136308-1b88e877-5840-4941-bbcb-40d2051f2159.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;간단하게 NextJS가 뭔지 어떤 기능을 활용할 수 있는지 알아보았다.&lt;br&gt;
다음 작업은 NextJS, NGINX를 도커라이징하여 배포를 준비해 보자.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[리렌더링이 먹히는 경우]]></title><description><![CDATA[리덕스 라이브러리를 활용해 상태값들을 관리하며 개발하던 중 리렌더링이 비이상적으로 되는 현상이 발생했다. 새로고침을 할 때마다 화면에 보이는 값이 매번 동일하게 보이지 않았다. image 총 개수를 불러오는 api (이하 액션 A…]]></description><link>https://ksy8230.github.io/todayILearned/reactjs/리랜더링이 먹히는 경우/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/reactjs/리랜더링이 먹히는 경우/</guid><pubDate>Fri, 11 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;리덕스 라이브러리를 활용해 상태값들을 관리하며 개발하던 중 리렌더링이 비이상적으로 되는 현상이 발생했다.&lt;br&gt;
새로고침을 할 때마다 화면에 보이는 값이 매번 동일하게 보이지 않았다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/201300319-b62f9714-e59c-42a5-bc39-567c36c6d68c.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;총 개수를 불러오는 api (이하 액션 A라 지칭)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그룹들이 각각 얼마나 사용했는지를 나타내는 데이터 api (이하 액션 B라 지칭)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;data&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;group1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;group2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 두 api를 가지고 대략 위와 같은 ui를 표현해야하는데 모든 그룹의 사용량 합의 값이 보였다 안 보였다 하는 것. 이유가 뭘까 궁금해 버그 현상을 구현해 놓고 소스를 살펴보니 나는 두 가지 실수를 했었다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;리렌더링되어야할 useEffect의 두 번째 인자값 누락&lt;/li&gt;
&lt;li&gt;서로 다른 api임에도 리듀서에서 동일한 상태값으로 로딩을 시키려했던 것&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;1번에서 문제가 난 코드의 상황은 아래와 같았다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;totalCount &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;- totalCount: useSelector를 이용해 가져온 상태값&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; fetchData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;- fetchData: useSelector를 이용해 가져온 상태값&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fetchData&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; group&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setUsed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;- ❗ count 값 0으로 찍힘&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;totalCount&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loaded&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 useEffect는 totalCount, fetchData의 값을 useSelector에서 가져와 사용하고 있기 때문에 totalCount의 값과 fetchData의 값의 변화를 관찰하며 리렌더링하는 역할을 한다. 그런데 useEffect의 두 번째 인자에 fetchData 값이 빠져있어서 fetchData가 업데이트되지 못한 상태로 하위 코드들이 계산이 돼 버그 현상이 나타났던 것.&lt;br&gt;
다만 여기서 의문이었던 점은 loaded 값이었다. loaded 값에 따라 위 useEffect는 재발생되어야했는데 왜 그렇지 못했을까?&lt;/p&gt;
&lt;p&gt;해당 api과 관련된 액션 A와 액션 B의 리듀서를 살펴보니 답이 나왔다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;액션 A Request (state: {loaded: false;, else state… }) =&gt; 액션 A Success (state: {loaded: true;, else state… })&lt;/li&gt;
&lt;li&gt;액션 B Request (state: {loaded: false;, else state… }) =&gt; 액션 B Success (state: {loaded: true;, else state…})&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;두 액션이 함께 실행되어야했는데 두 액션이 같은 상태값을 변화시키고 있어서 리렌더링의 오류가 생겼던 것이다.&lt;br&gt;
이때 해결 방법은 액션 A, 액션 B의 로딩 상태의 값을 다르게 바꿔주거나 useEffect의 두 번째 인자값에 누락된 fetchData를 추가시켜주면 버그 현상이 해결이 되는 걸 확인했다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[리소스]]></title><description><![CDATA[타겟-소스 관계도를 나타낼 때 활용 가능한 타임라인형 그래프 (three.js 기반의 react-3d 라이브러리 활용)
캡처]]></description><link>https://ksy8230.github.io/todayILearned/project/work/resource/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/resource/</guid><pubDate>Thu, 10 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;타겟-소스 관계도를 나타낼 때 활용 가능한 타임라인형 그래프 (three.js 기반의 react-3d 라이브러리 활용)
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/200713086-86e0b6e1-91aa-45c5-95a9-d5e7342d15f9.JPG&quot; alt=&quot;캡처&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[인코딩의 종류]]></title><description><![CDATA[업데이트 일자 : 2022-11-14 이미지 파일을 웹에서 표현할 때 이미지 태그 속 src="" 속성값은 크게 두 가지 방식으로 표현이 가능하다. 해당 이미지 파일의 경로를 넣는 방식 ex. src=“./image/test.png…]]></description><link>https://ksy8230.github.io/todayILearned/base/인코딩의 종류/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/base/인코딩의 종류/</guid><pubDate>Tue, 08 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;업데이트 일자 : 2022-11-14&lt;/p&gt;
&lt;p&gt;이미지 파일을 웹에서 표현할 때 이미지 태그 속 src=&quot;&quot; 속성값은 크게 두 가지 방식으로 표현이 가능하다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;해당 이미지 파일의 경로를 넣는 방식 ex. src=“./image/test.png”&lt;/li&gt;
&lt;li&gt;데이터를 직접 넣는 방식 ex. src=“data:image/png;base64,{binary data}”&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;신규 프로젝트 작업 중 백엔드에서 넘겨주는 이미지 값이 바이트라 2번과 같은 인코딩 방식에 대한 의문이 생겨 잠시 구글링을 해 보았다.&lt;/p&gt;
&lt;h3 id=&quot;대표적인-인코딩-방식들&quot; style=&quot;position:relative;&quot;&gt;대표적인 인코딩 방식들&lt;a href=&quot;#%EB%8C%80%ED%91%9C%EC%A0%81%EC%9D%B8-%EC%9D%B8%EC%BD%94%EB%94%A9-%EB%B0%A9%EC%8B%9D%EB%93%A4&quot; aria-label=&quot;대표적인 인코딩 방식들 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;암호화된 데이터를 저장이나 교환을 목적으로 부호화하는 것을 인코딩한다고 한다.&lt;/p&gt;
&lt;p&gt;** 부호화란? 컴퓨터를 이용해 영상, 이미지, 소리 데이터를 생성할 때 데이터의 양을 줄이기 위해 데이터를 코드화하고 압축하는 것&lt;/p&gt;
&lt;p&gt;많이 쓰이는 대표적인 인코딩 방식으로 Base64, Hexadecimal 두 가지가 있다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Base64&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;character 조합 : A 부터 Z, a 부터 z, 0 부터 9 + / =&gt; 64개&lt;/li&gt;
&lt;li&gt;인코딩된 길이 : 원 데이터 bytes의 1/3&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;Hexadecimal&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;character 조합 : 0 부터 9, A 부터 F =&gt; 16개&lt;/li&gt;
&lt;li&gt;인코딩된 길이 : 원 데이터 bytes * 2&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;프론트에서-채택한-방식&quot; style=&quot;position:relative;&quot;&gt;프론트에서 채택한 방식&lt;a href=&quot;#%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%90%EC%84%9C-%EC%B1%84%ED%83%9D%ED%95%9C-%EB%B0%A9%EC%8B%9D&quot; aria-label=&quot;프론트에서 채택한 방식 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;자바스크립트에서는 Base64 인코딩 방식도 Hexadecimal 인코딩 방식도 가능하다. 다만 인코딩된 길이가 Hexadecimal 인코딩 방식보다 Base64 인코딩 방식이 더 짧기 때문에 이미지 src 값에는 Base64 방식으로 인코딩된 url을 추가하였다. (일단… 그나마 익숙하게 들어본 용어기도 해서)&lt;/p&gt;
&lt;p&gt;api로부터 받은 응답의 결과는 아래와 같이 생겼었다. (이미지 출처: 스택오버플로우)
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/201669290-9e64e5bd-31ba-4ba0-9567-0cc86c13eaeb.png&quot; alt=&quot;image&quot;&gt;
이런 모양의 데이터는 처음봐서 검색을 해 보니 전혀 &lt;strong&gt;가공되지 않은 png 이미지 파일의 바이너리 값&lt;/strong&gt;이라고 한다.&lt;/p&gt;
&lt;p&gt;이 값을 img src 값에 그대로 넣어주면 에러가 나고 &lt;strong&gt;base64 인코딩 형태로 변환&lt;/strong&gt;시키는 작업이 필요하다.&lt;/p&gt;
&lt;p&gt;웹 브라우저와 웹 서버 간의 데이터 전송을 할 때 사용되는 XMLHttpRequest 객체는 어떠한 형식의 데이터도 전송이 가능하다. XHR.responseType 지정을 통해 파일을 받는데 그 종류로는 “text”, “arraybuffer”, “blob”, “document”가 있고 지정하지 않으면 기본적으로 “text” 값이 들어간다.
위 캡처의 형태와 같이 &lt;strong&gt;파일&lt;/strong&gt; 형태의 데이터를 웹 브라우저와 서버가 주고 받을 때는 &lt;strong&gt;blob 혹은 arraybuffer 값을 이용&lt;/strong&gt;한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;GET&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/getImageApi&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;responseType&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blob&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;responseType: ‘arraybuffer’를 설정하여 통신을 요청하면 아래와 같은 응답 값으로 바뀌어서 돌아온다. (arraybuffer vs blob 차이는 뭔지 추후에 더 공부해 보자) 단어 그대로 버퍼들의 배열 형태인 응답이다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;버퍼란? 쉽게 말해 임시 저장 공간을 뜻한다. 웹 브라우저 중 크롬의 경우 954MB 정도의 이진 데이터를 저장할 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/201671554-748a55ad-cd3f-4c86-b32d-240707c1c7b8.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;이제 이 예쁘게 나열된 버퍼 배열을 문자열 형태의 base64 인코딩 형태로 바꿔준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; base64ImageString &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Buffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;binary&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;base64&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; imgSrc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;data:image/png;base64,&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;base64ImageString&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;시간될-때-조금-더-알아보면-좋을-것&quot; style=&quot;position:relative;&quot;&gt;시간될 때 조금 더 알아보면 좋을 것&lt;a href=&quot;#%EC%8B%9C%EA%B0%84%EB%90%A0-%EB%95%8C-%EC%A1%B0%EA%B8%88-%EB%8D%94-%EC%95%8C%EC%95%84%EB%B3%B4%EB%A9%B4-%EC%A2%8B%EC%9D%84-%EA%B2%83&quot; aria-label=&quot;시간될 때 조금 더 알아보면 좋을 것 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Base64 인코딩 방식 vs Hexadecimal 인코딩 방식의 차이&lt;/li&gt;
&lt;li&gt;arraybuffer vs blob 차이&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[2022 회고]]></title><description><![CDATA[✨ 2022 초창기 목표 한 해가 지나기 전 마지막 점검하는 시간을 갖도록 하자. 2022의 계획은 뭐였지? 얼마나 이행했지? RESTAPI를 만들어 프론트 작업물에 추가해 보기 방통대 졸업하기 운동 꾸준히 하기 토끼 친구 1.…]]></description><link>https://ksy8230.github.io/todayILearned/review/2022/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/review/2022/</guid><pubDate>Mon, 07 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;-2022-초창기-목표&quot; style=&quot;position:relative;&quot;&gt;✨ 2022 초창기 목표&lt;a href=&quot;#-2022-%EC%B4%88%EC%B0%BD%EA%B8%B0-%EB%AA%A9%ED%91%9C&quot; aria-label=&quot; 2022 초창기 목표 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;한 해가 지나기 전 마지막 점검하는 시간을 갖도록 하자. 2022의 계획은 뭐였지? 얼마나 이행했지?&lt;/p&gt;
&lt;ul class=&quot;contains-task-list&quot;&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; RESTAPI를 만들어 프론트 작업물에 추가해 보기&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 방통대 졸업하기&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 운동 꾸준히 하기&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 토끼 친구 1.6 키로 만들기&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; 책 읽는 습관 기르기&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;각-목표-별-회고&quot; style=&quot;position:relative;&quot;&gt;각 목표 별 회고&lt;a href=&quot;#%EA%B0%81-%EB%AA%A9%ED%91%9C-%EB%B3%84-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot;각 목표 별 회고 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&quot;1-백엔드-개발&quot; style=&quot;position:relative;&quot;&gt;1. 백엔드 개발&lt;a href=&quot;#1-%EB%B0%B1%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C&quot; aria-label=&quot;1 백엔드 개발 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;팀으로 같이 일하고 있는 백엔드 개발자 분의 소스가 파이썬으로 짜여있어서 파이썬을 배워야겠다 생각했고 장고를 쓰고 계시길래 이건 또 뭔가 궁금해서 장고 프레임워크를 끄적이며 올해 중반기를 보낸 것 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a. 반려 토끼 정보를 모아두는 사이트를 리액트+장고를 활용해 토이 프로젝트를 만들며 맛보기 수준 정도로 진행.&lt;/li&gt;
&lt;li&gt;b. 회사 프로젝트 중 장고로 만들어진 소스를 잠시 이어받아 응답의 결과를 내가 원하는 데이터 형태로 수정해 프론트에 REST API로 json 결과를 보내주고, 장고 모델 파일을 이용해 간단한 테이블을 만드는 등 손등에 양념 찍기 수준으로 실무에 활용.&lt;/li&gt;
&lt;li&gt;c. 회사 프로젝트 중 장고로 만들어진 소스를 또 잠시 이어받아 로그인에 관련된 API를 추가하는 작업을 진행. + 구글 로그인.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;결론적으로 얻은 바는 무언가를 배우고 습득하기 위해서는 내가 직접 만들어보는 게 제일 빠르다는 것이었다. 그리고 한 번 만져본 것보다 두 번 만져봤을 때 이해도가 다르고 두 번 만져본 것보다 세 번 만져봤을 때 이해도가 또 다르다는 것… 너무 당연한 소리지만 꾸준함에 장사 없다는 말을 다시 깨달았다. 시간날 때 a 단계에서 작업했던 토이 프로젝트를 조금 더 진행시키고 싶다.&lt;/p&gt;
&lt;h4 id=&quot;2-방통대-졸업&quot; style=&quot;position:relative;&quot;&gt;2. 방통대 졸업&lt;a href=&quot;#2-%EB%B0%A9%ED%86%B5%EB%8C%80-%EC%A1%B8%EC%97%85&quot; aria-label=&quot;2 방통대 졸업 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;비전공자인 나는 전공자들보다 컴퓨터에 관련된 전반적인 지식이 부족하다는 판단이 들었다. 그리고 애석하게도 8월에 방통대 컴퓨터과학과 졸업은 했지만 생각보다 원하는 지식 수준에 도달한 느낌은 못 받았다. 다만 기본적인 과목들에 어떤 것들이 있는지 내가 부족한 기초 지식이 뭔지 한 번 훑어낸 기분이다.&lt;/p&gt;
&lt;h4 id=&quot;3-운동-꾸준히-하기&quot; style=&quot;position:relative;&quot;&gt;3. 운동 꾸준히 하기&lt;a href=&quot;#3-%EC%9A%B4%EB%8F%99-%EA%BE%B8%EC%A4%80%ED%9E%88-%ED%95%98%EA%B8%B0&quot; aria-label=&quot;3 운동 꾸준히 하기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;작년부터 체력이 쭉쭉 닳아간다는 느낌을 받았다. 일을 하는 것도 공부를 하는 것도 노는 것도 전부 체력이 베이스라는 걸 3x가 되던 해에 뼈저리게 깨닫고 22년도 4월부터 필라테스를 시작해 11월 현재까지 용케 이어가고 있다. 이제는 운동한 주와 안 한 주가 너무 다른 걸 알게 되어서 운동 습관 만들기에 초석을 다진 것 같아 기쁘면서도 슬프다.&lt;/p&gt;
&lt;h4 id=&quot;4-토끼-친구-16키로-만들기&quot; style=&quot;position:relative;&quot;&gt;4. 토끼 친구 1.6키로 만들기&lt;a href=&quot;#4-%ED%86%A0%EB%81%BC-%EC%B9%9C%EA%B5%AC-16%ED%82%A4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0&quot; aria-label=&quot;4 토끼 친구 16키로 만들기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;올해로 반려토끼가 만 4 세가 되었다. 한 해에 한 번 두 번씩 큰 수술을 치르다보니 매년 목표 리스트에 토끼 친구의 건강 관련된 내용이 꼭 들어가는 것 같다. 마지막으로 동물 병원을 다녀왔을 때 1.7 키로였으니 이 목표도 이룬 셈이라 소소하게 기쁘다.&lt;/p&gt;
&lt;h4 id=&quot;5-책-읽는-습관-기르기&quot; style=&quot;position:relative;&quot;&gt;5. 책 읽는 습관 기르기&lt;a href=&quot;#5-%EC%B1%85-%EC%9D%BD%EB%8A%94-%EC%8A%B5%EA%B4%80-%EA%B8%B0%EB%A5%B4%EA%B8%B0&quot; aria-label=&quot;5 책 읽는 습관 기르기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;치매 예방에도 좋고 집중력 향상과 심신 안정에도 좋다는 독서… 올해도 잘 챙기지 못해 안타깝다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[nextjs에 써드파티 라이브러리 추가 시 에러]]></title><description><![CDATA[nextjs 기반의 프로젝트로 작업 중… nextjs에 커스텀한 모듈들만 모아둔 써드파티 라이브러리를 추가해야할 일이 생겼다. CRA 기반의 프로젝트 기준으로 작업되었던 모듈들이라 정말 미친듯한 에러들이 떴는데… 이 과정에서 CRA와 nextjs…]]></description><link>https://ksy8230.github.io/todayILearned/bugLists/nextjs에 써드파티 라이브러리 추가 시 에러/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/bugLists/nextjs에 써드파티 라이브러리 추가 시 에러/</guid><pubDate>Wed, 14 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;nextjs 기반의 프로젝트로 작업 중… nextjs에 커스텀한 모듈들만 모아둔 써드파티 라이브러리를 추가해야할 일이 생겼다.&lt;br&gt;
CRA 기반의 프로젝트 기준으로 작업되었던 모듈들이라 정말 미친듯한 에러들이 떴는데… 이 과정에서 CRA와 nextjs가 외부 모듈을 받아들이는 포맷이 다르다는 걸 알게 되었다.&lt;br&gt;
프론트 개발자끼리 사용하려고 예쁘게 정리해둔 모듈들을 rollup을 이용해 빌드시킨 후 verdaccio에 배포를 한 뒤 필요한 프로젝트에 추가하는 식으로 사용을 하는데&lt;br&gt;
여태까지 esm 형식으로 CRA에 추가해 왔던 것이 nextjs에서는 인식이 안 되었던 것… nextjs는 cjs, 즉 common js로만 패키지 모듈을 인식하고 있었다.&lt;br&gt;
빌드 파일의 용량을 줄이겠다고 컴포넌트를 개발할 때 가능하면 -&gt; (라이브러리명)/esm/locale.js 이런 식으로 범위를 좁혀서 import 시킨 뒤 배포를 했는데 이런 것들이 에러를 뿜었던 것.&lt;/p&gt;
&lt;p&gt;esm 글자들을 지워주고 재배포하니 예쁘게 잘 동작한다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NextJS API 공부 - 동적 페이지 서버사이드 렌더링 작업 (getStaticPaths, getStaticProps)]]></title><description><![CDATA[리액트로 작업 중 서버사이드 렌더링이 필요한 페이지가 생겨 공부하기 시작한 NextJS 의 API 중 두 개만 우선 정리해 보자. NextJS…]]></description><link>https://ksy8230.github.io/todayILearned/nextjs/Nextjs/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/nextjs/Nextjs/</guid><pubDate>Thu, 25 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;리액트로 작업 중 서버사이드 렌더링이 필요한 페이지가 생겨 공부하기 시작한 NextJS 의 API 중 두 개만 우선 정리해 보자.&lt;br&gt;
NextJS를 활용하면 리액트만 사용했을 때보다 편리하게 정적인 사이트 생성이 가능하다.&lt;/p&gt;
&lt;p&gt;가장 많은 예시로는 동적 파라미터를 갖고 있는 상세페이지들이 해당 예시에 적합하겠다.&lt;/p&gt;
&lt;p&gt;예를 들어 아래와 같은 주소를 갖는 포스팅 수정 페이지가 있다고 해 보자.&lt;br&gt;
&lt;a href=&quot;http://localhost:3000/review/edit/2&quot;&gt;http://localhost:3000/review/edit/2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;위와 같은 페이지는 10 개가 될수도 있고 100 개가 될 수 있다. 이런 경우 /edit/ 뒤에 존재하는 동적인 id 값을 nextjs 서버로부터 받아올 수 있는 함수를 사용해야 한다.&lt;/p&gt;
&lt;h3 id=&quot;getstaticpaths&quot; style=&quot;position:relative;&quot;&gt;getStaticPaths&lt;a href=&quot;#getstaticpaths&quot; aria-label=&quot;getstaticpaths permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;getStaticPaths : 동적인 데이터에 따라 미리 렌더링할 페이지의 동적인 경로를 지정하게 해 주는 함수&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-ts line-numbers&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;review&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;deit &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tsx

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getStaticPaths&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:8000/review/list&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 포스팅 리스트들을 가져오는 백엔드 API&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; reviewList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 응답 결과를 json 형태로 변환&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; paths &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reviewList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    params&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// json 배열 결과를 [ { params: { id: 1} }, { params: { id: 2} }, ... ] 형태로 변환&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    paths&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fallback&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;getStaticPaths 함수를 사용해 동적 페이지로 활용될 수 있는 리스트의 id 값들을 &lt;code class=&quot;language-text&quot;&gt;[ { params: { id: 1} }, { params: { id: 2} }, ... ]&lt;/code&gt; 형태로 paths 값에 넣어 리턴시켜준다. 이것만으로 동적 파라미터 경로 준비는 완료가 된다.&lt;/p&gt;
&lt;h3 id=&quot;getstaticprops&quot; style=&quot;position:relative;&quot;&gt;getStaticProps&lt;a href=&quot;#getstaticprops&quot; aria-label=&quot;getstaticprops permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;getStaticProps : nextjs 서버에서 페이지를 빌드할 때 데이터를 패치시켜주는 함수&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ts&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-ts line-numbers&quot;&gt;&lt;code class=&quot;language-ts&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;review&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;deit &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tsx

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getStaticPaths&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:8000/review/list&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 포스팅 리스트들을 가져오는 백엔드 API&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; reviewList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 응답 결과를 json 형태로 변환&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; paths &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reviewList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    params&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// json 배열 결과를 [ { params: { id: 1} }, { params: { id: 2} }, ... ] 형태로 변환&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    paths&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fallback&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getStaticProps&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;GetStaticProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; params &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;http://localhost:8000/review/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 페이지에서 받아온 parmas의 id&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; post &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    props&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; post &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 해당 페이지 컴포넌트에 상위 props로 주입&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;getStaticProps 함수를 활용해 해당 페이지 경로의 params 값을 받아와서 id를 통해 적절한 API 호출을 시켜줄 수 있다.&lt;br&gt;
1번 페이지는 id = 1 데이터에 맞는 상세 api 호출, 2번 페이지는 id = 2 데이터에 맞는 상세 api 호출 등등…&lt;/p&gt;
&lt;p&gt;위 두 개의 NextJS API 흐름을 가장 보기 쉽게 그린 그림은 아래와 같다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/186604363-637cd4af-75bd-4d20-8bcd-ffeebc4425ba.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[웹 보안, 웹 취약점 설정]]></title><description><![CDATA[회사에서 납품한 프로젝트 업무 중에 웹 취약점 점검이라는 것이 있었다. 간단하게 알아본 내용을 정리하자. Content-Security-Policy…]]></description><link>https://ksy8230.github.io/todayILearned/setting/react/웹취약점관련/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/setting/react/웹취약점관련/</guid><pubDate>Fri, 05 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;회사에서 납품한 프로젝트 업무 중에 웹 취약점 점검이라는 것이 있었다. 간단하게 알아본 내용을 정리하자.&lt;/p&gt;
&lt;h3 id=&quot;content-security-policy란&quot; style=&quot;position:relative;&quot;&gt;Content-Security-Policy란&lt;a href=&quot;#content-security-policy%EB%9E%80&quot; aria-label=&quot;content security policy란 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;브라우저는 페이지를 보여주거나 컨텐츠를 로드할 때 어딘가 존재하는 서버로 요청을 보내는데 이때 응답에 포함된 헤더라는 게 존재한다.&lt;br&gt;
이 헤더를 통해서 브라우저가 자체적으로 컨텐츠를 차단해 주는 기능이 있고 이 부분과 관련된 정책을 CPS 정책이라고 한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;‘none’ : 어떤 것도 허용 안 함&lt;/li&gt;
&lt;li&gt;‘self’ : 동일 출처 도메인에 한하여 허용, 하위 도메인에서는 허용 안 함&lt;/li&gt;
&lt;li&gt;‘unsafe-inline’ : 인라인 자바스크립트, 스타일을 허용&lt;/li&gt;
&lt;li&gt;‘unsafe-eval’ : eval과 같은 텍스트 형식을 허용 안 함&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;예시&quot; style=&quot;position:relative;&quot;&gt;예시&lt;a href=&quot;#%EC%98%88%EC%8B%9C&quot; aria-label=&quot;예시 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;nginx 헤더에 추가한 한 줄을 설명해 보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre class=&quot;language-nginx&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;add_header&lt;/span&gt; Content-Security-Policy &lt;span class=&quot;token string&quot;&gt;&quot;default-src &apos;self&apos;; img-src &apos;self&apos;; style-src &apos;self&apos; &apos;unsafe-inline&apos;; script-src &apos;self&apos;;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;default-src&lt;/strong&gt; : 기본적은 리소스들은 동일 출처 도메인에 한해서만 허용&lt;br&gt;
&lt;strong&gt;img-src&lt;/strong&gt; : 이미지 리소스들은 동일 출처 도메인에 한해서만 허용&lt;br&gt;
&lt;strong&gt;style-src&lt;/strong&gt; : 스타일 리소스들은 동일 출처 도메인에 한해서만 허용, 인라인 형태 추가 허용&lt;br&gt;
&lt;strong&gt;script-src&lt;/strong&gt; : 스크립트 리소스들은 동일 출처 도메인에 한해서만 허용, 인라인 형태 추가 허용&lt;/p&gt;
&lt;p&gt;프로젝트가 리액트로 개발되어서 빈 html에 js, css파일들이 추가되는 형식이라 (인라인) ‘unsafe-inline’ 정책을 빼기가 어려웠다…&lt;br&gt;
즉, 내가 설정한 정책은 가장 기본적이면서 완화된 정책을 사용한 것.&lt;/p&gt;
&lt;h3 id=&quot;참고-링크&quot; style=&quot;position:relative;&quot;&gt;참고 링크&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0-%EB%A7%81%ED%81%AC&quot; aria-label=&quot;참고 링크 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://content-security-policy.com/&quot;&gt;https://content-security-policy.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;보안정책 예시 (&lt;a href=&quot;https://content-security-policy.com/examples/&quot;&gt;https://content-security-policy.com/examples/&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[10. 무작정 장고로 사이드프로젝트 만들기]]></title><description><![CDATA[게시글과 작성자 만들고 있는 사이드 프로젝트에는 업체를 등록하는 페이지가 존재한다. 그리고 이 페이지를 작성한 작성자의 이름이 노출됐으면 좋겠다. 업체 모델의 필드 중 username 필드를 db…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/10.두 테이블 연동/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/10.두 테이블 연동/</guid><pubDate>Tue, 02 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;게시글과-작성자&quot; style=&quot;position:relative;&quot;&gt;게시글과 작성자&lt;a href=&quot;#%EA%B2%8C%EC%8B%9C%EA%B8%80%EA%B3%BC-%EC%9E%91%EC%84%B1%EC%9E%90&quot; aria-label=&quot;게시글과 작성자 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;만들고 있는 사이드 프로젝트에는 업체를 등록하는 페이지가 존재한다. 그리고 이 페이지를 작성한 작성자의 이름이 노출됐으면 좋겠다.&lt;/p&gt;
&lt;p&gt;업체 모델의 필드 중 username 필드를 db에 저장할 때 프론트단에서 가져온 값을 그대로 저장했는데, 이 경우 사용자가 본인의 정보를 수정한 경우 싱크가 맞지 않아버린다.&lt;/p&gt;
&lt;p&gt;ex. 업체 리스트 생성 당시 내 이름이 김아무개인데 나중에 김아무개를 이아무개로 변경 시 업체 리스트 등록자에도 이아무개로 변경되는 것이 맞음&lt;/p&gt;
&lt;p&gt;“업체 테이블”과 “사용자 테이블”은 따로 존재하고 업체 테이블은 사용자의 정보를 참조해야 한다.&lt;br&gt;
이 경우 사용할 수 있는 것이 &lt;strong&gt;외래키 (Foreign Key)&lt;/strong&gt; 이다.&lt;/p&gt;
&lt;h3 id=&quot;작업-내용&quot; style=&quot;position:relative;&quot;&gt;작업 내용&lt;a href=&quot;#%EC%9E%91%EC%97%85-%EB%82%B4%EC%9A%A9&quot; aria-label=&quot;작업 내용 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;업체 모델의 username 필드를 User 테이블에서 가져오도록 지정을 한다.&lt;br&gt;
이때 username 필드에 들어가는 값은 User 테이블에서 해당하는 사용자의 id 값이 들어갈 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;companyapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py

  &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AutoField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  categories &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JSONField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  region &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  phone &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  siteUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CASCADE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 수정된 부분 ✔&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아래 API는 업체를 등록시키는 뷰단의 내용이다.&lt;br&gt;
추가시킬 내용을 프론트에서 받아와 serializer에 적힌 필드대로 데이터베이스에 저장을 할 것인데, 여기서 username에 해당하는 필드의 값은 프론트에서 받아오는 것이 아닌 이 API를 “요청한 사용자”로 지정한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;companyapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; views&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RegisterCompany&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    authentication_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SessionAuthentication&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CompanySerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_valid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 수정된 부분 ✔
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_201_CREATED&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_400_BAD_REQUEST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;프론트로 보낼 응답인 JSON의 내부에도 username이라는 값을 내려줄 건데, views.py 파일의 serializer 작업에서 넣어준 “요청한 유저”의 객체를 읽어온다.&lt;br&gt;
장고가 참 편하다고 느낀 부분이 이 부분이다. 참조된 테이블의 특정 컬럼에서 내가 내려주고 싶은 값을 지정하는 작업이 편리하다는 것.&lt;br&gt;
업체 테이블에서 username이라는 필드에는 사용자의 id로 저장이 되어 있을 텐데 serializer 클래스에서 내가 내려주고 싶은 값으로 바꿔줄 수 있다.&lt;br&gt;
업체를 누가 등록했는지 식별할 수 있는 사용자 닉네임으로 변경했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;companyapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompanySerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadOnlyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;username.name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 수정된 부분 ✔
  &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Company
      fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;categories&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;region&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;phone&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;siteUrl&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[9. 무작정 장고로 사이드프로젝트 만들기 - 버그리스트]]></title><description><![CDATA[버그리스트 (마지막 업데이트일: 22-07-22) 작업하는 중간중간 발생했다 해결한 버그 케이스들을 간략하게 기재하는 페이지로 활용할 예정이다. ✅ JSONField…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/9.버그리스트(update.220722)/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/9.버그리스트(update.220722)/</guid><pubDate>Fri, 22 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;버그리스트-마지막-업데이트일-22-07-22&quot; style=&quot;position:relative;&quot;&gt;버그리스트 (마지막 업데이트일: 22-07-22)&lt;a href=&quot;#%EB%B2%84%EA%B7%B8%EB%A6%AC%EC%8A%A4%ED%8A%B8-%EB%A7%88%EC%A7%80%EB%A7%89-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%9D%BC-22-07-22&quot; aria-label=&quot;버그리스트 마지막 업데이트일 22 07 22 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;작업하는 중간중간 발생했다 해결한 버그 케이스들을 간략하게 기재하는 페이지로 활용할 예정이다.&lt;/p&gt;
&lt;h4 id=&quot;-jsonfield-지원-안-하는-현상&quot; style=&quot;position:relative;&quot;&gt;✅ JSONField 지원 안 하는 현상&lt;a href=&quot;#-jsonfield-%EC%A7%80%EC%9B%90-%EC%95%88-%ED%95%98%EB%8A%94-%ED%98%84%EC%83%81&quot; aria-label=&quot; jsonfield 지원 안 하는 현상 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;등록할 업체 데이터에는 카테고리라는 속성값이 있다.&lt;br&gt;
카테고리의 종류는 병원 / 먹기 / 용품 세 가지가 있고 각각 1,2,3 값으로 데이터베이스에 저장할 예정이다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/180340151-650dc25b-27d3-4099-9acb-0a959ae26565.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Company&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AutoField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    categories &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JSONField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;{}&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 👈
    region &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    phone &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# todo: 폰번호 저장 형식&lt;/span&gt;
    siteUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Django에 기본적으로 내장된 데이터베이스는 sqlite3이다. 그리고 이 sqlite3은 JSONField 타입을 지원하지 않으니 postsql 사용을 권장하는 글들이 많았다. 데이터베이스를 바꾸면 해결될 문제같기는 했지만 다른 방도가 있을 거라는 생각에 조금 더 찾아보니 Python 3.9 이상의 버전를 설치하면 Python 설치 프로그램에 JSON1이라는 확장이 포함된다고 한다.&lt;/p&gt;
&lt;p&gt;관련하여 참조한 글 : &lt;a href=&quot;https://code.djangoproject.com/wiki/JSON1Extension&quot;&gt;https://code.djangoproject.com/wiki/JSON1Extension&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Python 버전을 업그레이드해줘도 내가 작업하고 있는 파이썬 가상 환경이 3.9 버전을 바라보고 있어야하기 때문에 가상 환경의 파이썬 버전을 업그레이드시켜야했는데… 가상환경이 아직은 나에겐 어색한 영역이라 꽤 애를 먹었다.&lt;br&gt;
기존의 가상환경의 파이썬을 업그레이드시키는 방법보다는 새로운 가상환경을 만들때 파이썬 3.9버전을 연결해주는게 더 빠른 방법 같아 올바른 방식인지는 모르겠지만 어쨋든 해당 에러는 해결됐다.&lt;/p&gt;
&lt;p&gt;🤷‍♀️ 가상환경에 설치되어있는 django 모듈들이 적어서 어렵지 않았는데 기존 프로젝트에 설치되어 있는 모듈들이 많은 경우엔 이 모듈들을 requirement.txt에 옮겨 담아서 새로운 가상환경에 재설치해주는 방법도 있는 것 같던데 시간이 나면 찾아보자.&lt;/p&gt;
&lt;h4 id=&quot;-put-patch-delete-rest-api는-uri에-리소스-id가-존재해야-함&quot; style=&quot;position:relative;&quot;&gt;✅ /put /patch /delete REST API는 uri에 리소스 id가 존재해야 함&lt;a href=&quot;#-put-patch-delete-rest-api%EB%8A%94-uri%EC%97%90-%EB%A6%AC%EC%86%8C%EC%8A%A4-id%EA%B0%80-%EC%A1%B4%EC%9E%AC%ED%95%B4%EC%95%BC-%ED%95%A8&quot; aria-label=&quot; put patch delete rest api는 uri에 리소스 id가 존재해야 함 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;🚫 404 url not found&lt;br&gt;
등록한 업체를 수정하는 기능이 필요해 put, patch 메서드를 사용해 api를 만들었는데 자꾸만 오류가 났다.&lt;br&gt;
어디가 문제인고 찾아보니 rest api에서 위와 같은 메서드의 리소스에는 수정할, 삭제할 대상의 정보가 들어가야했다.&lt;/p&gt;
&lt;p&gt;참조 : &lt;a href=&quot;https://www.restapitutorial.com/lessons/httpmethods.html&quot;&gt;https://code.djangoproject.com/wiki/JSON1Extension&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;-중간에-db-필드를-수정해야할-때&quot; style=&quot;position:relative;&quot;&gt;✅ 중간에 DB 필드를 수정해야할 때&lt;a href=&quot;#-%EC%A4%91%EA%B0%84%EC%97%90-db-%ED%95%84%EB%93%9C%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%B4%EC%95%BC%ED%95%A0-%EB%95%8C&quot; aria-label=&quot; 중간에 db 필드를 수정해야할 때 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;models.py에서 필드를 수정하고 &lt;code class=&quot;language-text&quot;&gt;python manage.py makemigrations&lt;/code&gt; 로 마이그레이션을 시도하면 아래와 같은 문구가 나온다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/182089359-54dfdf7d-5f8a-47e7-b8e8-5c0f1151bbaa.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;없던 name이라는 필드를 만들어놓고 db를 마이그레이션하려니 장고가 두 가지 선택지를 주는 것이다.&lt;br&gt;
1번은 이미 존재하는 컬럼들의 값에 기본값을 줄래?&lt;br&gt;
2번은 종료하고 models.py에서 기본값을 수동으로 정의할래?&lt;br&gt;
어쨌든 둘 다 없던 필드에 대응할 수 있는 값을 설정하게끔 유도하는 문구이다. 1번을 선택후 터미널창에서 기본값을 1로 설정해 줬고 db를 조회해보니 원하는대로 name 필드와 설정한 기본값이 세팅되었다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/182090330-2efabb92-8654-43a6-b1e0-e730850a0351.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[8. 무작정 장고로 사이드프로젝트 만들기 - 내 정보 수정하기]]></title><description><![CDATA[만들어볼 API 종류 ✅ 내 정보 수정 (/account/updateUser/) *** accountapp(사용자지정명칭)이라는 계정관련한 장고앱이 만들어져있다는 가정하에 진행합니다. 새로운 serializer…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/8.내 정보 수정/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/8.내 정보 수정/</guid><pubDate>Tue, 05 Jul 2022 15:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;만들어볼-api-종류&quot; style=&quot;position:relative;&quot;&gt;만들어볼 API 종류&lt;a href=&quot;#%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%BC-api-%EC%A2%85%EB%A5%98&quot; aria-label=&quot;만들어볼 api 종류 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;✅ 내 정보 수정 (/account/updateUser/)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;*** accountapp(사용자지정명칭)이라는 계정관련한 장고앱이 만들어져있다는 가정하에 진행합니다.&lt;/p&gt;
&lt;h4 id=&quot;새로운-serializer-클래스-생성-기준&quot; style=&quot;position:relative;&quot;&gt;새로운 serializer 클래스 생성 기준&lt;a href=&quot;#%EC%83%88%EB%A1%9C%EC%9A%B4-serializer-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%83%9D%EC%84%B1-%EA%B8%B0%EC%A4%80&quot; aria-label=&quot;새로운 serializer 클래스 생성 기준 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;프론트에서 보내온 새로운 내 정보를 받아 지정한 모델 양식에 맞게 검증 후, json 형태로 만들어주는 작업이 필요하다.&lt;br&gt;
serializer 클래스를 새로 생성해야하는 기준이 무엇인가 궁금했는데 Meta 영역에서 지정해주는 경우가 다르다면 새로운 serializer 클래스를 생성하는게 좋은 것 같다.👈&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;fields&lt;/code&gt;: 호출 받는 데이터 영역&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;extra_kwargs&lt;/code&gt;: 데이터 직렬화할 때 각 데이터마다 옵션을 설정해주는 영역&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; accountapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountDetailSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 👈
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        extra_kwargs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;read_only&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; 고유한 &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; 값은 읽기만 가능하도록
            &lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;required&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;write_only&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; 비밀번호 수정은 필수가 아니며&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 쓰기&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;수정&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;이 가능하도록
            &lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;required&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; 수정은 필수가 아니다
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; validated_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; validated_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        password &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; validated_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startswith&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;pbkdf2_sha256$&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;set_password&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;validated_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; validated_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; validated_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; instance&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;view-파일에서-serializer를-불러올-때-넣어주는-인자값&quot; style=&quot;position:relative;&quot;&gt;view 파일에서 serializer를 불러올 때 넣어주는 인자값&lt;a href=&quot;#view-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-serializer%EB%A5%BC-%EB%B6%88%EB%9F%AC%EC%98%AC-%EB%95%8C-%EB%84%A3%EC%96%B4%EC%A3%BC%EB%8A%94-%EC%9D%B8%EC%9E%90%EA%B0%92&quot; aria-label=&quot;view 파일에서 serializer를 불러올 때 넣어주는 인자값 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;정보를 수정하기 위해 serializer 클래스 내부에서 update 함수를 이용한다.&lt;br&gt;
update 함수는 인자값을 두 개를 갖고 있다. (비교 및 수정될 instance와 검증할 데이터)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; validated_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;비교 및 수정된 instance = 해당 api를 요청한 사용자✔&lt;br&gt;
검증할 데이터 = 수정 요청으로 넘어온 데이터✔&lt;/p&gt;
&lt;p&gt;views.py 파일에서 AccountDetailSerializer를 불러올 때 이 두 개의 인자값과 매칭시켜서 보내준다.✔&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; accountapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; views&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 사용자 수정&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UpdateAccount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    authentication_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SessionAuthentication&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user
        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; AccountDetailSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; partial&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;✔
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_valid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_201_CREATED&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_400_BAD_REQUEST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;비밀번호는-암호화시켜서-저장&quot; style=&quot;position:relative;&quot;&gt;비밀번호는 암호화시켜서 저장&lt;a href=&quot;#%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8%EB%8A%94-%EC%95%94%ED%98%B8%ED%99%94%EC%8B%9C%EC%BC%9C%EC%84%9C-%EC%A0%80%EC%9E%A5&quot; aria-label=&quot;비밀번호는 암호화시켜서 저장 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;한참 헤맸던 부분이다.&lt;br&gt;
회원가입시 비밀번호를 1234로 생성하였다해도 db에는 암호화된 값으로 저장이 된다. 이는 수정할 때도 마찬가지로 암호화되어서 저장되어야 한다는 의미다.&lt;br&gt;
하지만 기존의 비밀번호를 1234 -&gt; 1111로 변경했을 때 serializer로 넘어온 데이터는 암호화되어 넘어오는게 아닌, 프론트에서 보내주는 그대로의 데이터인 111로 넘어온다.&lt;br&gt;
따라서 아래와 같이 instance의 password 값을 set_password 함수를 이용해 검증된 비밀번호로 암호화시켜주는 작업이 필요하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startswith&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;pbkdf2_sha256$&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;set_password&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;validated_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[7. 무작정 장고로 사이드프로젝트 만들기 - Nextjs에서 전역 상태로 사용자 불러오기]]></title><description><![CDATA[어떤 문제가 있는가 chrome-capture-2022-6-14 nextjs…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/07.Nextjs 전역 상태 만들기/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/07.Nextjs 전역 상태 만들기/</guid><pubDate>Mon, 04 Jul 2022 15:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;어떤-문제가-있는가&quot; style=&quot;position:relative;&quot;&gt;어떤 문제가 있는가&lt;a href=&quot;#%EC%96%B4%EB%96%A4-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EC%9E%88%EB%8A%94%EA%B0%80&quot; aria-label=&quot;어떤 문제가 있는가 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/178902066-7bd02c09-f3b0-407c-8c5a-95d5b0a9a7d0.gif&quot; alt=&quot;chrome-capture-2022-6-14&quot;&gt;&lt;/p&gt;
&lt;p&gt;nextjs로 구축한 내 프론트 웹 어플리케이션의 구성은 헤더 | 본문 | 푸터로 이루어져있다. 그리고 이 헤더의 우측엔 로그인 유무를 알 수 있는 인터페이스가 있는데 로그인 후 새로고침할 때마다 이렇게 로그인이 풀릴 것마냥 login 텍스트가 잠시 보였다가 다시 로그인된 상태로 돌아온다.&lt;br&gt;
찰나이긴 하지만 너무 거슬리니 고쳐보자. 🤨&lt;/p&gt;
&lt;h3 id=&quot;원인-파악&quot; style=&quot;position:relative;&quot;&gt;원인 파악&lt;a href=&quot;#%EC%9B%90%EC%9D%B8-%ED%8C%8C%EC%95%85&quot; aria-label=&quot;원인 파악 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/178902914-16b8417a-839d-4b98-895e-0c2e026ad8fa.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;헤더의 영역은 컴포넌트로 관리를 하고 있고, 이 헤더 컴포넌트가 불러와질 때 리덕스의 액션함수를 호출해 사용자 정보를 me 라는 상태값으로 저장하고 있다. me라는 상태에 username이 존재한다면 (유저가 로그인된 상태라면) My Page가 보일 것이고, 그렇지 않다면 Login이 보일 것이다.&lt;/p&gt;
&lt;p&gt;문제는 헤더 컴포넌트가 마운트될 때 유저를 불러오는 액션 리듀서가 me라는 상태를 null로 초기화시킨 후&lt;br&gt;
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/178903537-4fbfaf0e-6922-4014-97f2-097e3650c650.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;유저를 불러오는 API 호출이 완료되면 아래와 같이 me 객체에 유저 정보를 담아서 상태를 저장하는데 pending -&gt; fulfilled 되는 과정에서 생기는 시간차이 때문에 위와 같은 이슈가 발생한 것이다.&lt;br&gt;
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/178903570-0de173d9-dc0e-4ccb-b42f-2c875421d0f6.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;어떻게-해결할까&quot; style=&quot;position:relative;&quot;&gt;어떻게 해결할까&lt;a href=&quot;#%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0%EA%B9%8C&quot; aria-label=&quot;어떻게 해결할까 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;생각해본 방법은&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;헤더 컴포넌트에서 &lt;code class=&quot;language-text&quot;&gt;getInitialProps&lt;/code&gt; 함수를 이용해 서버에서 먼저 API 호출을 하고 나온 결과를 해당 컴포넌트의 props에 주입시키기.&lt;/li&gt;
&lt;li&gt;_app.tsx 라는 앱의 시작점 파일에서 유저를 불러오는 액션 함수를 호출.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;1번-방법&quot; style=&quot;position:relative;&quot;&gt;1번 방법&lt;a href=&quot;#1%EB%B2%88-%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;1번 방법 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;1번 방법은 컴포넌트 안에서는 &lt;code class=&quot;language-text&quot;&gt;getInitialProps&lt;/code&gt; 함수를 이용해 서버사이드렌더링이 불가능해 실패했다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;getInitialProps enables server-side rendering in a page and allows you to do initial data population, it means sending the page with the data already populated from the server. This is especially useful for SEO.&lt;br&gt;
getInitialProps는 페이지에서 서버사이드 렌더링이 가능하게 한다. 그리고 초기 데이터를 네 임의대로 채울 수 있게 한다. 이 말인즉, 서버로부터 이미 채워진 데이터와 같이 페이지를 프론트로 보내준다는 뜻이다. 이것은 SEO에도 아주 유용하다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;2번-방법&quot; style=&quot;position:relative;&quot;&gt;2번 방법&lt;a href=&quot;#2%EB%B2%88-%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;2번 방법 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;2번 방법을 사용하기 위해선 &lt;code class=&quot;language-text&quot;&gt;next-redux-wrapper&lt;/code&gt; 라이브러리에서 제공하는 createWrapper라는 함수가 필요하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;tsx&quot;&gt;&lt;pre class=&quot;language-tsx&quot;&gt;&lt;code class=&quot;language-tsx&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;store&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ts
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createWrapper&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MakeStore &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;next-redux-wrapper&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; wrapper &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;makeStore&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  debug&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NODE_ENV&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;production&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; _app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tsx
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

MyApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getInitialProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; wrapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInitialPageProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; ctx &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; allCookies &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cookie&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; parts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; allCookies&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;; &lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; sessionid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parts&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      sessionid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; parts&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sessionid=&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sessionid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:8000/account/whoIam/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        withCredentials&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        headers&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          Cookie&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; allCookies &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;HYDRATE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        payload&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; users&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; me&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;HYDRATE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        payload&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; hydrate&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; username&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 코드와 같이 MyApp이 갖고 있는 &lt;code class=&quot;language-text&quot;&gt;getInitialProps&lt;/code&gt; 함수를 createWrapper를 이용해 우리가 지정하고 싶은 로직으로 오버라이드시키는 것이다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;getInitialPageProps&lt;/code&gt;라는 말에서 알 수 있듯이 이 작업을 수행하면 nextjs에서 만든 모든 페이지들에서 내가 지정한 데이터들을 props으로 받을 수 있다. 👍 근데 내가 원했던 건 페이지마다 user 정보를 주입시키는게 아니라 리덕스를 이용해 전역 상태에 유저 상태를 저장해주고 싶은 것.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[6. 무작정 장고로 사이드 프로젝트 만들기 - djangorestframework로 로그인과 회원가입 API 만들기]]></title><description><![CDATA[…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/06.로그인과 회원가입/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/06.로그인과 회원가입/</guid><pubDate>Sun, 03 Jul 2022 15:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;세션-로그인-방식&quot; style=&quot;position:relative;&quot;&gt;세션 로그인 방식&lt;a href=&quot;#%EC%84%B8%EC%85%98-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EB%B0%A9%EC%8B%9D&quot; aria-label=&quot;세션 로그인 방식 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;작업을 들어가기 전에 간단하게 용어와 개념을 정리하자.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;세션?&lt;br&gt;
같은 브라우저를 기준으로 들어오는 요청에 대한 상태를 유지시키는 기술이다. 이 상태는 사용자가 브러우저에 접속한 뒤 이런저런 요청과 응답을 이용한 후 종료할 때까지 유지된다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;쿠키?&lt;br&gt;
어떤 웹사이트를 방문했을 때 사용자에 대한 특정 정보를 기억하기 위한 파일로 세션과 마찬가지로 브라우저를 사용하는 사용자의 상태 정보를 유지하기 위한 기술이다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;세션과 쿠키의 연결점&lt;br&gt;
세션은 사용자의 정보를 사용자 컴퓨터의 메모리가 아닌 서버에 저장을 한다. 그리고 이 정보를 식별할 수 있는 세션ID를 파일로 담아(쿠키)을 사용자에게 넘겨줘 매요청마다 해당 사용자인지 확인한다.&lt;br&gt;
쿠키는 사용자의 정보를 사용자 컴퓨터 메모리에 저장한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;CSRF?&lt;br&gt;
Cross Site Request Forgery의 약자로 사이트 요청 공격을 의미한다. 공격자가 타겟 사용자의 권한을 훔쳐서 해당 권한으로 악의적인 행위를 하는 것이다.&lt;br&gt;
이를 방지하기 위해 세션과 연결된 랜덤한 토큰을 발행하여 요청이 안전한지 한번 더 확인시켜주는 게 CSRF 토큰이다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177935433-9242d85c-a247-4ff2-a3eb-b32242d4566c.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;위 그림에서 CSRF 토큰은 사용자가 로그인할 때 브라우저에의 세션탭에 세션ID와 같이 저장이 될 것이다.&lt;br&gt;
(즉, 쿠키는 세션ID, CSRF토큰 두 개가 되겠다)&lt;br&gt;
그리고 이 토큰을 가지고 요청을 해야만 다른 API 호출이 가능하도록 만들어볼 것!&lt;/p&gt;
&lt;h3 id=&quot;만들어볼-api-종류&quot; style=&quot;position:relative;&quot;&gt;만들어볼 API 종류&lt;a href=&quot;#%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%BC-api-%EC%A2%85%EB%A5%98&quot; aria-label=&quot;만들어볼 api 종류 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;✅ 회원가입 (/account/register/)&lt;/li&gt;
&lt;li&gt;✅ 로그인 (/account/login/)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;장고에서 기본적으로 세팅되어있는 인증 방식이 세션방식이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; setting&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
CSRF_TRUSTED_ORIGINS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:3000&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
CORS_ORIGIN_WHITELIST &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://127.0.0.1:3000&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:3000&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
CORS_ALLOW_CREDENTIALS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;
CORS_EXPOSE_HEADERS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;X-CSRFToken&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

CSRF_COOKIE_SAMESITE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Lax&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# CSRF 쿠키의 SameSite 플래그 값을 설정하는 곳으로 내 쿠키가 사이트 간에 요청되는 걸 막는다&lt;/span&gt;
SESSION_COOKIE_SAMESITE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Lax&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 세션 쿠키의 SameSite 플래그 값으로 내 쿠키가 사이트 간에 요청되는 걸 막는다&lt;/span&gt;
CSRF_COOKIE_HTTPONLY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 클라이언트, 즉 자바스크립트로 CSRF 쿠키에 접근할 수 없다&lt;/span&gt;
SESSION_COOKIE_HTTPONLY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 클라이언트, 즉 자바스크립트로 세션 쿠키에 접근할 수 없다&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;회원가입-api&quot; style=&quot;position:relative;&quot;&gt;회원가입 API&lt;a href=&quot;#%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-api&quot; aria-label=&quot;회원가입 api permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;*** accountapp(사용자지정명칭)라는 계정관련한 장고앱이 만들어져있다는 가정하에 진행합니다.&lt;/p&gt;
&lt;p&gt;우선 사용자라는 객체들을 담을 DB 생성을 위한 사용자 모델을 만들어 준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; accountapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AbstractBaseUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; BaseUserManager


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BaseUserManager&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 일반 user 생성&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; ValueError&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;must have user email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; ValueError&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;must have user username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; ValueError&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;must have user name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            email&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;normalize_email&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;name
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;set_password&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;using&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_db&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; user

    &lt;span class=&quot;token comment&quot;&gt;# 관리자 user 생성&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create_superuser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create_user&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;name
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_admin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;
        user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;using&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_db&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; user


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AbstractBaseUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AutoField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EmailField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# User 모델의 필수 field&lt;/span&gt;
    is_active &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BooleanField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    is_admin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BooleanField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# 헬퍼 클래스 사용&lt;/span&gt;
    objects &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserManager&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;#  로그인 시, id/paswword 입력할 때 id값의 필드를 설정하는 곳&lt;/span&gt;
    USERNAME_FIELD &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 회원가입 시, 필수로 작성해야하는 field&lt;/span&gt;
    REQUIRED_FIELDS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__str__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; setting&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
AUTH_USER_MODEL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;accountapp.User&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 만든 사용자 모델을 인증에 연결해준다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;회원가입 뷰단에서 불러와 사용할 serializers 파일이다.&lt;br&gt;
AccountSerializer 클래스에서 User 모델을 만들어 json 형식으로 응답할 수 있도록 형태를 바꿔준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; accountapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; validated_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create_user&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            email&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;validated_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;validated_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;validated_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;validated_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; user
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사용자 생성을 요청하면 요청된 데이터를 가지고 serializers 과정을 거쳐 리턴 받은 user를 db에 저장한다.&lt;br&gt;
해당 요청은 권한이 없는 외부 사용자가 사용할 수 있도록 permission을 AllowAny로 설정했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; accountapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; views&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CreateAccount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AllowAny&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; AccountSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_valid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_201_CREATED&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_400_BAD_REQUEST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 만든 api를 accountapp에 연결해 외부에서 /account/register/ 를 통해 실행될 수 있도록 세팅한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;from django.urls import path
from accountapp.views import hello_world, Login, CreateAccount, AccountList

app_name = &quot;accountapp&quot;

urlpatterns = [
    path(&apos;hello_world/&apos;, hello_world, name=&apos;hello_world&apos;),
    path(&apos;login/&apos;, Login.as_view(), name=&apos;login&apos;),
    path(&apos;register/&apos;, CreateAccount.as_view(), name=&apos;register&apos;),
    path(&apos;user_list/&apos;, AccountList.as_view(), name=&apos;user_list&apos;)
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;로그인-api&quot; style=&quot;position:relative;&quot;&gt;로그인 API&lt;a href=&quot;#%EB%A1%9C%EA%B7%B8%EC%9D%B8-api&quot; aria-label=&quot;로그인 api permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; accountapp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; views&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Login&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AllowAny&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data

        username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        password &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authenticate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; user &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            login&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;message&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;User logged in successully&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;data&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;message&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;User does not exits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[5. 무작정 장고로 사이드 프로젝트 만들기 - djangorestframework와 react 연결해 보기 (2)]]></title><description><![CDATA[장고와 리액트 연결하기 앞선 포스팅에 이어서 이번엔 프론트단에 해당하는 리액트 앱에서 장고 api 서버를 요청해 보자. ✅ CRA 설치 CRA 보일러 프로젝트를 이용해 django-front 앱을 만든다. 루트에 해당하는 App.js…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/05.django and react2/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/05.django and react2/</guid><pubDate>Sat, 02 Jul 2022 15:01:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;장고와-리액트-연결하기&quot; style=&quot;position:relative;&quot;&gt;장고와 리액트 연결하기&lt;a href=&quot;#%EC%9E%A5%EA%B3%A0%EC%99%80-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0&quot; aria-label=&quot;장고와 리액트 연결하기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;앞선 포스팅에 이어서 이번엔 프론트단에 해당하는 리액트 앱에서 장고 api 서버를 요청해 보자.&lt;/p&gt;
&lt;p&gt;✅ CRA 설치&lt;/p&gt;
&lt;p&gt;CRA 보일러 프로젝트를 이용해 django-front 앱을 만든다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; npx create-react-app django-front&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;루트에 해당하는 App.js 파일에서 axios 라이브러리를 이용해 장고 urls.py 에서 설정한 api 경로를 요청해 보자.&lt;/p&gt;
&lt;p&gt;django-front &gt; App.js&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; axios &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;axios&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onloadData&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http://127.0.0.1:8000/article/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;App&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onloadData&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;show me the article list!&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결과 😣 CORS 에러.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177021746-b6b5484c-e666-476d-a895-459c0227fd42.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;CORS 에러는 왜 생길까?&lt;br&gt;
외부로부터 오는 서버 공격을 보호하기 위해 특정 도메인, IP 이외의 경로로 들어오는 요청을 브라우저가 차단하는 에러이다.&lt;br&gt;
CORS 는 HTTP 요청 헤더 중에 Origin 이라는 속성의 헤더와 관련되어있다. 동일한 출처로부터 요청이 온 것인지 브라우저가 확인을 해 보고 아니라면 에러를 내는 것.&lt;br&gt;
장고 서버는 localhost:8000 이고 리액트 앱은 localhost:3000 이기 때문에 동일하지 않은 포트로 요청을 한 것임으로 장고 서버의 입장에서 외부 서버인 프론트앱 서버에서 보내는 요청의 헤더에 cross origin HTTP 요청을 허가한다는 내용을 추가해야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;✅ CORS 에러 해결하기&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; pip install django-cors-headers&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;settings.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;py&quot;&gt;&lt;pre class=&quot;language-py&quot;&gt;&lt;code class=&quot;language-py&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;corsheaders&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

MIDDLEWARE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;corsheaders.middleware.CorsMiddleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

CORS_ORIGIN_WHITELIST &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://127.0.0.1:3000&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:3000&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 교차 출처 허락 리스트&lt;/span&gt;
CORS_ALLOW_CREDENTIALS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 교차 출처를 허용&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;프론트앱에서 &lt;a href=&quot;http://127.0.0.1:8000/article/&quot;&gt;http://127.0.0.1:8000/article/&lt;/a&gt; 장고서버로 다시 요청을 해 보면 서버에서 요청의 응답에 &lt;code class=&quot;language-text&quot;&gt;Access-Control-Allow-Credentials: true&lt;/code&gt; 속성을 부여해 브라우저가 해당 요청을 허용한 걸 확인할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177171982-e1e62ff2-a3d2-4c99-8401-eccc9da336b1.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[4. 무작정 장고로 사이드 프로젝트 만들기 - djangorestframework와 react 연결해 보기 (1)]]></title><description><![CDATA[장고와 리액트 연결하기 장고에서 제공하는 프론트 개발용 템플릿이 있지만 익숙한 리액트 라이브러리로 프론트를 개발하고 싶어 장고와 리액트를 연결하는 방법을 찾아보았다. 장고에 static 폴더에 리액트.js 파일을 cdn…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/04.django and react/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/04.django and react/</guid><pubDate>Sat, 02 Jul 2022 15:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;장고와-리액트-연결하기&quot; style=&quot;position:relative;&quot;&gt;장고와 리액트 연결하기&lt;a href=&quot;#%EC%9E%A5%EA%B3%A0%EC%99%80-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0&quot; aria-label=&quot;장고와 리액트 연결하기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;장고에서 제공하는 프론트 개발용 템플릿이 있지만 익숙한 리액트 라이브러리로 프론트를 개발하고 싶어 장고와 리액트를 연결하는 방법을 찾아보았다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;장고에 static 폴더에 리액트.js 파일을 cdn으로 연결해 장고 내부에서 리액트를 불러와 사용하는 방법&lt;/li&gt;
&lt;li&gt;백엔드앱과 프론트앱을 나누어서 프론트앱으로 리액트를 사용하는 방법&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;1번 방법은 장고 내부에서 리액트 파일을 실행시키는 것이기 때문에 장고에 프론트 관련한 파일을 제외하고는 추가적인 설정이 필요가 없어 연동자체는 간결하다고 한다. 하지만 리액트에서 제공하는 api 사용에 있어 제약이 있다는 글이 있어 회사 내부에서 채택하고 있는 2번 방법으로 실습해 보기로 한다.&lt;/p&gt;
&lt;p&gt;✅ djangorestframework 설치하기&lt;/p&gt;
&lt;p&gt;장고와 리액트 연결이라고 적어놨지만 2번 방법은 결국 백엔드와 프론트가 분리되어 개발되는 방법이다. 앱을 역할로 분리함으로써 백엔드앱인 장고는 rest api 서버로 사용이 될 것이고 프론트앱인 리액트는 사용자 인터페이스 개발용도 사용될 것이다.&lt;/p&gt;
&lt;p&gt;rest_framework 를 사용하기 위해 아래와 같이 장고에 djangorestframework를 설치한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; pip install djangorestframework&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;✅ setting.py에 앱 연결&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177022097-795cc983-0039-446e-b9bc-9a9ff0c63519.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;✅ article 장고앱 만들기 (API용도로 사용할 앱)&lt;/p&gt;
&lt;p&gt;만들어볼 실습 프로젝트가 블로그이기에 장고 내부에 게시글을 관리할 목적으로 생성될 articleapp 앱을 새로 또 생성하였다.&lt;br&gt;
앱 만드는 방법은 해당 게시글에서 참고 가능! 👉&lt;a href=&quot;https://github.com/ksy8230/todayILearned/blob/main/content/blog/project/work/django/3.startapp.md,&quot; title=&quot;make django app&quot;&gt;장고에서 앱 만드는 법&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177022144-68d3b199-c19e-4c87-b248-6b0725edc566.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;✅ article 모델 생성&lt;/p&gt;
&lt;p&gt;article 객체에 필요한 것들로는 제목, 내용, 업데이트된 날짜 정도가 가장 필수적인 내용이 될 것이다.&lt;/p&gt;
&lt;p&gt;articleapp &gt; models.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models

&lt;span class=&quot;token comment&quot;&gt;# Create your models here.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Article&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    content &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    updated_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;✅ 모델 내용을 바탕으로 db 생성 (마이그레이션)&lt;/p&gt;
&lt;p&gt;장고 프레임워크에서는 모델을 생성하면 manage.py 파일을 이용해 sqlite로 데이터베이스를 쉽게 모델 객체들과 맵핑하여 데이터 테이블들을 생성할 수 있는 것 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; python manage.py makemigrations&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; python manage.py migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;✅ 관리자 등록&lt;/p&gt;
&lt;p&gt;생성한 article 모델을 장고 어드민에 등록하고 슈퍼관리자를 생성해 준다. (이 단계가 왜 필요한 건지는 아직 모르겠다)&lt;/p&gt;
&lt;p&gt;articleapp &gt; admin.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; admin
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Article
&lt;span class=&quot;token comment&quot;&gt;# Register your models here.&lt;/span&gt;
admin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;register&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Article&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; python manage.py createsuperuser&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;✅ 시리얼라이저 생성&lt;/p&gt;
&lt;p&gt;djangorestframework를 설치한 이유가 여기서 나온다. djangorestframework 에서는 시리얼라이저라는 클래스를 제공하는데 이 클래스가 데이터베이스 인스턴스를 JSON 데이터 형터로 생성해준다.&lt;br&gt;
즉, 시리얼라이저를 이용해 장고가 외부 요청에 맞는 데이터 응답의 값을 프론트가 읽을 수 있는 json 형태로 내려줄 수 있다. (API 생성 작업)&lt;/p&gt;
&lt;p&gt;articleapp &gt; serializers.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; articleapp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Article


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArticleSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Article
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;title&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;content&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;updated_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;✅ api에 해당하는 소스&lt;/p&gt;
&lt;p&gt;아주 간단하게 article 목록을 조회하고 생성하는 api만 적어보았다.&lt;/p&gt;
&lt;p&gt;articleapp &gt; views.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; APIView
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; status
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;response &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Response
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ArticleSerializer
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Article
&lt;span class=&quot;token comment&quot;&gt;# Create your views here.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArticleList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 아티클 목록 GET 요청시&lt;/span&gt;
        articles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Article&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 아티클 모델의 객체들을 가져와&lt;/span&gt;
        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ArticleSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;articles&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 시리얼라이저로 데이터베이스의 값을 json 형태로 만든다&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 프론트로 응답&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 아티클 생성 POST 요청시&lt;/span&gt;
        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ArticleSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 시리얼라이저로 요청 데이터를 json 형태로 만든다&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_valid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 해당 데이터가 유효한 값이라면&lt;/span&gt;
            serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 시리얼라이저로 데이터베이스에 해당 데이터를 저장한다&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_201_CREATED&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 프론트로 생성 요청한 데이터를 json 형태로 응답&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;erros&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_400_BAD_REQUEST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 해당 데이터가 유효하지 않다면 프론트로 에러 응답&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;✅ api를 호출할 url 기재&lt;/p&gt;
&lt;p&gt;mollang(장고 전체앱) &gt; urls.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; admin
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;admin/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; admin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;account/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;accountapp.urls&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;articleapp.urls&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; 추가!
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;articleapp &gt; urls.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urlpatterns &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; format_suffix_patterns
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; articleapp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ArticleList

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;article/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ArticleList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;as_view&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; format_suffix_patterns&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;urlpatterns&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기까지 장고 세팅은 끝났다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[3. 무작정 장고로 사이드 프로젝트 만들기 - 앱 만들기]]></title><description><![CDATA[장고로 앱 만들기 장고라는 프레임워크 안에 여러개의 앱들이 만들어질 예정이다. 유저를 관리하는 accountApp 게시글을 관리하는 articleApp 댓글을 관리하는 commentApp ❗ 모든 프로젝트들의 시작인 hello_world…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/03.startapp/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/03.startapp/</guid><pubDate>Fri, 01 Jul 2022 15:01:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;장고로-앱-만들기&quot; style=&quot;position:relative;&quot;&gt;장고로 앱 만들기&lt;a href=&quot;#%EC%9E%A5%EA%B3%A0%EB%A1%9C-%EC%95%B1-%EB%A7%8C%EB%93%A4%EA%B8%B0&quot; aria-label=&quot;장고로 앱 만들기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;장고라는 프레임워크 안에 여러개의 앱들이 만들어질 예정이다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;유저를 관리하는 accountApp&lt;/li&gt;
&lt;li&gt;게시글을 관리하는 articleApp&lt;/li&gt;
&lt;li&gt;댓글을 관리하는 commentApp&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;❗ 모든 프로젝트들의 시작인 hello_world를 장고 앱을 실행해 찍어보자.&lt;/p&gt;
&lt;p&gt;장고의 관리 파일인 manage.py를 이용해 우선 계정앱을 생성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; python manage.py startapp accountapp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177019633-82a52059-e7b1-462b-a0c5-9e05c6ac452c.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;그리고 이 앱을 장고가 인식할 수 있도록 setting.py에서 추가를 해준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django.contrib.admin&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django.contrib.auth&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django.contrib.contenttypes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django.contrib.sessions&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django.contrib.messages&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django.contrib.staticfiles&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;accountapp&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; 추가
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결과물 값인 ‘hello world’는 view.py에서 작성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; HttpResponse

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hello_world&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; HttpResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello world!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;어디서 라우팅되어 결과값을 보내줄지는 urls.py에서 작성한다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177019811-2daf1123-e14f-4fd5-a3e9-a9384b11dbc2.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;좌측 urls.py 파일이 장고의 루트에 해당하는 파일이고 우측에 urls.py가 방금 내가 생성한 accountapp에 속하는 파일이다.&lt;br&gt;
장고에서 라우팅 설정이 굉장히 직관적이라는 느낌을 받았다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;urlpatterns&lt;/code&gt;에서 라우팅될 경로들을 리스트 형식으로 받고 path 함수를 이용해 내 앱의 url 주소마다 어떤 정보를 보내줄지 결정이 가능하다.&lt;br&gt;
첫번째 인자 -&gt; 라우팅 url&lt;br&gt;
두번째 인자 -&gt; 라우팅 url을 접근했을 때 보내줄 응답 결과&lt;br&gt;
세번째 인자 -&gt; 해당 라우팅의 이름을 지정&lt;/p&gt;
&lt;p&gt;http://{로컬주소}/account/hello_world/&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/177022921-72f4601e-6919-4a68-a6ae-108f6e5fd2d0.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;mollang 이라는 루트 앱에서 라우팅될 대표 주소를 설정하고, 하위 주소에 해당하는 녀석들을 include하여 포함시킨다.&lt;br&gt;
좌측 루트 앱에 /account, 우측 accountapp 서브 url /hello_world 설정했으므로 위와 같이 접근이 가능하다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[2. 무작정 장고로 사이드 프로젝트 만들기 - 장고 패턴]]></title><description><![CDATA[django 패턴 django 프로젝트의 패턴은 mvc 구조를 따라간다고 한다. M odel V iew C ontroller Model 단에서는 django와 데이터베이스가 연결되어 상호작용을 하는 역할을 한다. 데이터베이스의 컬럼이 django…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/02.pattern/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/02.pattern/</guid><pubDate>Fri, 01 Jul 2022 15:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;django-패턴&quot; style=&quot;position:relative;&quot;&gt;django 패턴&lt;a href=&quot;#django-%ED%8C%A8%ED%84%B4&quot; aria-label=&quot;django 패턴 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;django 프로젝트의 패턴은 mvc 구조를 따라간다고 한다.&lt;br&gt;
M odel&lt;br&gt;
V iew&lt;br&gt;
C ontroller&lt;/p&gt;
&lt;p&gt;Model 단에서는 django와 데이터베이스가 연결되어 상호작용을 하는 역할을 한다. 데이터베이스의 컬럼이 django 내부에서 개발자가 지정한 모델 형태에 맞게 매칭된다고 이해했다.&lt;br&gt;
예를 들어 유저라는 모델에 유저 이름, 유저 나이, 유저 핸드폰 번호가 있다면 데이터베이스의 컬럼으로는 userName, userAge, userPhone 컬럼이 있을 것이다.&lt;/p&gt;
&lt;p&gt;View 단에서는 유저가 django 서버에 요청을 했을 때 일련의 과정을 거쳐서 보여주는 역할을 한다.&lt;br&gt;
요청한 유저가 권한이 있는지, 유효한 정보값을 요청했는지 등 요청자를 체크를 하기도 하고 요청한 페이지가 회원가입 페이지라면 회원가입 페이지에 해당하는 리소스를 만들어 응답을 내려주기도 한다.&lt;/p&gt;
&lt;p&gt;Controller 단은 프론트엔드의 역할을 한다. 유저 인터페이스가 이 부분에 해당하고 django 프레임워크에서 제공하는 템플릿을 사용해 인터페이스를 개발할 수 있다. 아마도 나는 이 템플릿을 사용하지 않고 리액트 어플리케이션을 따로 만들어 대체할 예정이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[1. 무작정 장고로 사이드 프로젝트 만들기 - 환경 세팅]]></title><description><![CDATA[개발 환경 세팅 python IDE 툴인 pycharm을 이용해 python 가상 환경을 만들자. 이렇게 만들어진 폴더 경로 앞에 (env)가 붙는데 이런식으로 격리된 환경을 사용하는 이유는 각 프로젝트마다 python…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/01.setting/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/01.setting/</guid><pubDate>Thu, 30 Jun 2022 15:01:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;개발-환경-세팅&quot; style=&quot;position:relative;&quot;&gt;개발 환경 세팅&lt;a href=&quot;#%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85&quot; aria-label=&quot;개발 환경 세팅 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;python IDE 툴인 pycharm을 이용해 python 가상 환경을 만들자.&lt;br&gt;
이렇게 만들어진 폴더 경로 앞에 (env)가 붙는데 이런식으로 격리된 환경을 사용하는 이유는 각 프로젝트마다 python 프로그램들이 혼용되어 사용된다면 버전 관리도 어렵고 충돌나기 쉽다.&lt;br&gt;
(npm 라이브러리들도 가상 환경을 만들어 관리가 가능하면 좋겠다… 이미 있나?)&lt;/p&gt;
&lt;p&gt;pycharm을 이용해 python 가상환경 프로젝트를 어렵지 않게 만들었다. 그리고 여기에 django를 설치.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pip install django&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;***블로그를 만들기 위한 스펙으로 django를 선택한 이유는 회사에서 사용 중인 프레임워크이기도 하고 어디서부터 시작해야할지 모를 python 공부를 겸사겸사 해 보고 싶어서 선택하였다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/176993297-a6d5e066-4ed5-4351-bd57-e6e2103d8137.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;django를 설치하면 manage.py 파일이 생성되는데 이 파일을 이용해 django 서버를 실행할 수 있다!&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;python manage.py runserver&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/176993389-544d9513-880f-4aa6-9ed7-34b29bbd4297.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;프레임워크를 사용할 때마다 느끼지만 명령어 몇 번에 뚝딱뚝딱 만들어지는 것들이 참 신기하고 편하다. 그리고 가끔은 제대로된 원리를 파악하지 않고 지나가기 쉬워져 독이 되는 묘한 불안감이 들지만 일단 진행해 보자.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[0. 무작정 장고로 사이드 프로젝트 만들기 - 간단 기획]]></title><description><![CDATA[…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/django/0.우당탕탕 기획(update.220721)/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/django/0.우당탕탕 기획(update.220721)/</guid><pubDate>Thu, 30 Jun 2022 15:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;어떤-컨텐츠를-할까&quot; style=&quot;position:relative;&quot;&gt;어떤 컨텐츠를 할까&lt;a href=&quot;#%EC%96%B4%EB%96%A4-%EC%BB%A8%ED%85%90%EC%B8%A0%EB%A5%BC-%ED%95%A0%EA%B9%8C&quot; aria-label=&quot;어떤 컨텐츠를 할까 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;떠오르는 아이디어가 없을 때 가장 기획하기 쉬운 개발 블로그를 목표로 메뉴를 구성했는데 이미 깃헙페이지로 배포된 개발 블로그가 존재하니… 이번엔 다른 컨텐츠를 만들어보고 싶어졌다. 뭔가 귀엽고(?) 유용하면서 공부도 될 것 같은 컨텐츠를…&lt;br&gt;
그러다보니 접근하게 된 주제가 집에서 기르고 있는 반려동물이 되었다.&lt;br&gt;
조금은 대중적이지 않은 반려동물로 토끼를 키우고 있다. 카페는 나름 활발한 곳이 개설되어있지만 용품 사이트도 병원 정보도 간신히 간신히 카페 공지사항에 정리가 되어있는 느낌이다.&lt;br&gt;
초식이들 특성상 입맛이 까다로운 아이들이 많고 입맛의 변수 또한 많기 때문에 많은 초식 동거인들이 겪는 고충은 정보의 부재라고 생각한다. 우선 나부터도 그랬으니까.&lt;br&gt;
어떤 병원이 어디에 있는지, 그 병원은 어떤 진료들을 하는지.&lt;br&gt;
어떤 용품 사이트에 뭐가 있는지.&lt;br&gt;
어떤 건초 사이트에 어떤 건초 종류를 잘 먹었는지.&lt;br&gt;
이런 공유 정보들만 모아둔 초식이들 주변 관리 사이트가 있다면 좋겠다는 생각이 들었다. 그래서 가제도 “초식이 주변 관리 사이트”&lt;br&gt;
너무 대충인가? 🤨&lt;/p&gt;
&lt;h3 id=&quot;러프한-구성&quot; style=&quot;position:relative;&quot;&gt;러프한 구성&lt;a href=&quot;#%EB%9F%AC%ED%94%84%ED%95%9C-%EA%B5%AC%EC%84%B1&quot; aria-label=&quot;러프한 구성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;메뉴 구성은&lt;br&gt;
홈 -&gt; 사이트 대문용도로 이 사이트가 뭔지에 대한 소개 내용이 들어갈 것&lt;br&gt;
업체 등록 -&gt; 업체를 등록할 수 있는 글쓰기 페이지/리스트 페이지&lt;br&gt;
업체 리뷰 -&gt; 등록된 업체를 리뷰하는 글쓰기 페이지/리스트 페이지&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/179135264-f9f67c22-4dd1-4fc5-807e-9fb15c0a2843.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/179135362-63804467-9652-41c9-9589-6e973dd9bcc9.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/179135379-aa344d55-25ee-4f33-b4cb-48fd52f2858c.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;기획-초안-마지막-업데이트일-22-07-21&quot; style=&quot;position:relative;&quot;&gt;기획 초안 (마지막 업데이트일: 22-07-21)&lt;a href=&quot;#%EA%B8%B0%ED%9A%8D-%EC%B4%88%EC%95%88-%EB%A7%88%EC%A7%80%EB%A7%89-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%9D%BC-22-07-21&quot; aria-label=&quot;기획 초안 마지막 업데이트일 22 07 21 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&quot;업체-등록-리스트-화면&quot; style=&quot;position:relative;&quot;&gt;업체 등록 리스트 화면&lt;a href=&quot;#%EC%97%85%EC%B2%B4-%EB%93%B1%EB%A1%9D-%EB%A6%AC%EC%8A%A4%ED%8A%B8-%ED%99%94%EB%A9%B4&quot; aria-label=&quot;업체 등록 리스트 화면 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/180135599-83278985-5a7c-422e-933a-82907cdf1092.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;업체-추가-화면&quot; style=&quot;position:relative;&quot;&gt;업체 추가 화면&lt;a href=&quot;#%EC%97%85%EC%B2%B4-%EC%B6%94%EA%B0%80-%ED%99%94%EB%A9%B4&quot; aria-label=&quot;업체 추가 화면 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/180135564-2af8599d-acef-4640-bd9d-388f11398b0b.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;업체-리뷰-리스트-화면&quot; style=&quot;position:relative;&quot;&gt;업체 리뷰 리스트 화면&lt;a href=&quot;#%EC%97%85%EC%B2%B4-%EB%A6%AC%EB%B7%B0-%EB%A6%AC%EC%8A%A4%ED%8A%B8-%ED%99%94%EB%A9%B4&quot; aria-label=&quot;업체 리뷰 리스트 화면 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/180135670-23ffad55-fa9f-43a3-9ab8-819ad6d431c4.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;업체-리뷰-상세-화면&quot; style=&quot;position:relative;&quot;&gt;업체 리뷰 상세 화면&lt;a href=&quot;#%EC%97%85%EC%B2%B4-%EB%A6%AC%EB%B7%B0-%EC%83%81%EC%84%B8-%ED%99%94%EB%A9%B4&quot; aria-label=&quot;업체 리뷰 상세 화면 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/180135710-ec41ed64-08b9-4eaa-9e4c-69efcfb26242.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;업체-리뷰-글쓰기-화면&quot; style=&quot;position:relative;&quot;&gt;업체 리뷰 글쓰기 화면&lt;a href=&quot;#%EC%97%85%EC%B2%B4-%EB%A6%AC%EB%B7%B0-%EA%B8%80%EC%93%B0%EA%B8%B0-%ED%99%94%EB%A9%B4&quot; aria-label=&quot;업체 리뷰 글쓰기 화면 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/181404598-9829b08d-d2a6-4484-8da1-e290d91fad00.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[그라파나 iframe deny 에러]]></title><description><![CDATA[개발 환경 : 쿠버네티스에 그라파나와 웹서버인 nginx가 있고 리액트 어플리케이션 서버인 http://localhost:3000은 https://${쿠버네티스 배포용 ip}:{쿠버네티스 배포용 port…]]></description><link>https://ksy8230.github.io/todayILearned/bugLists/그라파나 iframe deny 에러/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/bugLists/그라파나 iframe deny 에러/</guid><pubDate>Wed, 04 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;개발 환경 : 쿠버네티스에 그라파나와 웹서버인 nginx가 있고 리액트 어플리케이션 서버인 &lt;a href=&quot;http://localhost:3000%EC%9D%80&quot;&gt;http://localhost:3000은&lt;/a&gt; https://${쿠버네티스 배포용 ip}:{쿠버네티스 배포용 port}로 프록시 서버가 연결되어 있다.&lt;/p&gt;
&lt;p&gt;이슈 : 쿠버네티스에 올라가 있는 그라파나 대시보드 화면 URL을 웹에서 iframe 태그에 삽입하니 에러가 뜬다.&lt;br&gt;
원인 : X-Frame-Options DENY 설정 때문에 iframe을 통해 접근할 수 없는 문제.&lt;br&gt;
해결 : 그라파나의 설정 파일 중 grafana.ini 파일이 있는데 거기서 &lt;code class=&quot;language-text&quot;&gt;allow_embedding = true&lt;/code&gt; 로 설정.&lt;/p&gt;
&lt;p&gt;또 다른 이슈 : X-Frame-Options는 해결됐는데 이번엔 외부에서 접속할 수 있는 그라파나 주소가 필요했다. 당시엔 localhost:{port}로, 그라파나가 로컬에만 떠있는 상태.&lt;br&gt;
해결1-1 : grafana 설정에서 루트 url뒤에 /grafana/ 주소 설정하여 프록시가 읽어들일 수 있는 엔트리포인트 주기.&lt;br&gt;
해결1-1 : nginx 설정에서 /grafana/ 주소로 웹에서 요청시 쿠버네티스의 그라파나 주소로 연결되도록 프록시 설정.&lt;br&gt;
해결1-2 : 쿠버네티스에서 그라파나를 재시작할 때마다 대시보드 주소가 바뀌기 때문에 여기에 맞춰서 nginx가 바라보고 있는 그라파나 프록시 주소도 함께 업데이트가 되어야 한다. 그걸 간과하고 그라파나만 백날 올렸다 내렸다하니… 프록시가 제대로 먹힐리 없었다.&lt;/p&gt;
&lt;p&gt;grafana.yml&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;root_url = %(protocol)s&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//%(domain)s&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;%(http_port)s/grafana/
serve_from_sub_path = true&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;nginx.yml&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;location /grafana/ &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
proxy_set_header Host $http_host;
proxy_set_header X&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;Real&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;IP $remote_addr;
proxy_set_header X&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;Forwarded&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;For $proxy_add_x_forwarded_for;
proxy_set_header X&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;Forwarded&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;Proto $scheme;
proxy_pass         http&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//grafana; // 상단에서 stream 설정되어 있음
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또 다른 이슈 : 웹에서 프록시로 설정된 그라파나 주소가 뜨긴 뜨는데 계속 로그인창만 뜬다.&lt;br&gt;
원인 : 그라파나 자체 내에서 로그인된 사용자만 그라파나 대시보드를 보도록 리다이렉트 시키는 중.&lt;br&gt;
해결 : grafana.ini 파일에서 [auth.anonymous] &lt;code class=&quot;language-text&quot;&gt;enabled = true&lt;/code&gt; 로 설정하여 익명의 사용자도 해당 url에 접근 가능하도록 설정.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;결론 프록시 서버에 대한 이해가 부족했다…&lt;/p&gt;</content:encoded></item><item><title><![CDATA[npm 빌드 중 erroe code 1]]></title><description><![CDATA[npm 환경에서 빌드 중 error code 1을 맞이했다. 원인은 개발 도중 npm 을 이용해 설치시킨 특정 라이브러리의 버전과 package.json…]]></description><link>https://ksy8230.github.io/todayILearned/bugLists/error code 1/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/bugLists/error code 1/</guid><pubDate>Mon, 14 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;npm 환경에서 빌드 중 error code 1을 맞이했다.&lt;br&gt;
원인은 개발 도중 npm 을 이용해 설치시킨 특정 라이브러리의 버전과 package.json이 맞지 않아 빌드 도중 버전 에러가 나서 생긴 문제얐다.&lt;br&gt;
노드모듈만 아무리 삭제해도 이미 남아있는 캐시를 npm이 바라보고 설치하기 때문에 캐시 자체를 날려줘야한다.&lt;/p&gt;
&lt;p&gt;npm cache clean —force
package-lock.json 파일 삭제
npm install 다시 해 보기&lt;/p&gt;</content:encoded></item><item><title><![CDATA[CRA react 프로젝트에서 proxy 설정 방법]]></title><description><![CDATA[현상 크로스 도메인 이슈로 개발 환경인 localhost:3000 리액트 웹서버에서 다른 도메인을 가진 api 요청을 못하고 있다. 해결 image browser에서 React dev server(http://localhost:300…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/react-proxy/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/react-proxy/</guid><pubDate>Fri, 11 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;현상&quot; style=&quot;position:relative;&quot;&gt;현상&lt;a href=&quot;#%ED%98%84%EC%83%81&quot; aria-label=&quot;현상 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;크로스 도메인 이슈로 개발 환경인 localhost:3000 리액트 웹서버에서 다른 도메인을 가진 api 요청을 못하고 있다.&lt;/p&gt;
&lt;h3 id=&quot;해결&quot; style=&quot;position:relative;&quot;&gt;해결&lt;a href=&quot;#%ED%95%B4%EA%B2%B0&quot; aria-label=&quot;해결 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/157851425-d746b9a9-d0bb-48f9-8fa4-1345a46d1e56.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;//package.json
{
  ...,
  &quot;proxy&quot;: &quot;http://apiserver.com:5000/&quot;,
  ...,
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;browser에서 React dev server(&lt;a href=&quot;http://localhost:3000)%EC%9C%BC%EB%A1%9C&quot;&gt;http://localhost:3000)으로&lt;/a&gt; 요청을 보낸다.&lt;br&gt;
React dev server가 해당 요청을 api server(&lt;a href=&quot;http://apiserver.com:5000/)%EC%97%90&quot;&gt;http://apiserver.com:5000/)에&lt;/a&gt; 보낸다.&lt;br&gt;
api server가 response를 react dev server에게 전달한다.&lt;br&gt;
React dev server는 이 response를 그대로 browser에게 전달해준다.&lt;br&gt;
이때, browser 입장에서는 api server가 아닌, React dev server가 응답한 것 처럼 보이게 된다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://velog.io/@tw4204/React-%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-CORS%EB%A5%BC-%EC%9C%84%ED%95%9C-proxy-%EC%84%A4%EC%A0%95&quot;&gt;참고&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[vscode에서 crlf 파일들을 일괄로 lf파일로 변환하는 법]]></title><description><![CDATA[에러 문구 image Cannot connect to the Docker daemon at tcp://localhost:2375. Is the docker daemon running? 자체 호스팅된 Gitlab 및 Runner를 사용하고 있고 dind…]]></description><link>https://ksy8230.github.io/todayILearned/bugLists/gitlab_docker_connection_error/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/bugLists/gitlab_docker_connection_error/</guid><pubDate>Fri, 25 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;에러-문구&quot; style=&quot;position:relative;&quot;&gt;에러 문구&lt;a href=&quot;#%EC%97%90%EB%9F%AC-%EB%AC%B8%EA%B5%AC&quot; aria-label=&quot;에러 문구 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/155658590-bf6a9f17-8dbd-4851-a889-63f9a2409ea9.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cannot connect to the Docker daemon at tcp://localhost:2375. Is the docker daemon running?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;자체 호스팅된 Gitlab 및 Runner를 사용하고 있고 dind를 사용하여 CI/CD 빌드를 실행하려고 했는데 위와 같은 에러가 떴다.&lt;/p&gt;
&lt;h3 id=&quot;찾아본-방법&quot; style=&quot;position:relative;&quot;&gt;찾아본 방법&lt;a href=&quot;#%EC%B0%BE%EC%95%84%EB%B3%B8-%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;찾아본 방법 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;dind 이미지 버전 문제 확인&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker-build:
  stage: build
  tags:
    - front-ci
  image: docker:stable
  services:
    - name: docker:dind
      command: [&apos;--tls=false&apos;, &apos;--insecure-registry=${DOCKER_REGISTRY}&apos;]
  variables:
    DOCKER_HOST: tcp://docker:2375/
    DOCKER_DRIVER: overlay2
    DOCKER_TLS_CERTDIR: &apos;&apos;
  before_script:
    - docker login -u &quot;$CI_REGISTRY_USER&quot; -p &quot;$CI_REGISTRY_PASSWORD&quot; $CI_REGISTRY

    ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;docker-build 스테이지에서는 프론트 소스를 Dockerfile을 이용해 이미지로 만든 후 팀 내부 도커 레지스트리에 배포하는 job을 수행한다.&lt;br&gt;
그런데 깃랩이 도커를 실행하지 못하는 상황…&lt;br&gt;
깃랩이 올릴 도커를 제대로 인식시켜주기 위해 image 버전과 services의 이름명, DOCKER_HOST를 맞춰주면 될까? 하여 시도해봤으나 이 문제는 아니었다.&lt;br&gt;
다만 이 방법의 구글링으로 알게된 사실은 —tls=false 명령어 실행을 통해 tls를 비활성화 시켜서 도커 빌드 전에 도커를 먼저 올리는 작업을 의도하는 것이었다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SSL(TLS) : Secure Socket Layer의 약자로 웹서버와 웹 브라우저 간의 암호화 통신을 위하여 응용계층과 TCP/IP 계층에서 동작하는 프로토콜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://gitlab.com/gitlab-org/gitlab-runner/-/issues/27300&quot;&gt;참고 링크&lt;/a&gt;&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;깃랩 러너 설정 확인&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;[runners.docker]
    tls_verify = false
    image = &quot;alpine&quot;
    privileged = true //&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사용 중인 깃랩 러너의 privileged 옵션값을 true로 수정하니 문제가 해결됐다.&lt;br&gt;
이해하기로는 깃랩이 도커 컨테이너 러너를 이용해 도커 이미지를 만들 도커를 조작하는 것인데 내부 도커까지 권한이 내려가지 못한 것이었다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gitlab.com/gitlab-org/gitlab-runner/-/issues/1986&quot;&gt;참고 링크&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[빅오 표기법]]></title><description><![CDATA[…]]></description><link>https://ksy8230.github.io/todayILearned/algorithm/bigO/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/algorithm/bigO/</guid><pubDate>Sun, 20 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이번 방통대 학기부터 알고리즘을 듣게 되었는데 우연히 유데미에서 저렴한 가격으로 자바스크립트를 이용해 알고리즘 강의가 풀린 걸 발견했다. 🥰&lt;br&gt;
학기 강의만 들으면 어려울 것 같았는데 나에게 익숙한 언어로 다른 강의도 함께 병행하면 도움이 될 것 같다.&lt;/p&gt;
&lt;h3 id=&quot;빅오-표기법이란&quot; style=&quot;position:relative;&quot;&gt;빅오 표기법이란&lt;a href=&quot;#%EB%B9%85%EC%98%A4-%ED%91%9C%EA%B8%B0%EB%B2%95%EC%9D%B4%EB%9E%80&quot; aria-label=&quot;빅오 표기법이란 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;알고리즘의 효율성을 표기해주는 표기법이다. 알고리즘의 효율성은 데이터 개수(n)가 주어졌을 때 덧셈, 뺄셈, 곱셈 같은 기본 연산의 횟수를 의미한다.&lt;br&gt;
빅오 표기법은 알고리즘의 시간 복잡도와 공간 복잡도를 나타내는데 주로 사용된다.&lt;br&gt;
(시간 복잡도는 알고리즘의 시간 효율성을 의미하고, 공간 복잡도는 알고리즘의 공간(메모리) 효율성을 의미한다.)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/154831296-dc1994da-af15-4c35-bc02-57e48279714b.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;시간-복잡도&quot; style=&quot;position:relative;&quot;&gt;시간 복잡도&lt;a href=&quot;#%EC%8B%9C%EA%B0%84-%EB%B3%B5%EC%9E%A1%EB%8F%84&quot; aria-label=&quot;시간 복잡도 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;시간의 효율성&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;O(n) : 실행 비율이 1:1로 늘어나는 것.&lt;/p&gt;
&lt;p&gt;가장 쉬운 예로 변수 n 값을 받았을 때 1부터 n까지를 더하는 루프 함수가 있다면 이 경우 빅O(n) 효율성을 가진 시간 복잡도를 의미한다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;O(n^2) : 실행 시간이 n^2으로 늘어나는 것.&lt;br&gt;
&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/154831345-12c37cef-5606-4e56-bed5-0e37a104a85a.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;루프문의 중첩된 함수의 경우 빅오 n^2(제곱) 효율성을 가진 시간 복잡도를 의미한다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;O(log n) : 실행 시간이 로그형으로 늘어나는 것.&lt;br&gt;
데이터양이 많아져도 시간이 조금씩 늘어나며 시간 복잡도에서 O(log n)이 나오면 좋은 시간 효율성을 가졌다고 본다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;공간-복잡도&quot; style=&quot;position:relative;&quot;&gt;공간 복잡도&lt;a href=&quot;#%EA%B3%B5%EA%B0%84-%EB%B3%B5%EC%9E%A1%EB%8F%84&quot; aria-label=&quot;공간 복잡도 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;공간의 효율성&lt;/li&gt;
&lt;li&gt;undefined, boolean, number : 입력의 크기와 상관 없이 불변의 공간을 갖는다.&lt;/li&gt;
&lt;li&gt;string, 객체, 배열: o(n) 공간 복잡도를 갖는다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;공간 복잡도의 예시를 보자.&lt;/p&gt;
&lt;p&gt;예시1&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;function logUpTo(n) {
    for (var i = 1; i &amp;lt;= n; i++) {
        console.log(i);
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드의 공간 복잡도는 o(1)이 된다. 이유는 루프문을 몇번을 돌아도 함수 내부에 할당된 변수인 var 공간이 변하지 않기 때문이다.&lt;/p&gt;
&lt;p&gt;예시2&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;function onlyElementsAtEvenIndex(array) {
    var newArray = Array(Math.ceil(array.length / 2));
    for (var i = 0; i &amp;lt; array.length; i++) {
        if (i % 2 === 0) {
            newArray[i / 2] = array[i];
        }
    }
    return newArray;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드의 공간 복잡도는 o(n)이 된다. 이유는 루프문을 돌 때마다 배열에 할당된 공간이 매개변수에 맞게 늘어나기 때문이다.&lt;/p&gt;
&lt;p&gt;예시3&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;function subtotals(array) {
    var subtotalArray = Array(array.length);
    for (var i = 0; i &amp;lt; array.length; i++) {
        var subtotal = 0;
        for (var j = 0; j &amp;lt;= i; j++) {
            subtotal += array[j];
        }
        subtotalArray[i] = subtotal;
    }
    return subtotalArray;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드의 공간 복잡도는 o(n)이 된다. 함수 내부에 할당된 변수는 i, j가 이중 루프문으로 배열을 증가시키지만 어쨌든 리턴되는 결과값은 이중으로 돌고 나온 하나의 배열이기 때문이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[쿠버네티스란]]></title><description><![CDATA[목표 사내에서 앞으로 작업될 환경이 쿠버네티스로 이루어진다고 하는데 하나도 못 알아듣겠어서 혼자 학습해 본다. 쿠버네티스란? 컨테이너 오케스트레이션.
컨테이너를 빠르게 배포/확장이 가능하고 관리를 자동화시켜주는 오픈소스 플랫폼이다. 201…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/kubernetes/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/kubernetes/</guid><pubDate>Tue, 15 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;목표&quot; style=&quot;position:relative;&quot;&gt;목표&lt;a href=&quot;#%EB%AA%A9%ED%91%9C&quot; aria-label=&quot;목표 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;사내에서 앞으로 작업될 환경이 쿠버네티스로 이루어진다고 하는데 하나도 못 알아듣겠어서 혼자 학습해 본다.&lt;/p&gt;
&lt;h3 id=&quot;쿠버네티스란&quot; style=&quot;position:relative;&quot;&gt;쿠버네티스란?&lt;a href=&quot;#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EB%9E%80&quot; aria-label=&quot;쿠버네티스란 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;컨테이너 오케스트레이션.
컨테이너를 빠르게 배포/확장이 가능하고 관리를 자동화시켜주는 오픈소스 플랫폼이다.&lt;br&gt;
2015년도에 구글에 의해 출시됐고, 현재 아주 거대한 커뮤니티를 형성 중이다.&lt;br&gt;
하나의 서버가 아닌 굉장히 많은 서버에서 도커를 사용하게 된다면 우리는 가장 이상적인 상태의 서버를 선별해 해당 서버에 도커 컨테이너를 생성해야 한다.&lt;br&gt;
이 행위를 사람이 일일이 그 많은 서버들에게 접근해 남는 자원이 많은지 확인하는 과정은 굉장히 비효율적인데… 이것을 쿠버네티스가 대신 해 준다고 보면 된다.&lt;/p&gt;
&lt;h3 id=&quot;들어가기-전에-가상머신-vs-컨테이너-차이부터&quot; style=&quot;position:relative;&quot;&gt;들어가기 전에 가상머신 vs 컨테이너 차이부터&lt;a href=&quot;#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84%EC%97%90-%EA%B0%80%EC%83%81%EB%A8%B8%EC%8B%A0-vs-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%B0%A8%EC%9D%B4%EB%B6%80%ED%84%B0&quot; aria-label=&quot;들어가기 전에 가상머신 vs 컨테이너 차이부터 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&quot;가상머신&quot; style=&quot;position:relative;&quot;&gt;가상머신&lt;a href=&quot;#%EA%B0%80%EC%83%81%EB%A8%B8%EC%8B%A0&quot; aria-label=&quot;가상머신 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/154515156-444cedf1-a47e-4f9d-89ce-59297db14438.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;가상머신의 구조는 위의 이미지와 같이, 하드웨어 위에 하이퍼바이저를 두고 독립된 환경의 운영 시스템을 여러개 생성한다. 이런 구조의 장점은 각 환경마다 필요한 리소스가 많거나 적은 경우에 맞춰서 하드웨어 자원을 할당시켜줄 수 있다는 점에 있다. 하지만 특정 머신이 다운되어 버리면? 😕&lt;br&gt;
이런 경우를 방지하기 위해 수평 확장 형식으로 아래와 같이 필요한 머신을 수평적으로 여러개 생성시켜주는 방식을 요즘은 많이 쓴다고 한다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/154516264-3433270d-22dc-458f-a5bb-95886f1a7f69.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;컨테이너&quot; style=&quot;position:relative;&quot;&gt;컨테이너&lt;a href=&quot;#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88&quot; aria-label=&quot;컨테이너 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;컨테이너 방식의 구조는 아래와 같다.&lt;/p&gt;
&lt;p&gt;컨테이너|컨테이너|…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;도커&lt;/li&gt;
&lt;li&gt;호스트 운영체제&lt;/li&gt;
&lt;li&gt;하드웨어&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;컨테이너는 가상머신과는 다르게 머신을 생성할 때마다 운영체제를 설치할 필요가 없으므로 일단 가볍다.&lt;br&gt;
가볍기 때문에 수평확장의 경우도 당연히 컨테이너로 만든 어플리케이션이 빠르게 확산되고 빠르게 축소되는 이점을 가져간다.&lt;/p&gt;
&lt;p&gt;즉, 컨테이너 방식은 배포를 효율적으로 할 수 있다.&lt;br&gt;
그런데 만일 컨테이너들을 수평 확장시키고 있는 서버 자체에 오류가 생겨버리면 어떡할까?&lt;br&gt;
이 경우를 대비하기 위해 나온 것이 멀티 호스트 도커 플랫폼이다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/154518497-f3f72350-1776-4eb9-a0cf-a35bc03a6bee.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;하지만 여전히 문제는 존재한다. 서버를 여러대 뒀지만 특정 컨테이너를 서버에 할당시켜야할 때 그 기준을 사람이 일일이 서버마다 체크해서 할당시켜야하는 번거로움이 생겼다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/24996316/154519434-bbe896a6-316f-46e8-a0d2-6c8389ac3a10.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;초반부에 나온 쿠버네티스가 이것을 해결해 준다. 컨트롤 패널이라는 마스터 서버가 다른 일꾼 서버들을 관리해 주며 넉넉한 자원을 가진 서버를 마스터 서버가 알아서 찾아서 추가로 더 필요한 컨테이너를 똑똑하게 복제해서 넣어준다.&lt;/p&gt;
&lt;h3 id=&quot;용어-정리&quot; style=&quot;position:relative;&quot;&gt;용어 정리&lt;a href=&quot;#%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC&quot; aria-label=&quot;용어 정리 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;크게 마스터 노드, 워커 노드 각각에 관련된 용어로 분류하여 정리해 보자.&lt;/p&gt;
&lt;h4 id=&quot;마스터-관련&quot; style=&quot;position:relative;&quot;&gt;마스터 관련&lt;a href=&quot;#%EB%A7%88%EC%8A%A4%ED%84%B0-%EA%B4%80%EB%A0%A8&quot; aria-label=&quot;마스터 관련 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;kube-apiserver, 쿠브-api서버: 마스터로 전달되는 모든 요청을 받아드리는 REST API 서버&lt;br&gt;
etcd: 클러스터내 모든 메타 정보를 저장하는 저장소&lt;br&gt;
kube-scheduler: 사용자 요청에 따라 적절하게 컨테이너를 워커 노드에 배치하는 스케줄러&lt;br&gt;
kube-controller-manager: 현재 상태와 바라는 상태를 지속적으로 확인하며 특정 이벤트에 따라 특정 동작을 수행하는 컨트롤러&lt;br&gt;
cloud-controller-manager: 클라우드 플랫폼(ex. AWS)에 특화된 리소스를 제어하는 클라우드 컨트롤러&lt;/p&gt;
&lt;h4 id=&quot;워커-관련&quot; style=&quot;position:relative;&quot;&gt;워커 관련&lt;a href=&quot;#%EC%9B%8C%EC%BB%A4-%EA%B4%80%EB%A0%A8&quot; aria-label=&quot;워커 관련 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;kubelet: 마스터 명령에 따라 컨테이너의 라이프 사이클을 관리하는 노드 관리자로 각 노드에서 실행되는 메인&lt;br&gt;
kube-proxy: 컨테이너의 네트워킹을 책임지는 프록시&lt;br&gt;
container runtime: 실제 컨테이너를 실행하는 컨테이너 실행 환경&lt;/p&gt;
&lt;h3 id=&quot;도움-받은-자료&quot; style=&quot;position:relative;&quot;&gt;도움 받은 자료&lt;a href=&quot;#%EB%8F%84%EC%9B%80-%EB%B0%9B%EC%9D%80-%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;도움 받은 자료 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=Sj9Z6-w1VUE&amp;#x26;list=PLApuRlvrZKohaBHvXAOhUD-RxD0uQ3z0c&amp;#x26;index=2&quot;&gt;따베쿠&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React 프로젝트 CRA 없이 세팅하기]]></title><description><![CDATA[회사에서 프로젝트 용량 줄이기 작업을 하면서 내가 만든 프로젝트의 번들링에 대한 이해도가 부족하다는 생각이 문득 들었다. CRA (Create Reat App…]]></description><link>https://ksy8230.github.io/todayILearned/setting/react/without-CRA/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/setting/react/without-CRA/</guid><pubDate>Sun, 06 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;회사에서 프로젝트 용량 줄이기 작업을 하면서 내가 만든 프로젝트의 번들링에 대한 이해도가 부족하다는 생각이 문득 들었다. CRA (Create Reat App) 라는 리액트 보일러 프로젝트 명령어로 주로 프로젝트를 만들어서 활용했는데 이 명령어 하나면 웹팩과 바벨이 자동으로 포함되어 프로젝트 환경을 구성해 주기 때문이다.&lt;/p&gt;
&lt;p&gt;이번에는 웹팩과 바벨로 리액트 프로젝트를 어떻게 구성할 수 있는지 CRA 없이 환경 세팅을 해 보자.&lt;/p&gt;
&lt;h3 id=&quot;웹팩과-바벨&quot; style=&quot;position:relative;&quot;&gt;웹팩과 바벨&lt;a href=&quot;#%EC%9B%B9%ED%8C%A9%EA%B3%BC-%EB%B0%94%EB%B2%A8&quot; aria-label=&quot;웹팩과 바벨 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&quot;웹팩&quot; style=&quot;position:relative;&quot;&gt;웹팩&lt;a href=&quot;#%EC%9B%B9%ED%8C%A9&quot; aria-label=&quot;웹팩 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;웹팩이란 웹페이지를 띄우기 위해 사용되는 모든 자원들을 하나의 자바스크립트 코드로 번들링해 주는 라이브러리이다. 그림과 같이 자원들에는 js, css, image와 같은 것들이 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/652edc1768a7c11ec41a81de7cf1d252/f8402/image1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAc6daRYjL//EABgQAAIDAAAAAAAAAAAAAAAAAAACERIg/9oACAEBAAEFAh6zj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIv/aAAgBAQAGPwIlf//EABkQAAIDAQAAAAAAAAAAAAAAAAARARAhQf/aAAgBAQABPyGUYtpdMJv/2gAMAwEAAgADAAAAEDPv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAQQDAAAAAAAAAAAAAAAAEAABITFhcYH/2gAIAQEAAT8Qo3K7GZBVj//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;웹팩&quot;
        title=&quot;웹팩&quot;
        src=&quot;/todayILearned/static/652edc1768a7c11ec41a81de7cf1d252/828fb/image1.jpg&quot;
        srcset=&quot;/todayILearned/static/652edc1768a7c11ec41a81de7cf1d252/ff44c/image1.jpg 158w,
/todayILearned/static/652edc1768a7c11ec41a81de7cf1d252/a6688/image1.jpg 315w,
/todayILearned/static/652edc1768a7c11ec41a81de7cf1d252/828fb/image1.jpg 630w,
/todayILearned/static/652edc1768a7c11ec41a81de7cf1d252/0ede0/image1.jpg 945w,
/todayILearned/static/652edc1768a7c11ec41a81de7cf1d252/f8402/image1.jpg 1066w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그림과 같이 entry js 파일부터 시작해 이 파일이 참조하는 모듈 A를 추적하고 모듈 A가 참조하는 다른 모듈 B를 추적하는 식으로 꼬리 물기와 같이 이어진 의존성을 조사해 깔끔하게 하나로 묶인 js 파일을 생성해 준다.&lt;/p&gt;
&lt;p&gt;웹팩의 장점을 정리해 보자면 아래와 같다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;여러 파일의 자바스크립트 코드를 압축하여 로딩하기 때문에 화면 로드 시 자원을 여러번 요청하지 않고 한번에 받아올 수 있어 네트워크 요청을 최소화한다.&lt;/li&gt;
&lt;li&gt;모듈 단위로 개발이 가능해 가독성과 유지보수가 쉽다.&lt;/li&gt;
&lt;li&gt;최신 자바스크립트 문법을 지원하지 않는 브라우저에서 사용 가능한 문법으로 쉽게 변환시켜준다. 이부분은 바벨과도 연관이 깊다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;바벨&quot; style=&quot;position:relative;&quot;&gt;바벨&lt;a href=&quot;#%EB%B0%94%EB%B2%A8&quot; aria-label=&quot;바벨 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;다양한 브라우저들의 호환성을 지원하기 위해 사용되는 자바스크립트의 컴파일러이다.&lt;br&gt;
바벨은 구형 문법 자바스크립 코드를 만들어내기 위해 파싱 -&gt; 변환 -&gt; 출력의 단계를 거친다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;파싱 : 코드를 읽고 추상 구문 트리로 변환&lt;/li&gt;
&lt;li&gt;변환 : 추상 구문 트리를 해당 문법 코드로 변경&lt;/li&gt;
&lt;li&gt;출력 : 변경된 결과물을 출력&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2번 변환 단계를 담당하는 것이 바로 바벨 플러그인이다. 플러그인은 어떤 코드를 어떻게 변환할지에 대한 규칙을 정의한다. 그리고 플러그인들을 목적에 따라 묶어놓은 세트를 preset(프리셋)이라고 한다.&lt;/p&gt;
&lt;p&gt;현 포스팅에서 코드를 변환하는 역할은 웹팩이 담당하기 때문에 여기서 사용되는 babelrc 파일의 역할은 babel에게 ‘설치한 라이브러리들을 사용할 것이다’ 알려주기 위한 용도로 쓰인다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;babelrc&quot;&gt;&lt;pre class=&quot;language-babelrc&quot;&gt;&lt;code class=&quot;language-babelrc&quot;&gt;// .babelrc
{
  &amp;quot;presets&amp;quot;: [&amp;quot;@babel/preset-env&amp;quot;, &amp;quot;@babel/preset-react&amp;quot;],
  &amp;quot;plugins&amp;quot;: [],
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;세팅-시작&quot; style=&quot;position:relative;&quot;&gt;세팅 시작&lt;a href=&quot;#%EC%84%B8%ED%8C%85-%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;세팅 시작 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h3 id=&quot;도움-받은-글&quot; style=&quot;position:relative;&quot;&gt;도움 받은 글&lt;a href=&quot;#%EB%8F%84%EC%9B%80-%EB%B0%9B%EC%9D%80-%EA%B8%80&quot; aria-label=&quot;도움 받은 글 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://medium.com/@_diana_lee/cra%EC%97%86%EC%9D%B4-%EB%A6%AC%EC%95%A1%ED%8A%B8-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-feat-%EC%9B%B9%ED%8C%A9-%EB%B0%94%EB%B2%A8-74f5bc3c5da1&quot;&gt;CRA 없이 리액트 설치&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[생활코딩 Docker compose를 이용해 복잡한 도커 컨테이너 제어하기]]></title><description><![CDATA[도커 컴포즈가 무엇인지 궁금해 다시 생활코딩을 찾아갔다. 도커 컴포즈는 쉽게 말하면 shell…]]></description><link>https://ksy8230.github.io/todayILearned/docker/docker-compose/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/docker/docker-compose/</guid><pubDate>Mon, 31 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;도커 컴포즈가 무엇인지 궁금해 다시 생활코딩을 찾아갔다.&lt;br&gt;
도커 컴포즈는 쉽게 말하면 shell에서 치는 복잡한 설치 명령어들을 파일 하나에 담아&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker-compose up&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 한줄로 설치를 완료시키는 기능을 해주는 패키지 파일이다.&lt;br&gt;
해당 강의는 설치형 블로그인 워드프레스를 이용해 예시를 들어 설명해 준다.&lt;/p&gt;
&lt;h3 id=&quot;예시-시나리오&quot; style=&quot;position:relative;&quot;&gt;예시 시나리오&lt;a href=&quot;#%EC%98%88%EC%8B%9C-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4&quot; aria-label=&quot;예시 시나리오 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;아래와 같은 환경을 도커를 이용해 워드프레스를 만든다고 가정하자.&lt;br&gt;
워드프레스 컨테이너가 존재하고 mysql 컨테이너가 존재할 것이다. 그리고 웹브라우저를 통해 워드프레스에 접근하면 워드프레스에 연결된 mysql에서 특정 작업을 처리하고 그 결과를 워드프레스에게 가져온 뒤 다시 웹브라우저에게 응답할 것이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/570dec95b68427bd6a6bb7634d9ce6bf/e8a7f/image1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 28.48101265822785%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQC/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABvwFAP//EABoQAAICAwAAAAAAAAAAAAAAAAIDAAQBEhP/2gAIAQEAAQUCri0Zq7pWwYr/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB4QAAEDBAMAAAAAAAAAAAAAAAEAAhIDERMjIVFh/9oACAEBAAY/AnZHy6VXZwQY+LY6Ruv/xAAaEAACAwEBAAAAAAAAAAAAAAAAEQExQSFR/9oACAEBAAE/IZi4nTRD7EHbBF9k3w//2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAQACAwEAAAAAAAAAAAAAEQEAMSFBYYH/2gAIAQEAAT8QpZoBbK7kOsfYKXU2Dg+5f89WN0EbJ7n/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/570dec95b68427bd6a6bb7634d9ce6bf/828fb/image1.jpg&quot;
        srcset=&quot;/todayILearned/static/570dec95b68427bd6a6bb7634d9ce6bf/ff44c/image1.jpg 158w,
/todayILearned/static/570dec95b68427bd6a6bb7634d9ce6bf/a6688/image1.jpg 315w,
/todayILearned/static/570dec95b68427bd6a6bb7634d9ce6bf/828fb/image1.jpg 630w,
/todayILearned/static/570dec95b68427bd6a6bb7634d9ce6bf/0ede0/image1.jpg 945w,
/todayILearned/static/570dec95b68427bd6a6bb7634d9ce6bf/e8a7f/image1.jpg 1138w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;shell로-설치&quot; style=&quot;position:relative;&quot;&gt;shell로 설치&lt;a href=&quot;#shell%EB%A1%9C-%EC%84%A4%EC%B9%98&quot; aria-label=&quot;shell로 설치 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;도커 컴포즈가 없다면 아래와 같은 설치 명령어를 사용해 위 시나리오 환경을 구성할 수 있을 것이다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;wordpress_net이라는 도커 네트워크 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; network create wordpress_net&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;app 컨테이너와 db 컨테이너는 서로 정보를 주고 받을 네트워크가 필요하다&lt;/li&gt;
&lt;li&gt;wordpress_net을 설치하면 app 컨테이너와 db 컨테이너의 호스트를 ip가 아닌 이름으로 사용 가능하게 해준다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;db 컨테이너 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
run &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;db&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;/db_data:/var/lib/mysql&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MYSQL_ROOT_PASSWORD=123456&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MYSQL_DATABASE=wordpress&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MYSQL_USER=wordpress_user&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MYSQL_PASSWORD=123456&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;--network&lt;/span&gt; wordpress_net &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
mysql:5.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;db라는 이름의 컨테이너가 생성되고 호스트의 $(현재 위치)/db_data 폴더와 컨테이너의 /var/lib/mysql 폴더를 연결한 뒤 mysql 접속을 위한 정보들을 환경변수를 이용해 적어준다. 그리고 앞서 설치한 도커 네트워크로 만든 wordpress_net에 연결한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;app 컨테이너 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    run &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; app &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;/app_data:/var/www/html&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;WORDPRESS_DB_HOST=db&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;WORDPRESS_DB_USER=wordpress_user&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;WORDPRESS_DB_NAME=wordpress&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;WORDPRESS_DB_PASSWORD=123456&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;WORDPRESS_DEBUG=1&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8080&lt;/span&gt;:80 &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;--network&lt;/span&gt; wordpress_net &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
wordpress:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;app 이라는 이름의 컨테이너가 생성되고 호스트의 $(현재 위치)/app_data 폴더와 컨테이너의 /var/www/html 폴더를 연결한 뒤 db 컨테이너에 접속할 정보들을 환경변수를 이용해 적어준다. 그리서 앞서 설치한 도커 네트워크로 만든 wordpress_net에 연결한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;app 컨테이너에 80포트와 호스트의 8080포트를 연결하여 웹 브라우저에서 접근 가능하도록 한다.&lt;/strong&gt; 이말인 즉, db 컨테이너는 호스트의 어떤 포트와도 연결되어 있지 않고 app 컨테이너만 연결이 가능하여 보안상 안전해 진다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;설치가 완료된 환경 구성을 시각적 자료로 표현하자면 아래와 같을 것이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/9366721452576d77bcbd07ca5e9cd8b1/b0abb/image2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100.63291139240506%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHu054HTQGCIWg//8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIAERIDEyH/2gAIAQEAAQUCuAHc5tFirdAMZdTAoeD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAcEAABBAMBAAAAAAAAAAAAAAAAAhESIQEQUYH/2gAIAQEABj8CJZVXG1iL+CU3J9W5Gxj/xAAbEAEBAQEAAwEAAAAAAAAAAAABEQAhMUFhsf/aAAgBAQABPyFNmExK8CcNwT4g2s2zzHvf3B3C6q+M1O0H3uUB63//2gAMAwEAAgADAAAAEBAHAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB4QAQEAAgICAwAAAAAAAAAAAAERACExQVFxkaHB/9oACAEBAAE/EIptR3LxjMQbCL5bv4wRrKJhYArQ7MoVC0NK8vsd52Hf4YFIBN9e5kBUaI/tiMGCFd5//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/9366721452576d77bcbd07ca5e9cd8b1/828fb/image2.jpg&quot;
        srcset=&quot;/todayILearned/static/9366721452576d77bcbd07ca5e9cd8b1/ff44c/image2.jpg 158w,
/todayILearned/static/9366721452576d77bcbd07ca5e9cd8b1/a6688/image2.jpg 315w,
/todayILearned/static/9366721452576d77bcbd07ca5e9cd8b1/828fb/image2.jpg 630w,
/todayILearned/static/9366721452576d77bcbd07ca5e9cd8b1/b0abb/image2.jpg 717w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;docker-composeyml-로-설치&quot; style=&quot;position:relative;&quot;&gt;docker-compose.yml 로 설치&lt;a href=&quot;#docker-composeyml-%EB%A1%9C-%EC%84%A4%EC%B9%98&quot; aria-label=&quot;docker composeyml 로 설치 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;도커 컴포즈 파일을 이용해도 위와 똑같은 설치 환경이 구성된다.&lt;br&gt;
파일 하나와 명령어 하나면 끝.&lt;/p&gt;
&lt;p&gt;docker-compose.yml&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;docker&quot;&gt;&lt;pre class=&quot;language-docker&quot;&gt;&lt;code class=&quot;language-docker&quot;&gt;version: &quot;3.7&quot;

services:
  db:
    image: mysql:5.7
    volumes:
      - ./db_data:/var/lib/mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: 123456
      MYSQL_DATABASE: wordpress
      MYSQL_USER: wordpress_user
      MYSQL_PASSWORD: 123456

  app:
    depends_on:
      - db
    image: wordpress:latest
    volumes:
      - ./app_data:/var/www/html
    ports:
      - &quot;8080:80&quot;
    restart: always
    environment:
      WORDPRESS_DB_HOST: db:3306
      WORDPRESS_DB_NAME: wordpress
      WORDPRESS_DB_USER: wordpress_user
      WORDPRESS_DB_PASSWORD: 123456
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;shell 명령어&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; up&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;요청의-흐름&quot; style=&quot;position:relative;&quot;&gt;요청의 흐름&lt;a href=&quot;#%EC%9A%94%EC%B2%AD%EC%9D%98-%ED%9D%90%EB%A6%84&quot; aria-label=&quot;요청의 흐름 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;예시 docker-compose 파일의 요청 흐름을 다시 정리해 보자면 아래와 같다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/7ac2dcf05274afca744cc6e8c5f63949/29d31/image3.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 103.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMFBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyPMNJMZ4Kg/8QAGxABAAICAwAAAAAAAAAAAAAAAQASAiEDERP/2gAIAQEAAQUCtMRM5y2vlfxiK9aHX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EACAQAAAFAwUAAAAAAAAAAAAAAAABAhASESFxIjEyQZH/2gAIAQEABj8CFVKLxtMtugi6pNyMsCkjy3//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMUFRcaH/2gAIAQEAAT8hRdfYgYHgKSxjqtTOO5cXI3NglsvXqQtNFPLWIAuf/9oADAMBAAIAAwAAABDAxzz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAfEAEBAAICAgMBAAAAAAAAAAABEQAhMVFBkWFxweH/2gAIAQEAAT8Q1NjLpqY1mm+t9qt9YEo4tjl7iVf5hHwUhdud3rOUefzFhr8kPvNuo6exlEGEry/Ln//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/7ac2dcf05274afca744cc6e8c5f63949/828fb/image3.jpg&quot;
        srcset=&quot;/todayILearned/static/7ac2dcf05274afca744cc6e8c5f63949/ff44c/image3.jpg 158w,
/todayILearned/static/7ac2dcf05274afca744cc6e8c5f63949/a6688/image3.jpg 315w,
/todayILearned/static/7ac2dcf05274afca744cc6e8c5f63949/828fb/image3.jpg 630w,
/todayILearned/static/7ac2dcf05274afca744cc6e8c5f63949/29d31/image3.jpg 700w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;웹브라우저에서 8080 포트로 서버에 요청을 보낸다&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;app 컨테이너에서 열어둔 80 포트로 들어와 php를 타고 /var/www/html/ 파일을 읽어들인다&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/var/www/html 폴더는 호스트의 /app_data 폴더와 연결되어 있으므로 개발자가 적어둔 db 정보를 가져온다&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;app 컨테이너는 wordpress_net 네트워크를 통해 3306 포트로 열려있는 db 컨테이너의 mysql 서버로 요청을 보낸다&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;db 컨테이너의 /var/lib/mysql 폴더는 호스트의 /db_data 폴더와 연결되어 있으므로 개발자가 적어둔 mysql 정보를 가져와 mysql에 연결 후 결과를 app 컨테이너에게 돌려준다&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[nginx 500 permission error]]></title><description><![CDATA[현상 nginx로 웹서버를 열었더니 500 에러가 뜬다. 해결 index.html 권한 확인을 해보니 파일 권한이 ksy로 되어있었다. /etc/nginx/nginx.conf 파일을 열고 첫 줄의 루트 정보를 ksy로 변경 nginx…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/nignx_500_error/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/nignx_500_error/</guid><pubDate>Tue, 25 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;현상&quot; style=&quot;position:relative;&quot;&gt;현상&lt;a href=&quot;#%ED%98%84%EC%83%81&quot; aria-label=&quot;현상 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;nginx로 웹서버를 열었더니 500 에러가 뜬다.&lt;/p&gt;
&lt;h3 id=&quot;해결&quot; style=&quot;position:relative;&quot;&gt;해결&lt;a href=&quot;#%ED%95%B4%EA%B2%B0&quot; aria-label=&quot;해결 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ls -l&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;index.html 권한 확인을 해보니 파일 권한이 ksy로 되어있었다.&lt;/p&gt;
&lt;p&gt;/etc/nginx/nginx.conf 파일을 열고&lt;br&gt;
첫 줄의 루트 정보를 ksy로 변경&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;user ksy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;nginx 재시작하면 웹서버가 정상 동작한다!&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;sudo systemctl restart nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[깃랩 cicd]]></title><description><![CDATA[목표 웹서버에 올릴 프론트 파일을 깃랩을 이용해 자동 배포하도록 설정해 본다. 어떻게 돌아가는 걸까 & 시나리오 깃랩의 cicd…]]></description><link>https://ksy8230.github.io/todayILearned/git/gitlab_cicd/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/git/gitlab_cicd/</guid><pubDate>Sat, 22 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;목표&quot; style=&quot;position:relative;&quot;&gt;목표&lt;a href=&quot;#%EB%AA%A9%ED%91%9C&quot; aria-label=&quot;목표 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;웹서버에 올릴 프론트 파일을 깃랩을 이용해 자동 배포하도록 설정해 본다.&lt;/p&gt;
&lt;h3 id=&quot;어떻게-돌아가는-걸까--시나리오&quot; style=&quot;position:relative;&quot;&gt;어떻게 돌아가는 걸까 &amp;#x26; 시나리오&lt;a href=&quot;#%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%8C%EC%95%84%EA%B0%80%EB%8A%94-%EA%B1%B8%EA%B9%8C--%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4&quot; aria-label=&quot;어떻게 돌아가는 걸까  시나리오 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;깃랩의 cicd는 도커에서 돌아간다. 그리고 연결된 쿠버네티스에 배포가 된다. (@.@? 쿠버네티스가 뭔지 모르겠지만 일단은 넘어가자) 깃랩의 cicd는 프로젝트의 루트 위치에 .gitlab-ci.yml이 있는 상태에서 새로운 푸시가 들어오면 yml에 작성된 명령어들이 일련의 묶음으로 연결되어 실행된다. 이것을 파이프라인이라고도 한다.&lt;br&gt;
내가 하고픈 cicd의 전반적인 그림은 아래와 같다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/88c579e2db04f4e5f530f4f29707032e/2ee51/gitlab_cicd_image1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 44.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAexqUIP/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAEBAAMAAAAAAAAAAAAAAAABABARIf/aAAgBAQABPyHsE6Mt/9oADAMBAAIAAwAAABDzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExEGGBof/aAAgBAQABPxBcqDrMKsnxlgKvzg0Taf/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gitlab cicd image1&quot;
        title=&quot;gitlab cicd image1&quot;
        src=&quot;/todayILearned/static/88c579e2db04f4e5f530f4f29707032e/828fb/gitlab_cicd_image1.jpg&quot;
        srcset=&quot;/todayILearned/static/88c579e2db04f4e5f530f4f29707032e/ff44c/gitlab_cicd_image1.jpg 158w,
/todayILearned/static/88c579e2db04f4e5f530f4f29707032e/a6688/gitlab_cicd_image1.jpg 315w,
/todayILearned/static/88c579e2db04f4e5f530f4f29707032e/828fb/gitlab_cicd_image1.jpg 630w,
/todayILearned/static/88c579e2db04f4e5f530f4f29707032e/0ede0/gitlab_cicd_image1.jpg 945w,
/todayILearned/static/88c579e2db04f4e5f530f4f29707032e/2ee51/gitlab_cicd_image1.jpg 1043w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;우선 로컬 피시에서 리액트 코드를 작성하고 master 브랜치에 커밋하면&lt;/li&gt;
&lt;li&gt;깃랩의 러너가 변화를 감지해 작성해둔 .gitlab-ci.yml 파일의 스테이지 단계대로 실행한다&lt;/li&gt;
&lt;li&gt;yml 파일은 크게 도커 빌드 단계, 배포 단계로 구성했다.&lt;/li&gt;
&lt;li&gt;빌드 단계에서 docker in docker 이미지를 받아와 도커 안의 도커에서 이미지를 만들어 도커 레지스트리(a.k.a 팀 내부용 도커 허브)에 등록한다.&lt;/li&gt;
&lt;li&gt;배포 단계에서 kroniak/ssh-client 이미지를 받아와 ssh 연결을 통해 배포 서버에서 도커 레지스트리에서 이미지를 당겨와 배포한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;dind란?&lt;/strong&gt;&lt;br&gt;
도커 호스트 내부에 또 다른 도커를 서비스 형태로 실행시킨다.&lt;/p&gt;
&lt;h3 id=&quot;1-웹-어플리케이션으로-활용할-프로젝트-생성&quot; style=&quot;position:relative;&quot;&gt;1. 웹 어플리케이션으로 활용할 프로젝트 생성&lt;a href=&quot;#1-%EC%9B%B9-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%9C%BC%EB%A1%9C-%ED%99%9C%EC%9A%A9%ED%95%A0-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1&quot; aria-label=&quot;1 웹 어플리케이션으로 활용할 프로젝트 생성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;나의 경우 create-react-app 명령어를 이용해 보일러 프로젝트로 간단하게만 만들어보았다.&lt;/p&gt;
&lt;h3 id=&quot;2-루트-위치에-yml-파일-생성&quot; style=&quot;position:relative;&quot;&gt;2. 루트 위치에 yml 파일 생성&lt;a href=&quot;#2-%EB%A3%A8%ED%8A%B8-%EC%9C%84%EC%B9%98%EC%97%90-yml-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1&quot; aria-label=&quot;2 루트 위치에 yml 파일 생성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;깃랩 cicd 파이프라인 기능을 사용하기 위해선 yml 파일을 작성해야 한다. 그리고 이 파일은 &lt;strong&gt;프로젝트의 루트 폴더&lt;/strong&gt;에 위치해야 한다. (나의 경우 package.json과 동일한 위치에 해당 파일을 작성)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;stages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; build
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; deploy

&lt;span class=&quot;token key atrule&quot;&gt;docker-build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; build
  &lt;span class=&quot;token key atrule&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; ci&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;tag
  &lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; docker&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;stable
  &lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; docker&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;dind
      &lt;span class=&quot;token key atrule&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;--tls=false&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;--insecure-registry=$DOCKER_REGISTRY&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;variables&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;DOCKER_HOST&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; tcp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//docker&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;2375/
    &lt;span class=&quot;token key atrule&quot;&gt;DOCKER_DRIVER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; overlay2
    &lt;span class=&quot;token key atrule&quot;&gt;DOCKER_TLS_CERTDIR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;before_script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker login &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;u &quot;$CI_REGISTRY_USER&quot; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;p &quot;$CI_REGISTRY_PASSWORD&quot; $CI_REGISTRY
  &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker build &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;t project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name .
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker tag project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name $DOCKER_REGISTRY/project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker push $DOCKER_REGISTRY/project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name

&lt;span class=&quot;token key atrule&quot;&gt;deploy_dev&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; deploy
  &lt;span class=&quot;token key atrule&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; ci&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;tag
  &lt;span class=&quot;token key atrule&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;docker&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;build&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; kroniak/ssh&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;client
  &lt;span class=&quot;token key atrule&quot;&gt;before_script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; echo &quot;deploying app&quot;
  &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; echo &quot;$SSH_PRIVATE_KEY&quot; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; tr &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;d &apos;\r&apos; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; key.pem
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; chmod 400 key.pem
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; ssh &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;o StrictHostKeyChecking=no &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;i key.pem username@$PROD_SERVER_IP &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;p 6879 &apos;docker stop projectcontainer &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; true &lt;span class=&quot;token important&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker rm projectcontainer &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; true&apos;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; ssh &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;o StrictHostKeyChecking=no &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;i key.pem username@$PROD_SERVER_IP &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;p 6879 &apos;docker pull $DOCKER_REGISTRY/project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name&apos;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; ssh &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;o StrictHostKeyChecking=no &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;i key.pem username@$PROD_SERVER_IP &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;p 6879 &apos;docker run &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;p 3001&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;80 &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name projectcontainer $DOCKER_REGISTRY/project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name&apos;
  &lt;span class=&quot;token key atrule&quot;&gt;only&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; master&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;배포 자동화의 단계는 크게 총 두단계이다. 빌드-배포.&lt;/p&gt;
&lt;h4 id=&quot;빌드&quot; style=&quot;position:relative;&quot;&gt;빌드&lt;a href=&quot;#%EB%B9%8C%EB%93%9C&quot; aria-label=&quot;빌드 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;배포 스테이지에서 깃랩은 docker in docker를 실행시킨다. 그리고 깃랩에 등록한 러너가 sciprt: 부분을 실행시키기 전에 도커로 로그인한다.&lt;br&gt;
이후 러너는 script:에 적힌 순서대로 도커 명령어를 실행한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;project-name이라는 이름의 도커 이미지를 생성한다&lt;/li&gt;
&lt;li&gt;project-name 도커 이미지에 tag 이름으로 $DOCKER_REGISTRY/project-name를 붙여준다&lt;/li&gt;
&lt;li&gt;도커 레지스트리($DOCKER_REGISTRY)에 $DOCKER_REGISTRY/project-name tag 이름을 가진 도커 이미지를 푸시한다&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;dind secure error 443&lt;/strong&gt;&lt;br&gt;
도커 속 도커에서 도커 레지스트리로 이미지를 push하려는데 443 connect 에러가 떴다. 도커는 통신을 할 때 https 통신을 디폴트로 하는데 우리가 가진 도커 레지스트리가 https 통신 오픈이 되어있지 않았다. 그래서 **도커 서비스의 커맨드 명령어에 ‘—insecure-registry=$DOCKER_REGISTRY’ 이 옵션을 주어 해결.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;배포&quot; style=&quot;position:relative;&quot;&gt;배포&lt;a href=&quot;#%EB%B0%B0%ED%8F%AC&quot; aria-label=&quot;배포 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;빌드 스테이지에서 깃랩은 kroniak/ssh-client을 실행시킨다.&lt;br&gt;
이후 러너는 script:에 적힌 순서대로 도커 명령어를 실행한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ssh 접속을 위해 key.pem 파일을 lf 형식으로 바꾼 후 400 권한을 부여한다&lt;/li&gt;
&lt;li&gt;key.pem 파일을 이용해 배포하고자하는 서버에 ‘우리가 실행시키고자하는 컨테이너가 있다면 스탑 후 제거한다’ &amp;#x3C;- 컨테이너 중복 에러 방지&lt;/li&gt;
&lt;li&gt;key.pem 파일을 이용해 배포하고자하는 서버에서 빌드 단계에서 push 했던 $DOCKER_REGISTRY/project-name 이미지를 가져온다&lt;/li&gt;
&lt;li&gt;key.pem 파일을 이용해 배포하고자하는 서버에서 ‘가져온 이미지를 도커 컨테이너로 실행한다. 이때 호스트의 포트는 3001 포트이고 컨테이너의 포트는 80 포트를 이용해 연결한다’&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ssh 명령어를 이용해 서버와 통신을 하기 위한 key 생성&lt;/strong&gt;&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;ssh-keygen -m PEM -t rsa -b 4096 -C &quot;email@co.kr&quot;&lt;/code&gt;&lt;br&gt;
위 명령어를 서버에서 실행하면 id_rsa, id_rsa.pub 키를 생성하고 전자의 키를 복사해 깃랩에서 $SSH_PRIVATE_KEY 환경변수로 지정 후 사용한다&lt;br&gt;
&lt;a href=&quot;https://shanepark.tistory.com/195&quot;&gt;SSH key 생성하고, 서버에 등록해서 비밀번호 없이 접속하기&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ssh denided 에러&lt;/strong&gt;&lt;br&gt;
에러구문: Permission denied (publickey, password)&lt;br&gt;
서버와 통신하기 위해 key 생성을 할 때 id_rsa를 복사한 authorized_keys 파일을 반드시 생성해야 깃랩에서 원격 서버로 접속 후 도커 실행하는 명령어가 통과한다(이유는 왜지?)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;docker 권한 에러&lt;/strong&gt;&lt;br&gt;
에러구문: Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock&lt;br&gt;
ssh 통신은 됐는데 docker 명령어를 사용할 때마다 권한 에러가 떴다. 이유는 현재 사용 중인 유저가 /var/run 내부에서 도커 실행 권한이 없기 때문에 생긴 일. /var/run 폴더에서&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;service docker restart&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;명령어를 실행하면 도커를 재실행하기 위해 권한을 설정시킬 유저 목록들이 나온다. 이후 sudosu &gt; reboot 하여 서버 재시작.&lt;/p&gt;
&lt;h3 id=&quot;3-깃랩-러너-등록&quot; style=&quot;position:relative;&quot;&gt;3. 깃랩 러너 등록&lt;a href=&quot;#3-%EA%B9%83%EB%9E%A9-%EB%9F%AC%EB%84%88-%EB%93%B1%EB%A1%9D&quot; aria-label=&quot;3 깃랩 러너 등록 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;공유 러너와 개별 러너, 차이점에 대해 공부하기&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;4-그-외-기억할-것들&quot; style=&quot;position:relative;&quot;&gt;4. 그 외 기억할 것들&lt;a href=&quot;#4-%EA%B7%B8-%EC%99%B8-%EA%B8%B0%EC%96%B5%ED%95%A0-%EA%B2%83%EB%93%A4&quot; aria-label=&quot;4 그 외 기억할 것들 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;*ssh private key 복사할 때 인코딩이 LF인지 꼭 확인하자&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[리액트 어플리케이션을 nginx 정적 서버에 배포하는 도커 이미지 만들기]]></title><description><![CDATA[도커 이미지 만드는 법을 배웠으니 사이드 프로젝트로 만들고 있는 리액트 어플리케이션을 도커 이미지로 nginx에 배포해 보자! 1. 준비물 확인 리액트 어플리케이션 (create-react-app…]]></description><link>https://ksy8230.github.io/todayILearned/docker/practice/react-nginx-docker/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/docker/practice/react-nginx-docker/</guid><pubDate>Wed, 12 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;도커 이미지 만드는 법을 배웠으니 사이드 프로젝트로 만들고 있는 리액트 어플리케이션을 도커 이미지로 nginx에 배포해 보자!&lt;/p&gt;
&lt;h3 id=&quot;1-준비물-확인&quot; style=&quot;position:relative;&quot;&gt;1. 준비물 확인&lt;a href=&quot;#1-%EC%A4%80%EB%B9%84%EB%AC%BC-%ED%99%95%EC%9D%B8&quot; aria-label=&quot;1 준비물 확인 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;리액트 어플리케이션 (create-react-app으로 만들어서 해당 템플릿에 &lt;code class=&quot;language-text&quot;&gt;npm run build&lt;/code&gt; 명령어를 통해 정적 서버에 올릴 build 명령어가 내장되어있다)&lt;/li&gt;
&lt;li&gt;도커 설치 완료&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-도커-파일-작성&quot; style=&quot;position:relative;&quot;&gt;2. 도커 파일 작성&lt;a href=&quot;#2-%EB%8F%84%EC%BB%A4-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1&quot; aria-label=&quot;2 도커 파일 작성 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;배포용으로 도커 파일을 하나 더 두고자하여 아래와 같이 도커 파일을 작성했다.&lt;br&gt;
파일명 : Dockerfile_Production&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# stage1&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node:14.17.5&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json .&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm install&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . .&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm run build&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# stage2&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; nginx:alpine&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; nginx.conf /etc/nginx/conf.d/default.conf&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; &lt;span class=&quot;token options&quot;&gt;&lt;span class=&quot;token property&quot;&gt;--from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;builder&lt;/span&gt;&lt;/span&gt; /app/build /usr/share/nginx/html&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 80&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [&lt;span class=&quot;token string&quot;&gt;&quot;nginx&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;-g&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;daemon off;&quot;&lt;/span&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;배포 stage는 총 두 단계이다.&lt;br&gt;
stage1에서는 리액트 어플리케이션을 빌드하고,&lt;br&gt;
stage2에서 리액트 build 폴더를 nginx html 폴더에 복사하여 넣어준다. 그리고 nginx 서버 실행!&lt;/p&gt;
&lt;p&gt;내가 만든 도커 환경을 그림으로 표현하면 아래와 같을 것이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/aa3e3ad9278faaafdd77898c71baca7a/15ec7/dockerFileSystem.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.291139240506325%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3NSGD/xAAYEAACAwAAAAAAAAAAAAAAAAACEBESMf/aAAgBAQABBQKEW2f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFx/9oACAEBAAE/IeT5Ab0KmMQxyLfkdZ//2gAMAwEAAgADAAAAENAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFBUZH/2gAIAQEAAT8Qo8PQdgz8DMBViVKQcnsN2jdx5NT/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/aa3e3ad9278faaafdd77898c71baca7a/828fb/dockerFileSystem.jpg&quot;
        srcset=&quot;/todayILearned/static/aa3e3ad9278faaafdd77898c71baca7a/ff44c/dockerFileSystem.jpg 158w,
/todayILearned/static/aa3e3ad9278faaafdd77898c71baca7a/a6688/dockerFileSystem.jpg 315w,
/todayILearned/static/aa3e3ad9278faaafdd77898c71baca7a/828fb/dockerFileSystem.jpg 630w,
/todayILearned/static/aa3e3ad9278faaafdd77898c71baca7a/15ec7/dockerFileSystem.jpg 690w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;stage-1-설명&quot; style=&quot;position:relative;&quot;&gt;stage 1 설명&lt;a href=&quot;#stage-1-%EC%84%A4%EB%AA%85&quot; aria-label=&quot;stage 1 설명 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node:14.17.5 &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; builder&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json .&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;리액트 어플리케이션이 실행되기 위해선 node 환경이 필요하므로 내 로컬 환경 버전과 동일한 노드 버전을 도커 호스트에 설치했다.&lt;br&gt;
호스트에 /app 경로를 만들어 그곳에 package.json을 복사했다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;package.json을 먼저 복사한 이유
&lt;ul&gt;
&lt;li&gt;도커 이미지는 각 명령어마다 레이어층을 만든다. 그렇기 때문에 도커 이미지를 만들 때, 해당하는 명령어 레이어에 변화가 없다면 캐싱 기능을 사용할 수 있다!&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm install&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . .&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; npm run build&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;package.json에 수정사항이 있다면 npm install로 노드모듈들을 재설치 후 로컬에 있는 모든 파일을 호스트의 /app 폴더에 전부 카피한다. 그리고 여기서
&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;.dockerignore&lt;/code&gt; 파일에 반드시 &lt;code class=&quot;language-text&quot;&gt;node_modules&lt;/code&gt;를 기재해야 전체 파일 카피할 때 시간을 절약&lt;/strong&gt;할 수 있다.&lt;/p&gt;
&lt;h4 id=&quot;stage-2-설명&quot; style=&quot;position:relative;&quot;&gt;stage 2 설명&lt;a href=&quot;#stage-2-%EC%84%A4%EB%AA%85&quot; aria-label=&quot;stage 2 설명 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; nginx:alpine&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; nginx.conf /etc/nginx/conf.d/default.conf&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; &lt;span class=&quot;token options&quot;&gt;&lt;span class=&quot;token property&quot;&gt;--from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;builder&lt;/span&gt;&lt;/span&gt; /app/build /usr/share/nginx/html&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 80&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [&lt;span class=&quot;token string&quot;&gt;&quot;nginx&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;-g&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;daemon off;&quot;&lt;/span&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;도커 허브에서 nginx 이미지를 가져온다.
&lt;strong&gt;로컬에 있는 nginx 설정 파일을 호스트의 nginx 설치 디렉터리에 복사&lt;/strong&gt;한다.&lt;br&gt;
stage1에서 빌드한 파일들을 호스트의 nginx 공용 디렉터리에 복사한다.&lt;br&gt;
도커 컨테이너 내부에서 실행되는 포트는 80을 노출시킨다.&lt;br&gt;
컨테이너가 시작될 때 서버를 실행한다.&lt;/p&gt;
&lt;p&gt;COPY nginx.conf /etc/nginx/conf.d/default.conf 해당 부분을 넣어주지 않고 nginx 서버에 빌드 파일을 배포하면 리액트의 라우팅 관련한 문제가 생긴다…&lt;br&gt;
이러한 이유는 리액트가 싱글페이지어플리케이션으로 동작하기 때문이다.&lt;br&gt;
url이 마치 이동을 하는 것 같지만 실제로 한 화면 안에서 다른 태그들을 불러와주는 식으로 이루어져 있기 때문에 &lt;a href=&quot;http://www.host.co.kr/index&quot;&gt;www.host.co.kr/index&lt;/a&gt; 에서 &lt;a href=&quot;http://www.host.co.kr/2&quot;&gt;www.host.co.kr/2&lt;/a&gt; 로 넘어갈 때 해당 주소는 실제로 존재하지 않는다.&lt;br&gt;
때문에 nginx에서 없는 주소인 경우 root로 돌아가게끔 설정시켜줘야 한다. 없는 주소를 입력 시 root로 돌아가고, root를 기준으로 어플리케이션이 라우팅을 하게 만들어줌으로써 페이지 이동 구현이 정상 작동한다.&lt;/p&gt;
&lt;h3 id=&quot;도커-파일-실행&quot; style=&quot;position:relative;&quot;&gt;도커 파일 실행&lt;a href=&quot;#%EB%8F%84%EC%BB%A4-%ED%8C%8C%EC%9D%BC-%EC%8B%A4%ED%96%89&quot; aria-label=&quot;도커 파일 실행 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&gt; docker build -t awesome-app:nginx -f Dockerfile_Production .;
&gt; docker rm --force (빌드된 이미지 이름);
&gt; docker run -p 8081:80 awesome-app:nginx;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;출처&quot; style=&quot;position:relative;&quot;&gt;출처&lt;a href=&quot;#%EC%B6%9C%EC%B2%98&quot; aria-label=&quot;출처 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=gM2cWo1DWIk&quot;&gt;리액트앱을 nginx에 도커로 배포&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/greedygame-engineering/so-you-want-to-dockerize-your-react-app-64fbbb74c217&quot;&gt;nginx에서 리액트앱 라우터 문제 해결&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[생활코딩 Docker 이미지 만드는 법]]></title><description><![CDATA[…]]></description><link>https://ksy8230.github.io/todayILearned/docker/docker3/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/docker/docker3/</guid><pubDate>Tue, 11 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;도커 허브에서 내려 받은 이미지를 다운 받아 컨테이너로 만들어 런을 시켜보고 나니 나도 도커 허브에 내 이미지를 올려보고 싶다는 생각이 들었다.&lt;/p&gt;
&lt;h3 id=&quot;도커-이미지-만드는-법-두-가지&quot; style=&quot;position:relative;&quot;&gt;도커 이미지 만드는 법 두 가지&lt;a href=&quot;#%EB%8F%84%EC%BB%A4-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%A7%8C%EB%93%9C%EB%8A%94-%EB%B2%95-%EB%91%90-%EA%B0%80%EC%A7%80&quot; aria-label=&quot;도커 이미지 만드는 법 두 가지 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/7bf67/docker16.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 89.24050632911393%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAMEBQIG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB0Jo65rKw78iGsD//xAAcEAABBAMBAAAAAAAAAAAAAAADAAECBBASMxT/2gAIAQEAAQUC88NhCYeNysh3YuoGHNi8lU5//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHxAAAQMDBQAAAAAAAAAAAAAAAQACERAicQMSUpKh/9oACAEBAAY/Ajc/sjBccmji7SgRyV42+qWlPxQ5X//EAB4QAQACAgEFAAAAAAAAAAAAAAEAESFhURAxobHw/9oACAEBAAE/IbrM+8bsjv6DABTekuquNOUVWQa7TyvqIcT5dE//2gAMAwEAAgADAAAAEGDIfP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB8QAQEAAgIBBQAAAAAAAAAAAAERACExQRBRcZGh8P/aAAgBAQABPxBaCpgcmLOsUSQWS8eB/SyWxok7+sUJBFpRWmjUzeTw0b5798/T9WWGnxhCIG2H/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/828fb/docker16.jpg&quot;
        srcset=&quot;/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/ff44c/docker16.jpg 158w,
/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/a6688/docker16.jpg 315w,
/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/828fb/docker16.jpg 630w,
/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/7bf67/docker16.jpg 680w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;컨테이너에서 커밋하여 이미지 만들기&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;내 컨테이너의 진행 상황을 커밋하여 이미지를 만드는 방법은 &lt;strong&gt;백업&lt;/strong&gt;의 개념과 가깝다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;도커 파일&lt;/strong&gt;을 만들어 &lt;strong&gt;빌드&lt;/strong&gt;하여 이미지 만들기&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;도커 파일로 만드는 이미지는 구체적으로 시간 순서에 따라 이미지를 &lt;strong&gt;생성&lt;/strong&gt;하는 개념에 가깝다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;웹-서버-이미지를-도커-파일로-만들기&quot; style=&quot;position:relative;&quot;&gt;웹 서버 이미지를 도커 파일로 만들기&lt;a href=&quot;#%EC%9B%B9-%EC%84%9C%EB%B2%84-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A5%BC-%EB%8F%84%EC%BB%A4-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0&quot; aria-label=&quot;웹 서버 이미지를 도커 파일로 만들기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/b040c/docker17.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcqRAP/EABYQAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAQABBQJW1tb/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAAMf/aAAgBAQAGPwJVf//EABkQAAIDAQAAAAAAAAAAAAAAAABhARGRMf/aAAgBAQABPyG12RzRzT//2gAMAwEAAgADAAAAEPw//8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EIiI/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EKys/8QAGRABAQADAQAAAAAAAAAAAAAAAQBBYdHx/9oACAEBAAE/EELFtl+i9Vf/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/828fb/docker17.jpg&quot;
        srcset=&quot;/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/ff44c/docker17.jpg 158w,
/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/a6688/docker17.jpg 315w,
/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/828fb/docker17.jpg 630w,
/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/b040c/docker17.jpg 844w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;도커 파일 작성&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Dockerfile이라는 약속된 도커 파일을 생성 후 컨테이너 생성 환경을 파일에 적어준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;unbuntu&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20.04&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;도커 파일 빌드&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;생성된 도커에 태그명으로 web-server-build를 명명했고, 도커 파일이 있는 디렉토리에서 앞으로의 작업을 할 예정이므로 현재 디렉토리 . 를 가리킨다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;  &gt; docker build -t web-server-build .&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;도커 web-server-build 이미지 생성 확인&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;아래 명령어를 실행하면 만들어진 이미지 목록 조회가 가능하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;  &gt; docker images&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 528px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/c64a7/docker18.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 15.18987341772152%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABxaCgf//EABYQAAMAAAAAAAAAAAAAAAAAAAABEP/aAAgBAQABBQKI/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAY/AhT/xAAZEAABBQAAAAAAAAAAAAAAAAAAARAxQXH/2gAIAQEAAT8htkV0/9oADAMBAAIAAwAAABD0D//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAAAARExcaH/2gAIAQEAAT8Qt8ZMLEcFVCH/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/c64a7/docker18.jpg&quot;
        srcset=&quot;/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/ff44c/docker18.jpg 158w,
/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/a6688/docker18.jpg 315w,
/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/c64a7/docker18.jpg 528w&quot;
        sizes=&quot;(max-width: 528px) 100vw, 528px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;도커 파일 작성 완료&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;ubuntu&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20.04&lt;/span&gt;
&lt;span class=&quot;token constant&quot;&gt;RUN&lt;/span&gt; apt update &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt install &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;y python3
&lt;span class=&quot;token constant&quot;&gt;WORKDIR&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;www&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;html
&lt;span class=&quot;token constant&quot;&gt;COPY&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;index.html&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token constant&quot;&gt;CMD&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;python3&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-u&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-m&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http.server&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;우분투 20.04 환경을 세팅한다&lt;/li&gt;
&lt;li&gt;apt update 하고 python3를 설치한다 (*run 명령어는 빌드 시점에 실행)&lt;/li&gt;
&lt;li&gt;작업 디렉토리를 생성한다 (없다면 만들어서 생성한다)&lt;/li&gt;
&lt;li&gt;호스트에 있는 index.html 파일을 workdir 디렉토리에 복사한다&lt;/li&gt;
&lt;li&gt;cmd 명령어로 파이썬 웹서버를 실행한다 (*cmd 명령어는 컨테이너 시점에 실행)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;도커 파일 빌드 후 만든 이미지 실행&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;  &gt; docker build -t web-server-build .;
  &gt; docker rm --force web-server;
  &gt; docker run -p 8888:8000 --name web-server web-server-build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;도커 파일을 해당 디렉토리에서 web-server 태그를 붙여 빌드한다&lt;/li&gt;
&lt;li&gt;web-server 태그가 있다면 삭제하고 새로 생성한다&lt;/li&gt;
&lt;li&gt;web-server-build 이미지를 바탕으로 web-server 컨테이너를 생성해 호스트 8888 포트를 컨테이너 8000 포트와 연결해 실행&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;위 방법을 이용하면 create-react-app 을 이용해 리액트 빌드 파일을 도커 컨테이너에서 실행한 파이썬 서버에 올려볼 수도 있겠다. 꼭 해보자.&lt;/p&gt;
&lt;h3 id=&quot;출처&quot; style=&quot;position:relative;&quot;&gt;출처&lt;a href=&quot;#%EC%B6%9C%EC%B2%98&quot; aria-label=&quot;출처 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=0kQC19w0gTI&quot;&gt;https://www.youtube.com/watch?v=0kQC19w0gTI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[생활코딩 Docker 입문 수업 6 ~ 8]]></title><description><![CDATA[도커 컨테이너 안에 있는 파일 조작하기  도커를 이용해 웹서버를 띄웠다. 그리고 이제 이 내용물을 다르게 바꿔보자. 도커에 올라가있는 컨테이너 ws…]]></description><link>https://ksy8230.github.io/todayILearned/docker/docker2/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/docker/docker2/</guid><pubDate>Fri, 07 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;도커-컨테이너-안에-있는-파일-조작하기&quot; style=&quot;position:relative;&quot;&gt;도커 컨테이너 안에 있는 파일 조작하기&lt;a href=&quot;#%EB%8F%84%EC%BB%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%95%88%EC%97%90-%EC%9E%88%EB%8A%94-%ED%8C%8C%EC%9D%BC-%EC%A1%B0%EC%9E%91%ED%95%98%EA%B8%B0&quot; aria-label=&quot;도커 컨테이너 안에 있는 파일 조작하기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/fee13/docker10.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3qAH/8QAFRABAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAQUCj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAAMBAAAAAAAAAAAAAAAAAAABEYH/2gAIAQEAAT8hWiIiP//aAAwDAQACAAMAAAAQAA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEAAgMAAAAAAAAAAAAAAAABAGERMVH/2gAIAQEAAT8QA2uXZQSgn//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/828fb/docker10.jpg&quot;
        srcset=&quot;/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/ff44c/docker10.jpg 158w,
/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/a6688/docker10.jpg 315w,
/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/828fb/docker10.jpg 630w,
/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/fee13/docker10.jpg 726w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;도커를 이용해 웹서버를 띄웠다.&lt;br&gt;
그리고 이제 이 내용물을 다르게 바꿔보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker exec ws3 {명령어}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;도커에 올라가있는 컨테이너 ws3(사용자가 명명한 컨테이너 이름) 실행하면 컨테이너 내부를 파일 조회를 할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 287px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/7fe3f2aceeb6192ed312e0f3daad0253/b3e6c/docker11.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 83.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABxpSAXAAf/8QAFxABAAMAAAAAAAAAAAAAAAAAEAECEf/aAAgBAQABBQLWWz//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAaEAABBQEAAAAAAAAAAAAAAAABABARITGh/9oACAEBAAE/IaTJ4ib3iK2+g/8A/9oADAMBAAIAAwAAABCHAAD/xAAWEQEBAQAAAAAAAAAAAAAAAAABESD/2gAIAQMBAT8QWkx//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAEDBQAAAAAAAAAAAAAAAREAIaEQIDFRcf/aAAgBAQABPxC+EJOt80LKR4KSvM7PE1//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/7fe3f2aceeb6192ed312e0f3daad0253/b3e6c/docker11.jpg&quot;
        srcset=&quot;/todayILearned/static/7fe3f2aceeb6192ed312e0f3daad0253/ff44c/docker11.jpg 158w,
/todayILearned/static/7fe3f2aceeb6192ed312e0f3daad0253/b3e6c/docker11.jpg 287w&quot;
        sizes=&quot;(max-width: 287px) 100vw, 287px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그런데 매번 컨테이너 안으로 들어가는 명령어를 치기 힘드니 아래와 같이 컨테이너 내부의 쉘을 유지시켜주는 명령어를 치면 # 모양이 뜨면서 이 뒤부터 내리는 명령은 ws3 컨테이너 내부 대상으로 내리는 실행 명령어가 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker exec -it ws3 /bin/sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;쉘 : 사용자가 입력한 명령를 쉘 프로그램이 받아서 그것을 운영체제에게 전달해주는 창구 역할을 한다&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/9f8e3c7381fb576833021514f1160d18/49e4f/docker12.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 17.088607594936708%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABw4AH/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFRABAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAT8hr//aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAXEAEAAwAAAAAAAAAAAAAAAAABABAh/9oACAEBAAE/EFLrGv/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/9f8e3c7381fb576833021514f1160d18/828fb/docker12.jpg&quot;
        srcset=&quot;/todayILearned/static/9f8e3c7381fb576833021514f1160d18/ff44c/docker12.jpg 158w,
/todayILearned/static/9f8e3c7381fb576833021514f1160d18/a6688/docker12.jpg 315w,
/todayILearned/static/9f8e3c7381fb576833021514f1160d18/828fb/docker12.jpg 630w,
/todayILearned/static/9f8e3c7381fb576833021514f1160d18/49e4f/docker12.jpg 836w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;index.html 파일이 있는 경로로 이동을 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# cd /usr/local/apache2/htdocs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;apt 업데이트를 하고 html을 편집할 수 있는 nano라는 프로그램을 설치한 후 index.html을 열면 내용 수정이 가능하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# apt update
# apt install nano
# nano index.html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 421px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/a3a1adb0acd20361260ce5ddfaeec674/5c51b/docker14.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe1WghY//8QAFhABAQEAAAAAAAAAAAAAAAAAABEg/9oACAEBAAEFAkTH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAASAy/9oACAEBAAY/ApLf/8QAGRAAAwADAAAAAAAAAAAAAAAAAAERICHR/9oACAEBAAE/Ia5yNo2Th//aAAwDAQACAAMAAAAQQw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEBAAEFAAAAAAAAAAAAAAABEUEAIDGRof/aAAgBAQABPxBdIKYy90TpGcIU62//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/a3a1adb0acd20361260ce5ddfaeec674/5c51b/docker14.jpg&quot;
        srcset=&quot;/todayILearned/static/a3a1adb0acd20361260ce5ddfaeec674/ff44c/docker14.jpg 158w,
/todayILearned/static/a3a1adb0acd20361260ce5ddfaeec674/a6688/docker14.jpg 315w,
/todayILearned/static/a3a1adb0acd20361260ce5ddfaeec674/5c51b/docker14.jpg 421w&quot;
        sizes=&quot;(max-width: 421px) 100vw, 421px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;호스트-파일-시스템과-컨테이너-파일-시스템-연결&quot; style=&quot;position:relative;&quot;&gt;호스트 파일 시스템과 컨테이너 파일 시스템 연결&lt;a href=&quot;#%ED%98%B8%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EC%8A%A4%ED%85%9C%EA%B3%BC-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%97%B0%EA%B2%B0&quot; aria-label=&quot;호스트 파일 시스템과 컨테이너 파일 시스템 연결 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;열심히 내용물을 수정한 파일이 도커 컨테이너에 반영이 되었다.&lt;br&gt;
하지만 개발자의 실수로 컨테이너를 날려버리면 열심히 수정한 노력이 물거품이 될 것이다… 그런 일을 미연에 방지하기 위해 파일 작업은 호스트 파일 시스템에서 하고 호스트에서 수정이 되면 컨테이너 파일 시스템에서 자동으로 반영이 되는 구조를 가져가는 편이 더 안전할 것이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/431b6ec589dbcdf801dcf29f7d7ee3c9/5510b/docker13.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQCBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe0lwXIx/8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAAhAhMf/aAAgBAQABBQKre48Ewc//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAABBQEAAAAAAAAAAAAAAAABABESIDGB/9oACAEBAAY/AjLi0NX/xAAbEAACAgMBAAAAAAAAAAAAAAABEQAxECFBUf/aAAgBAQABPyEtwE+oSzqUu4s+wzs1DKbn/9oADAMBAAIAAwAAABAjD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFhMVFBcZH/2gAIAQEAAT8QvoeIWxuHqIdhyw3fFeJTsZsfYXAtGKZS+5//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/431b6ec589dbcdf801dcf29f7d7ee3c9/828fb/docker13.jpg&quot;
        srcset=&quot;/todayILearned/static/431b6ec589dbcdf801dcf29f7d7ee3c9/ff44c/docker13.jpg 158w,
/todayILearned/static/431b6ec589dbcdf801dcf29f7d7ee3c9/a6688/docker13.jpg 315w,
/todayILearned/static/431b6ec589dbcdf801dcf29f7d7ee3c9/828fb/docker13.jpg 630w,
/todayILearned/static/431b6ec589dbcdf801dcf29f7d7ee3c9/0ede0/docker13.jpg 945w,
/todayILearned/static/431b6ec589dbcdf801dcf29f7d7ee3c9/5510b/docker13.jpg 1179w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;바탕화면에 htdocs 폴더 생성 후 index.html 파일을 생성한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    hello again!
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;터미널에서 호스트의 파일 경로:컨테이너 파일 경로 연결 후 컨테이너 실행&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker run -p 8888:80 -v C:\Users\{사용자폴더명}\Desktop\htdocs\:/usr/local/apache2/htdocs/ httpd&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 417px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/d9d6d09449da800c4e6e271b2a535728/6eca5/docker15.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 42.405063291139236%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG6AD//xAAVEAEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAQABBQKIj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAQADAAAAAAAAAAAAAAAAAAABEWH/2gAIAQEAAT8hNyq//9oADAMBAAIAAwAAABBzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEBAQEBAAAAAAAAAAAAAAERAGEhQf/aAAgBAQABPxAoKB58yGUZw3Pf/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/d9d6d09449da800c4e6e271b2a535728/6eca5/docker15.jpg&quot;
        srcset=&quot;/todayILearned/static/d9d6d09449da800c4e6e271b2a535728/ff44c/docker15.jpg 158w,
/todayILearned/static/d9d6d09449da800c4e6e271b2a535728/a6688/docker15.jpg 315w,
/todayILearned/static/d9d6d09449da800c4e6e271b2a535728/6eca5/docker15.jpg 417w&quot;
        sizes=&quot;(max-width: 417px) 100vw, 417px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이 구조의 장점&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;나에게 익숙한 에디터로 파일 편집이 가능하다&lt;/li&gt;
&lt;li&gt;버전 관리가 가능해진다&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;멀게만 느껴졌던 도커가 조금은 뚜렷하게 잡혀가는 느낌이다… 도커를 사용해 내가 만든 프로젝트를 커밋을 이용해 도커 허브에 올린다면 다른 사람이 그 이미지를 내려 받아 내가 설정한 환경 그대로 작업을 쉽게 이어갈 수 있을 것 같다.&lt;/p&gt;
&lt;h3 id=&quot;도움-받은-자료들&quot; style=&quot;position:relative;&quot;&gt;도움 받은 자료들&lt;a href=&quot;#%EB%8F%84%EC%9B%80-%EB%B0%9B%EC%9D%80-%EC%9E%90%EB%A3%8C%EB%93%A4&quot; aria-label=&quot;도움 받은 자료들 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=Ps8HDIAyPD0&amp;#x26;list=PLuHgQVnccGMDeMJsGq2O-55Ymtx0IdKWf&quot;&gt;https://www.youtube.com/watch?v=Ps8HDIAyPD0&amp;#x26;list=PLuHgQVnccGMDeMJsGq2O-55Ymtx0IdKWf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=0kQC19w0gTI&quot;&gt;https://www.youtube.com/watch?v=0kQC19w0gTI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[react-chartjs 에서 라인에 glow 효과 주는 법]]></title><description><![CDATA[개발 환경 chart.js 3.7 버전 react-chartjs-2 4.0 버전 환경 리액트에서 그래프 작업을 할 때 주로 chart.js 라이브러리를 사용하고 있다. 선 그래프 작업을 할 때 라인에 glow…]]></description><link>https://ksy8230.github.io/todayILearned/reactjs/chartjs1/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/reactjs/chartjs1/</guid><pubDate>Fri, 07 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3 id=&quot;개발-환경&quot; style=&quot;position:relative;&quot;&gt;개발 환경&lt;a href=&quot;#%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD&quot; aria-label=&quot;개발 환경 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;chart.js 3.7 버전&lt;br&gt;
react-chartjs-2 4.0 버전 환경&lt;/p&gt;
&lt;p&gt;리액트에서 그래프 작업을 할 때 주로 chart.js 라이브러리를 사용하고 있다.&lt;br&gt;
선 그래프 작업을 할 때 라인에 glow 효과를 주고 싶어 구글신에 검색을 해보았는데&lt;br&gt;
예제 코드를 적용하기만 하면 line을 찾을 수 없다며 뜨는 undefined 에러… 😥&lt;br&gt;
왜 그런지 콘솔을 찍어가며 확인해 보니 chart.js 3 버전에서 line 프로토타입을 찾아내는 경로가 조금 달라졌다.&lt;/p&gt;
&lt;h3 id=&quot;소스코드&quot; style=&quot;position:relative;&quot;&gt;소스코드&lt;a href=&quot;#%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C&quot; aria-label=&quot;소스코드 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;chart.js 임포트&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  Chart &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; ChartJS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  CategoryScale&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  LinearScale&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  PointElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  LineElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  Title&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  Tooltip&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  Legend&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;chart.js&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Line &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-chartjs-2&quot;&lt;/span&gt;

ChartJS&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  CategoryScale&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  LinearScale&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  PointElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  LineElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  Title&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  Tooltip&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  Legend
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://react-chartjs-2.netlify.app/examples/line-chart&quot;&gt;react-chartjs 공식문서&lt;/a&gt;에 나와있는대로 원하는 차트 컴포넌트를 사용할 때는 리액트에서 불러오는 방식대로 해당 라이브러리를 임포트한다.&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;ChartJS.registry 하위를 따라 line 프로토타입 찾기&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; draw &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ChartJS&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;registry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;controllers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;line&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;draw

ChartJS&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;registry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;controllers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;line&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; chart &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;chart
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; ctx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; chart&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ctx
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; _stroke &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stroke
  ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;stroke&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shadowColor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;strokeStyle
    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shadowBlur &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shadowOffsetX &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shadowOffsetY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;_stroke&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arguments&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;restore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arguments&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stroke &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; _stroke
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[vscode에서 crlf 파일들을 일괄로 lf파일로 변환하는 법]]></title><description><![CDATA[파일 형상 관리를 git을 이용해 하고 있다. 그런데 가끔가다 브랜치 이동을 하면 몇몇 파일들이 crlf…]]></description><link>https://ksy8230.github.io/todayILearned/bugLists/vscode_setting/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/bugLists/vscode_setting/</guid><pubDate>Thu, 06 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;파일 형상 관리를 git을 이용해 하고 있다.&lt;br&gt;
그런데 가끔가다 브랜치 이동을 하면 몇몇 파일들이 crlf로 변환된 채로 코드상 빨간 줄을 뿜고 있는데… 이걸 파일 하나하나 바꿔주다보니 갑갑해서 일괄 수정할 수 있는 방법을 찾아냈다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/2c334fe15ed3d1ed06dd34f81163a0d4/940c5/lf.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 11.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAe0lEQVQI12OQ1Lb4D8GWUGyBRmMXl4KypXQs/8voWv0XUTP57x2V+p+Bq+Hsf+mui//lui/+l+y48J+n8dx/nclX/qv1X/4v3Hr+v2DL+f8qfZf+CzSf+y/QAuHrTr7yX3vS5f+y3Rf/czee+8/ffO4/W8P5/zZd+/4DAL+gTvIIXhXiAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;lf&quot;
        title=&quot;lf&quot;
        src=&quot;/todayILearned/static/2c334fe15ed3d1ed06dd34f81163a0d4/f058b/lf.png&quot;
        srcset=&quot;/todayILearned/static/2c334fe15ed3d1ed06dd34f81163a0d4/c26ae/lf.png 158w,
/todayILearned/static/2c334fe15ed3d1ed06dd34f81163a0d4/6bdcf/lf.png 315w,
/todayILearned/static/2c334fe15ed3d1ed06dd34f81163a0d4/f058b/lf.png 630w,
/todayILearned/static/2c334fe15ed3d1ed06dd34f81163a0d4/940c5/lf.png 772w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;터미널창에 아래 명령어 수행&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;git config core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;autocrlf &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
git rm &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;cached &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;r &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
git reset &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;hard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[생활코딩 Docker 입문 수업 1 ~ 5]]></title><description><![CDATA[…]]></description><link>https://ksy8230.github.io/todayILearned/docker/docker1/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/docker/docker1/</guid><pubDate>Thu, 06 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;작년부터 궁금했던 도커라는 녀석을 공부해 보기로 했다.&lt;br&gt;
무작정 유튜브에 도커를 쳐보니 생활코딩 유튜브 채널에 도커 입문용 강의가 있더라… 감사합니다!&lt;/p&gt;
&lt;h3 id=&quot;도커를-사용하게-된-배경&quot; style=&quot;position:relative;&quot;&gt;도커를 사용하게 된 배경&lt;a href=&quot;#%EB%8F%84%EC%BB%A4%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B2%8C-%EB%90%9C-%EB%B0%B0%EA%B2%BD&quot; aria-label=&quot;도커를 사용하게 된 배경 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;어떠한 어플리케이션을 개발할 때 웹서버와 데이터베이스가 필요하다. 그런데 만일 웹서버에 맞는 운영체제와 데이터베이스에 맞는 운영체제가 다른 경우 가장 이상적인 그림은 아래와 같을 것이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/cb9b300e35b7029562a9053d119b36e5/dde82/docker1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.139240506329116%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdqAsD//xAAWEAEBAQAAAAAAAAAAAAAAAAABAhL/2gAIAQEAAQUCF1NOYXP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAACAgMAAAAAAAAAAAAAAAAAARExEiFB/9oACAEBAAY/AnNcHK2LKz//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhMUGh/9oACAEBAAE/IXmKPKJVgLRm+xTY7z//2gAMAwEAAgADAAAAEAPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRAAAQQCAwAAAAAAAAAAAAAAAQARIUGBoTFRsf/aAAgBAQABPxArhhwT3ZOgrIAECrDYwgIhqMCcE+r/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/cb9b300e35b7029562a9053d119b36e5/828fb/docker1.jpg&quot;
        srcset=&quot;/todayILearned/static/cb9b300e35b7029562a9053d119b36e5/ff44c/docker1.jpg 158w,
/todayILearned/static/cb9b300e35b7029562a9053d119b36e5/a6688/docker1.jpg 315w,
/todayILearned/static/cb9b300e35b7029562a9053d119b36e5/828fb/docker1.jpg 630w,
/todayILearned/static/cb9b300e35b7029562a9053d119b36e5/dde82/docker1.jpg 910w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;각각의 역할을 하는 컴퓨터를 세 대를 두고 어플리케이션에서 다른 두 대의 컴퓨터로 네트워크 통신을 한다면 하나의 컴퓨터에서 여러 운영체제를 커버해야할 때 큰 고민 없이 개발할 수 있을 것이다.&lt;br&gt;
하지만 비용적으로 문제가 생긴다.&lt;/p&gt;
&lt;p&gt;VirtualBox라는 가상 머신을 이용해 특정 운영체제 위에 다른 운영체제를 깔고 사용하는 방법도 있다. 그런데 이 방법은 용량적인 문제와 실행 속도에 문제가 생길 수 있다.&lt;/p&gt;
&lt;h3 id=&quot;도커에서의-호스트와-컨테이너&quot; style=&quot;position:relative;&quot;&gt;도커에서의 호스트와 컨테이너&lt;a href=&quot;#%EB%8F%84%EC%BB%A4%EC%97%90%EC%84%9C%EC%9D%98-%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%99%80-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88&quot; aria-label=&quot;도커에서의 호스트와 컨테이너 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/f05a030578480a2398713fb6e36e98e1/909c7/docker3.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.139240506329116%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAMEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdiELQP/xAAZEAACAwEAAAAAAAAAAAAAAAABAgMSEyL/2gAIAQEAAQUCMoDbcq1l/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAwADAAAAAAAAAAAAAAAAAAERIUHB/9oACAEBAAY/ApweHdKFP//EABoQAAIDAQEAAAAAAAAAAAAAAAERACExQcH/2gAIAQEAAT8hICaHWPk213YuDBh8M//aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAADAAMBAQAAAAAAAAAAAAABESEAMUFRcf/aAAgBAQABPxCNE0u8iJdeB14mlDxlTKzIKAgg/Dn/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/f05a030578480a2398713fb6e36e98e1/828fb/docker3.jpg&quot;
        srcset=&quot;/todayILearned/static/f05a030578480a2398713fb6e36e98e1/ff44c/docker3.jpg 158w,
/todayILearned/static/f05a030578480a2398713fb6e36e98e1/a6688/docker3.jpg 315w,
/todayILearned/static/f05a030578480a2398713fb6e36e98e1/828fb/docker3.jpg 630w,
/todayILearned/static/f05a030578480a2398713fb6e36e98e1/0ede0/docker3.jpg 945w,
/todayILearned/static/f05a030578480a2398713fb6e36e98e1/909c7/docker3.jpg 1041w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;하나의 운영체제 위에 내 어플리케이션이 있고 웹서버와 데이터베이스가 있지만 웹서버와 데이터베이스는 컨테이너라는 격리된 공간에서 해당 앱을 실행하는 lib와 실행파일 bin과 같은 것들만 포함되어 있다.&lt;br&gt;
이런 구조라면 동일한 운영체제를 공유하기 때문에 다른 운영체제를 설치할 필요도 없고 속도가 느려지는 부분도, 용량 절약도 보완이 된다.&lt;br&gt;
호스트라는 주인 공간에 컨테이너들이 규격에 맞게 박싱되어 존재하고, 호스트는 그 박스 안에서 어떤 복잡한 일들이 일어나는지 신경 쓰지 않아도 되는 공간을 컨테이너라 부르는 것 같다.&lt;/p&gt;
&lt;p&gt;도커와 같은 컨테이너 기술은 리눅스 운영체제의 기술이다.&lt;br&gt;
하지만 리눅스를 설치하지 않아도 도커가 알아서 가상머신을 만든 뒤 그 위에 리눅스 운영체제를 설치해 준다. 리눅스 기반에서 개발을 한다면 도커가 가상머신을 설치하지 않고 바로 컨테이너 기술을 사용하기 때문에 윈도우에서 도커를 사용하는 것과는 성능 차이가 있다.&lt;/p&gt;
&lt;h3 id=&quot;윈도우에서-도커-설치-방법&quot; style=&quot;position:relative;&quot;&gt;윈도우에서 도커 설치 방법&lt;a href=&quot;#%EC%9C%88%EB%8F%84%EC%9A%B0%EC%97%90%EC%84%9C-%EB%8F%84%EC%BB%A4-%EC%84%A4%EC%B9%98-%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;윈도우에서 도커 설치 방법 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;도커 사이트로 가서 데스크탑용 도커 파일을 다운&lt;br&gt;
&lt;a href=&quot;https://www.docker.com/products/docker-desktop&quot;&gt;데스크탑 도커 파일 다운로드&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;설치가 끝나고 윈도우를 재시작&lt;/li&gt;
&lt;li&gt;도커 아이콘을 클릭했을 때 WSL2 경고창이 뜨면 아래 사이트로 가서 스텝 4단계까지 진행&lt;br&gt;
&lt;a href=&quot;https://docs.microsoft.com/ko-kr/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package&quot;&gt;리눅스 커널 업데이트 패키지 다운로드&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;WSL이란?
&lt;blockquote&gt;
&lt;p&gt;윈도우 서브 시스템 포 리눅스로 윈도우10 운영체제에서 리눅스 운영체제의 쉘과 시스템을 사용할 수 있도록 지원해 주는 기능이다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;명령프롬프트에서 &lt;code class=&quot;language-text&quot;&gt;docker images&lt;/code&gt;를 실행했을 때 에러가 안 뜨면 도커가 무사히 설치된 것&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;도커와-관련된-개념들&quot; style=&quot;position:relative;&quot;&gt;도커와 관련된 개념들&lt;a href=&quot;#%EB%8F%84%EC%BB%A4%EC%99%80-%EA%B4%80%EB%A0%A8%EB%90%9C-%EA%B0%9C%EB%85%90%EB%93%A4&quot; aria-label=&quot;도커와 관련된 개념들 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/86a8787dfa9fa009b5e1cafae80946c1/0a151/docker4.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAaLctoyLh//EABoQAAIDAQEAAAAAAAAAAAAAAAIDAQQTEhH/2gAIAQEAAQUCTlofnCsuVWDNhsmAXYMo/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAECERIhIjFhkf/aAAgBAQAGPwJ4Rkpd2PLg2xkvRp1Q2jWj/8QAGhABAAIDAQAAAAAAAAAAAAAAAQARITFBYf/aAAgBAQABPyEHHhtFN+zXlrkIbKy+kYo4dHsr2sLLjV6cJ//aAAwDAQACAAMAAAAQow//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgIDAQAAAAAAAAAAAAABESEAMUFRYZH/2gAIAQEAAT8QUKMORtGm8KF84qqRYRfzBzFchmYO/Iy2cBMNQ5XLPH2CTvLrYwkOB79z/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/86a8787dfa9fa009b5e1cafae80946c1/828fb/docker4.jpg&quot;
        srcset=&quot;/todayILearned/static/86a8787dfa9fa009b5e1cafae80946c1/ff44c/docker4.jpg 158w,
/todayILearned/static/86a8787dfa9fa009b5e1cafae80946c1/a6688/docker4.jpg 315w,
/todayILearned/static/86a8787dfa9fa009b5e1cafae80946c1/828fb/docker4.jpg 630w,
/todayILearned/static/86a8787dfa9fa009b5e1cafae80946c1/0a151/docker4.jpg 866w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;도커라는 세계에는 도커 허브라는 저장소가 존재한다.&lt;br&gt;
유저가 앱스토어에서 특정 프로그램을 다운 받고 실행을 시키는 순서를 도커와 비교해 보면 용어를 기억하기 쉽겠다.&lt;br&gt;
도커 허브에서 특정 이미지를 풀 받고 풀 받은 이미지를 런하게 되면 그 이미지가 컨테이너가 된다. 그리고 컨테이너가 실행되면서 컨테이너 안에서 실행되도록 설정해둔 프로그램이 실행된다.&lt;/p&gt;
&lt;h3 id=&quot;도커-기본-명령어-살펴보기&quot; style=&quot;position:relative;&quot;&gt;도커 기본 명령어 살펴보기&lt;a href=&quot;#%EB%8F%84%EC%BB%A4-%EA%B8%B0%EB%B3%B8-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0&quot; aria-label=&quot;도커 기본 명령어 살펴보기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;명령 프롬프트 창에 docker images 를 쳐보면 풀 받은 이미지가 없기 때문에 빈 리스트가 나온다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker images&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 403px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/33728d129afce2dc3401755b4c322cd0/c80d3/docker5.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 12.658227848101264%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABxKAH/8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAQUCW//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQEAAT8hS6lhf//aAAwDAQACAAMAAAAQ8A//xAAVEQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAwEBPxBZ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFR/9oACAEBAAE/EECWUUcmJQ08mjh3yf/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/33728d129afce2dc3401755b4c322cd0/c80d3/docker5.jpg&quot;
        srcset=&quot;/todayILearned/static/33728d129afce2dc3401755b4c322cd0/ff44c/docker5.jpg 158w,
/todayILearned/static/33728d129afce2dc3401755b4c322cd0/a6688/docker5.jpg 315w,
/todayILearned/static/33728d129afce2dc3401755b4c322cd0/c80d3/docker5.jpg 403w&quot;
        sizes=&quot;(max-width: 403px) 100vw, 403px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;다운 받고자하는 이미지를 docker pull {이미지명} 를 입력하면 아래와 같은 로그가 뜨고&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker pull {image name}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/0a9633474ca9a38e0aebbd0b233b2a25/63577/docker6.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 28.48101265822785%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAcesIB//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAACAwAAAAAAAAAAAAAAAAAAARARIf/aAAgBAQABPyF6io//2gAMAwEAAgADAAAAEIPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAAEEAwAAAAAAAAAAAAAAAQARITGRQVFh/9oACAEBAAE/EKUcWt5EHLqUO3U//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/0a9633474ca9a38e0aebbd0b233b2a25/828fb/docker6.jpg&quot;
        srcset=&quot;/todayILearned/static/0a9633474ca9a38e0aebbd0b233b2a25/ff44c/docker6.jpg 158w,
/todayILearned/static/0a9633474ca9a38e0aebbd0b233b2a25/a6688/docker6.jpg 315w,
/todayILearned/static/0a9633474ca9a38e0aebbd0b233b2a25/828fb/docker6.jpg 630w,
/todayILearned/static/0a9633474ca9a38e0aebbd0b233b2a25/63577/docker6.jpg 647w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;다시 docker images 를 해보면 풀 받은 이미지 목록이 떠있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 474px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/f8ec75ae71249c57a12540b904bc3fe9/08ff2/docker7.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 13.924050632911392%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABxKFB/8QAFhABAQEAAAAAAAAAAAAAAAAAAAFB/9oACAEBAAEFAmx//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEREP/aAAgBAQABPyGt0eH/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMUEh/9oACAEBAAE/ENhxmDRbfICnw3pP/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/f8ec75ae71249c57a12540b904bc3fe9/08ff2/docker7.jpg&quot;
        srcset=&quot;/todayILearned/static/f8ec75ae71249c57a12540b904bc3fe9/ff44c/docker7.jpg 158w,
/todayILearned/static/f8ec75ae71249c57a12540b904bc3fe9/a6688/docker7.jpg 315w,
/todayILearned/static/f8ec75ae71249c57a12540b904bc3fe9/08ff2/docker7.jpg 474w&quot;
        sizes=&quot;(max-width: 474px) 100vw, 474px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;실행 중 도커를 확인하려면 아래 명령어로 리스트 조회가 가능하다.&lt;br&gt;
(이제부터 여기서 말하는 이미지는 곧 컨테이너가 된다)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker ps&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다운 받은 이미지를 실행시키려면 아래 명령어로 특정 이미지 실행이 가능하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker run {image}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다운 받은 이미지에 name을 붙여서 실행시키려면 아래 명령어로 특정 이미지 실행이 가능하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker run --name {imagename} {image}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;도커를-이용해-웹-서버-사용법&quot; style=&quot;position:relative;&quot;&gt;도커를 이용해 웹 서버 사용법&lt;a href=&quot;#%EB%8F%84%EC%BB%A4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4-%EC%9B%B9-%EC%84%9C%EB%B2%84-%EC%82%AC%EC%9A%A9%EB%B2%95&quot; aria-label=&quot;도커를 이용해 웹 서버 사용법 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;로컬 컴퓨터에 직접 웹 서버 설치한 경우&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/0539ef0b4ec108b5548c4808effd6bf3/e8a7f/docker9.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 29.11392405063291%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdqQsD//xAAXEAEBAQEAAAAAAAAAAAAAAAABAAIx/9oACAEBAAEFAsCT2//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAQEAAwAAAAAAAAAAAAAAABEBABBx/9oACAEBAAY/Aq1xbzX/xAAbEAABBAMAAAAAAAAAAAAAAAABABARIVFhcf/aAAgBAQABPyEqVw1pByIwb//aAAwDAQACAAMAAAAQA8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAhMVFhof/aAAgBAQABPxAYapBI6x4JAoSrNvpPuBrlz//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/0539ef0b4ec108b5548c4808effd6bf3/828fb/docker9.jpg&quot;
        srcset=&quot;/todayILearned/static/0539ef0b4ec108b5548c4808effd6bf3/ff44c/docker9.jpg 158w,
/todayILearned/static/0539ef0b4ec108b5548c4808effd6bf3/a6688/docker9.jpg 315w,
/todayILearned/static/0539ef0b4ec108b5548c4808effd6bf3/828fb/docker9.jpg 630w,
/todayILearned/static/0539ef0b4ec108b5548c4808effd6bf3/0ede0/docker9.jpg 945w,
/todayILearned/static/0539ef0b4ec108b5548c4808effd6bf3/e8a7f/docker9.jpg 1138w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;웹브라우저에서 서버에 요청을 할 때 서버는 0부터 65535포트 중 80번 포트를 요청 게이트로 설정해 놨다고 가정하자.&lt;br&gt;
&lt;a href=&quot;http://example.com:80/index.html&quot;&gt;http://example.com:80/index.html&lt;/a&gt; uri로 웹서버에게 요청을 하면 대기 중이던 웹서버는 80번 포트를 통해 index.html을 찾는다. index.html 코드를 웹브라우저에게 전달하면 /index.html 요청에 대한 과정이 끝난다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;도커를 이용해 웹 서버를 설치한 경우
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/6647b0ebdb461e4945f580c7fa9bf056/51334/docker8.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHZheg+JB//xAAaEAACAgMAAAAAAAAAAAAAAAABAhExABAh/9oACAEBAAEFAlueyNNgr//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAEFAAAAAAAAAAAAAAAAAAEAESAycf/aAAgBAQAGPwIucVo//8QAHBABAAEEAwAAAAAAAAAAAAAAAQAQETFBIWHB/9oACAEBAAE/IUjGi8DU2YWxad1PExT/2gAMAwEAAgADAAAAEGAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAERITEQQVFxof/aAAgBAQABPxDNtgKDS5kjKqG5zIuLpu7HiP/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/6647b0ebdb461e4945f580c7fa9bf056/828fb/docker8.jpg&quot;
        srcset=&quot;/todayILearned/static/6647b0ebdb461e4945f580c7fa9bf056/ff44c/docker8.jpg 158w,
/todayILearned/static/6647b0ebdb461e4945f580c7fa9bf056/a6688/docker8.jpg 315w,
/todayILearned/static/6647b0ebdb461e4945f580c7fa9bf056/828fb/docker8.jpg 630w,
/todayILearned/static/6647b0ebdb461e4945f580c7fa9bf056/0ede0/docker8.jpg 945w,
/todayILearned/static/6647b0ebdb461e4945f580c7fa9bf056/51334/docker8.jpg 1168w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;도커를 이용해 웹서버를 설치하면 이 웹서버는 컨테이너 안에 설치가 된다. 그리고 이 컨테이너가 설치된 운영체제를 도커 호스트라고 부른다.&lt;br&gt;
컨테이너와 호스트는 독립적인 실행 환경이기 때문에 각각 따로 포트들을 가지고 있다. 그렇기 때문에… 따로 포트 연결을 해주지 않으면 끊어져있기 때문에 &lt;code class=&quot;language-text&quot;&gt;포트포워딩&lt;/code&gt;을 해줘야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker run -p 8081:80 httpd&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이미지를 실행할 때 호스트의 포트와 컨테이너의 포트를 기재해준다. 앞에 8081이 호스트의 포트이고 뒤에 80이 컨테이너의 포트이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/fee13/docker10.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3qAH/8QAFRABAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAQUCj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAAMBAAAAAAAAAAAAAAAAAAABEYH/2gAIAQEAAT8hWiIiP//aAAwDAQACAAMAAAAQAA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEAAgMAAAAAAAAAAAAAAAABAGERMVH/2gAIAQEAAT8QA2uXZQSgn//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;도커&quot;
        title=&quot;도커&quot;
        src=&quot;/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/828fb/docker10.jpg&quot;
        srcset=&quot;/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/ff44c/docker10.jpg 158w,
/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/a6688/docker10.jpg 315w,
/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/828fb/docker10.jpg 630w,
/todayILearned/static/500deb1b6812c353fa878becd1bad6a9/fee13/docker10.jpg 726w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;도움-받은-자료들&quot; style=&quot;position:relative;&quot;&gt;도움 받은 자료들&lt;a href=&quot;#%EB%8F%84%EC%9B%80-%EB%B0%9B%EC%9D%80-%EC%9E%90%EB%A3%8C%EB%93%A4&quot; aria-label=&quot;도움 받은 자료들 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=Ps8HDIAyPD0&amp;#x26;list=PLuHgQVnccGMDeMJsGq2O-55Ymtx0IdKWf&quot;&gt;https://www.youtube.com/watch?v=Ps8HDIAyPD0&amp;#x26;list=PLuHgQVnccGMDeMJsGq2O-55Ymtx0IdKWf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Javascript 비동기 작동 원리]]></title><description><![CDATA[…]]></description><link>https://ksy8230.github.io/todayILearned/javascript/how_it_works/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/javascript/how_it_works/</guid><pubDate>Wed, 05 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;자바스크립트의 작동 원리에 대해 조금 더 깊은 학습이 필요하다 생각되어 글로 정리해 보았다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;자바스크립트는 싱글스레드로 동작하는 언어&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;❓ &lt;strong&gt;싱글 스레드&lt;/strong&gt;&lt;br&gt;
단어 그대로 한 번에 하나의 작업만 수행할 수 있다는 의미이다. 카페를 예로 들자면 카페에 바리스타가 단 한 명이라 그 한 명으로 주문을 받을 수 있고 그 한 명으로 커피를 만들 수 있다. 주문을 받는 동안 커피를 만들 수 없고, 커피를 만드는 동안 주문을 받을 수 없다.&lt;/p&gt;
&lt;p&gt;그렇다면 자바스크립트 코드로 비동기 코드를 짜는 건 어떻게 가능한 일이었을까?&lt;/p&gt;
&lt;h3 id=&quot;자바스크립트-동작-방식&quot; style=&quot;position:relative;&quot;&gt;자바스크립트 동작 방식&lt;a href=&quot;#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D&quot; aria-label=&quot;자바스크립트 동작 방식 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 315px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/84b7ff25679ca1c691b50a67cb450a93/6bdcf/js1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 104.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAACmElEQVQ4y52SS2/TQBSF+6vYgSpVILFgw5afwAIhqGABCBZsEW1XUdI6LzumdmiKREidOlHTViJBcaO2dIFQaUQSe9I4MXFsx56xB2WmpC+VIM7GI937zTlzfafw1QoC7Pt/qeOpS8So3RsoZv2pB17B9svBzxdoeERq/kQYYYxdQ9K/Xv+cnfnI3tB2b/rO7vjeyTAyi4eV229e33o+O1NZu4PRQfDvMLby8vK11fg0H7pe/jSN4d4EOKDySex+2Ty677Rm7cYjp/kQ2t+DUQOiLVc7j+8i0w7IYcK0bdtut4FhGKZp9no9wzAghOMfhhAyDKNLZNs2jTmC6QdoWqFY3Nza3t7eKpfLxWJB13UKG4ZRqVQkSZJlOZfLbWxs0FIQBCNn3/dDoZCUyxbXs9lsdi23tvJ+heM4CkcikUwmUygU8vm8LMuSJM3NvfXJ9ozggWUtRcImwrXGyTwRQslk0iNKJpP+n0WjB4ZZouEpbPNs7KCFI4Xgl9u7t3n3i1ZeFT+4ngshZFnW8zyak8KJRMJxnBPYsuxYLEZvdofmeisHLE18J1JnjuM6nc4xEQCg3+/HYtHzMMNgjGH9R/DkMe73IcZ8KgWJWI7TNE0lajab3W43GmXOw9Eo2cpBsLcXQBcixPP8CcyyAACNqNVq9Xq9SzCJPR4MhJDCNDYA4KwzwzDD4fAi/OAZKG4OMMbDoXfWWVXVFlGj0dB1/SIcj8cxxlzG/naIiDMSBIEOjOd5Xdc7RO122zTNRCJ+GttxnIWFhePjjmVqekdVVa1ery8uLiKicDisKEqtVtvZ2VEUZX9/f35+znXd0/UslUo8zy8LaUEQ0+k0x3HVapW+v1qtsiwriqIgCKIoplKpUql0up7/rd+pTm0s81/q3QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;메모리힙과 콜스택&quot;
        title=&quot;메모리힙과 콜스택&quot;
        src=&quot;/todayILearned/static/84b7ff25679ca1c691b50a67cb450a93/6bdcf/js1.png&quot;
        srcset=&quot;/todayILearned/static/84b7ff25679ca1c691b50a67cb450a93/c26ae/js1.png 158w,
/todayILearned/static/84b7ff25679ca1c691b50a67cb450a93/6bdcf/js1.png 315w&quot;
        sizes=&quot;(max-width: 315px) 100vw, 315px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;❓ &lt;strong&gt;메모리힙이란&lt;/strong&gt;&lt;br&gt;
메모리를 할당하는 영역을 의미&lt;/p&gt;
&lt;p&gt;❓ &lt;strong&gt;콜스택이란&lt;/strong&gt;&lt;br&gt;
코드가 호출되면서 스택으로 쌓이는 영역을 의미&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;첫번째함수&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;두번째함수&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;첫번째함수&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;두번째함수&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 실행 시작&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 코드가 있다고 가정했을 때 콜스택에서 이루어지는 호출 방식은 아래와 같다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/78958/js2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.177215189873415%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABu0lEQVQozy2Pz4oTQRDG5yk8CV4FRVlZELx59iQIPofZnfxZnUAcsxLwMnNYwT27BLMRh1yyaALrBBNk4yWT7qre7kxDlkheYHCSSUqazKH5Fd9X/VWVVavVnnc6nSfz+fxBFEX7SZLcqlarT33ff7ZYLO5Pp9P95XJ5p9Fo3KvX6y8mk8keIj6K4/hus9m87TjOy36//1hr/ZBzvmcppRIhRAoAKSISANSUUpdSSlMnufZVSvnBaIiYAIDRUAhRUEoZ7R8ArBFxbeWmETc5XcbYb8YYcc7XnHPjBwDgw65eo+kDUABQzP1tPphM4DZ/mRE4529ns9lIa01a69RQKfWNA3hgPiGmfMdrBLBhF56hCQXYWuYMs7ZSKjN1HMdut9sdnbfOqd1up60vLer1eoFWylOMkeJ8NePcUAKinQ/Z5CRrOBxSGIY0CAdZ+DMkIYTre/7oqHJEzus3qX14SJ9OTwMRRd7g4oJ+ff+xMhz2+vJaShsZI2Rsk5Os98fHVHhVoFKxlJVLJbON+/HkZFQulanqOGnRLtLZ57MgCALvoHBAlXJlZfpd9538e3Nj49WYxNV4IwzHf+g/BO2z9PmcyYsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;선입선출&quot;
        title=&quot;선입선출&quot;
        src=&quot;/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/f058b/js2.png&quot;
        srcset=&quot;/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/c26ae/js2.png 158w,
/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/6bdcf/js2.png 315w,
/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/f058b/js2.png 630w,
/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/40601/js2.png 945w,
/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/78612/js2.png 1260w,
/todayILearned/static/d192b8f4c1a54f0c4de519a2b9cb1c52/78958/js2.png 1320w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;먼저 들어간 것이 나중에 빠져나오는 방식으로, 순서의 끝부분부터 실행이 된다.&lt;/p&gt;
&lt;p&gt;그럼 &lt;code class=&quot;language-text&quot;&gt;setTimeout&lt;/code&gt; 과 같이 몇 초 뒤에 실행이 되는 비동기 코드는 콜스택에서 어떤 식으로 호출이 되는 걸까? 🤔&lt;/p&gt;
&lt;h3 id=&quot;비동기는-웹-api-환경에서-이루어진다&quot; style=&quot;position:relative;&quot;&gt;비동기는 웹 API 환경에서 이루어진다&lt;a href=&quot;#%EB%B9%84%EB%8F%99%EA%B8%B0%EB%8A%94-%EC%9B%B9-api-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%84%EB%8B%A4&quot; aria-label=&quot;비동기는 웹 api 환경에서 이루어진다 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;❓ &lt;strong&gt;웹 API란&lt;/strong&gt;&lt;br&gt;
브라우저에서 자체 지원하는 API이다. 웹 API는 Dom 이벤트, Ajax (XmlHttpRequest), setTimeout 등의 비동기 작업들을 수행할 수 있도록 API로 기능을 지원한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;첫번째 실행&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;세번째 실행&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;두번째 실행&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드의 실행 방식은 아래와 같은 그림처럼 진행이 됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/3068775de07202f09345eac23e23e565/c0255/js3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACU0lEQVQoz4VTy27TUBD15/AnLPkCxI5dxQdUwKoLYAM7FiAhgYBWhU2kJk6ipHnbeTTxI8/mqZZQkjSO7diOE9sHzRUJbVkw0tyx78wcz+OYSyQScF0Xum5A1+fQfoZgXH3FYibDMB3YtoWLiwsUi0XclHefTTx9McHzl2McvJ7h2asFpMYKXKFQYAEBOx00sw9w+PYerOnRLtkwDFQqFdi2jdFoBF3XcfBGx6MnU+ztz7G3f42HexPkSw64XC7HknyfThst4TES3+/D+BXaAc7nc5TLZTiOg+FwCE3TEE2t8P6LgY/HJj4dm/hwaKI/WoPL5/MsaeW62HhrwL8GMKUbuO6a+UzTZID/lwBcNptDv9+FVC1Dqsi4/HHFXIpahygKDKjT6aBarbJ7z/MQBAF8P4DnBfD8v0p3XCwaQTiWQ6F5hbSSgCAKMHQdtCyaVa/XA8/zUBTlz2j8f+sKgp3l+EgYSmuIxcxGfhSG0mxgoS1Qr9dZEDEgk8lAkqRbFW4B7ioXPjlBe9ADxn2sh5eot9tYaNoOYLlcIpVK7Sq8W9VNoeo5no9AVVtoDoGls0KjUWdbrJ2dsSDdMJBOp1EqlbDZbNiCqMotneid7HYUXDTKo3ImQW2tMJnMIMsSLMvGt6MjCKeniIZCiITDkGUZ4/GY0YYAiew0FlJVVdFutxm9OBo4fb0oZpBMJllr5IjH42wx8VgMmXQatVoNg8EA5+fnbAyCIIAoR1YURdZFt9slHuZAfwvRhwJIs9nsrQQKJjBqi9omtSyLAZPdPhPxfwPelGahD3tDDgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;호출진행1&quot;
        title=&quot;호출진행1&quot;
        src=&quot;/todayILearned/static/3068775de07202f09345eac23e23e565/f058b/js3.png&quot;
        srcset=&quot;/todayILearned/static/3068775de07202f09345eac23e23e565/c26ae/js3.png 158w,
/todayILearned/static/3068775de07202f09345eac23e23e565/6bdcf/js3.png 315w,
/todayILearned/static/3068775de07202f09345eac23e23e565/f058b/js3.png 630w,
/todayILearned/static/3068775de07202f09345eac23e23e565/c0255/js3.png 920w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;첫번째 실행이라는 콘솔이 콜스택에 쌓이고 바로 실행되어 콜스택에서 제거된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/9b16183359068dfa03532ce9d2891d8a/0eb6d/js4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACaklEQVQoz3WSyW4TQRCG54F4Cx6AN+CGxAMAkUAcEiKWQ0AoF5C4ReLCJRLEShzjRbZj4o14wR6PHeLEe/C+jcee6Q91OzFBgpJ+Tam79M1f1aUlEglkTE2L6fiSUesT49ZHpsMS5myBbS84Pz8nlUpxHQJ4+2HA2uYlT181Wd9q8+hZl6xuoWWz2VURokzad5ud7VvMB94VoNVqkU6n6ff7nJ6W6HT6vNgecn+tzcONnoLde/CLZGaGJgtl2A6IeYVs6C7Bz3eY9sIrYL1eV0DLsqjXa3R7Q97vjHn8vMP6Vo+N1z2evOySM244dByBEDYwupJgsbDVXbvd5vrHqtYWvHknIT0FlFrb7JLOW2jxRIJEPErQ78PvCVBvXGLNBbFYHI/HQygUUrBcLrfsZLFATE3MmcN44jCZ/pFtC7SvngPCUR29NSJb+046lcYwCuh6XrXYbDbZ29vDMIylu8kEIQT/C+3wcB+91KRRaxCte8nnCgooQTIk1O12oxcKYNs40qEciBA4NySUQNvfP6DWqMJPHdpDMrkcRcOgVqst12k65cDtxria9XIlxD9dyjPN43GT1y8oXMhnsMlkMqq9FdA08bhcZJJJZpbFcDhcwWQuNRqNcBxn2bIExhM/SGVH9LodTk5OODs7w+VyEQgEOHS7+bK7i67r1KpVqtUq8/mcSqVCPp9XjyW/xWKRbreL5vP5iMdjJBMRgsGgctdoNPB6vcg7v9+vwNlMhlKpRLlcZjAYEIlECIfDHB0dqVzWyHtNHkSjMSKRbxwfHyvJgmg0qvJYLKZWRy739ZykZrMZpmn+Jen8NzjyYdEeznycAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;호출진행2&quot;
        title=&quot;호출진행2&quot;
        src=&quot;/todayILearned/static/9b16183359068dfa03532ce9d2891d8a/f058b/js4.png&quot;
        srcset=&quot;/todayILearned/static/9b16183359068dfa03532ce9d2891d8a/c26ae/js4.png 158w,
/todayILearned/static/9b16183359068dfa03532ce9d2891d8a/6bdcf/js4.png 315w,
/todayILearned/static/9b16183359068dfa03532ce9d2891d8a/f058b/js4.png 630w,
/todayILearned/static/9b16183359068dfa03532ce9d2891d8a/0eb6d/js4.png 913w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;그런 다음 setTimeout 코드가 콜스택에 쌓인다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;자바스크립트의 엔진이 비동기 작업을 웹 API에게 위임한다.&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/5b658df7e8c36b6d5578dae6c64444a6/076ca/js5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQoz32TS2/TQBSF/Yv4GSz4CezYsEYVLECoBYqKqqqAxIKyhQWsYNNXkubdJFLTtE3S2ondpCLknTaJnffD/tBMmoCExJWOxr6ee3zuPTPK0dERk8kEq9PDMiu0yt8xK9+wWjqd7oDhcEgulyOZTDIPB9j6bLG8XmP1bYU3H25Y3mihGWOU8/Nz/kQBNXSXrx/vMOn4F9l6vU4qlcI0La6u8jSbFq/fmzx8fM3SSoulF00ePGpwkhqizP88tcEZF0gG7+P/cY9eM7wgLJfLklCoLRZ/cdNs8+lLl2drN7zcbLH6rsXz9SaqPkZJp9OLNsAGzFs42PYs22g0JOE8RHpzq83TtaZsdWWjxZNXTdLaCOU4kSBxfETQ58Xn8VOpNBhPIB4/xu12Ew6HEWNRVXXWyXSK4zj0+jamZWN1bMxbTCYOyoHHRSSeIVvrolXSpJJJDEMnk8kwGo2oVqvs7Oyg6/pMnW3zv1A87n00o0qpUidWPkC9yKDrWUkkQpAKpdlsdkEoFAqIkcwxzyn7e/sUK0XIqTjXJmlVxdB1SqWSJOj3+7hcroXCxdFxnH/USULRspb5SbYgLJkiTBLFpUJBbur1+1KhMEWotSxr0Xan05Hv3W53kZOEJ6caqYsBltXm7OxMHmTP3h4Rrxfv7i7b29tomiZVF4tFeRHEKnJzXF5e0m63UQKBAIlEnNOTmHTUMAxqtRo+vx+/30/A5yMcCkmnRVE+n5eF0WiUSCQi11gshuAR35VgMEgkEiUYCnN4eCghiMVm8SwKBLFQNDNiZspgMJDz/Rvj8ZjfdTthGs+cYQsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;호출진행3&quot;
        title=&quot;호출진행3&quot;
        src=&quot;/todayILearned/static/5b658df7e8c36b6d5578dae6c64444a6/f058b/js5.png&quot;
        srcset=&quot;/todayILearned/static/5b658df7e8c36b6d5578dae6c64444a6/c26ae/js5.png 158w,
/todayILearned/static/5b658df7e8c36b6d5578dae6c64444a6/6bdcf/js5.png 315w,
/todayILearned/static/5b658df7e8c36b6d5578dae6c64444a6/f058b/js5.png 630w,
/todayILearned/static/5b658df7e8c36b6d5578dae6c64444a6/076ca/js5.png 914w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;두번째 실행이라는 콘솔이 콜스택에 쌓이고 바로 실행되어 콜스택에서 제거된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/8f8729ca11330c561aff33dbfab58aed/076ca/js6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACZElEQVQoz12T204TURSG5318DN/AR/DGeGsinkIiYFBJQGO8Id5pvPISSAqlYomF0POJMh1tUujBAjOdHmAObWc+szahiCtZ2Ye19r//f629tWw2i5jnj/Eck8uzbzjnX/EuavijgDAMaDQaFAoFri0MYWW1z+O5M168PmV2yeTRS4uS7qOVSiWVFISSWaf4/S6fP9zB78emAKenpxSLRXq9PrXabyyrx9uPAx4+NZlZsHnyqsuDGZNc2UeTRLFJAOGoyeHefRIb93DsvSlgu91WgL7vq7ltD1j9csHzRYu5ZZv5FZsXb7ocGaMbhuNJQBCMgQvgUugyGo1VzDRNri++VvP+U5/ZJZv55S4L72yeLXYpi+RUKk02kyIR/0E8tkur3cHzJ8h+LBYjkUio+lUqlSslkwlhGOKPQhw3xO05uDJ6IUEQom1HI/xM6lQ6Q4qtDMV8AcOooutHSmKn02FjYwPDMK7YBQG3zHNvLbXoVgS91qHTbJNq71Cp6ApQgMQEdGtrC13Xp4DCUDwQd1w1Xu2BFolEaP5pQL0K1pBS5ZBfhkGr1VIAjuOwubk5ZXjzdMKrietO1+JaNLrJkX6CfiJtCJEmGf8BCkOpo+u69Pv9KdhgMGDQ7TIcDlVtleTt7SipdIl8sYd5fkY+X6Ber7O+vq6aIgrW1taoVqs0m031yKUMx8fH6vJ8oUC5XFYkLMtCk0PpdJJMeo/d3V1VK2G3s7OjPB6PK5fDtVpNAQnLg4MDFZdySFzOSlyTgHw/eSaZTIZ0Ok0ymVR7ss7lcuzv70+bdC1XWP7rnucxHo/5C6PMYegTcZ4OAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;호출진행4&quot;
        title=&quot;호출진행4&quot;
        src=&quot;/todayILearned/static/8f8729ca11330c561aff33dbfab58aed/f058b/js6.png&quot;
        srcset=&quot;/todayILearned/static/8f8729ca11330c561aff33dbfab58aed/c26ae/js6.png 158w,
/todayILearned/static/8f8729ca11330c561aff33dbfab58aed/6bdcf/js6.png 315w,
/todayILearned/static/8f8729ca11330c561aff33dbfab58aed/f058b/js6.png 630w,
/todayILearned/static/8f8729ca11330c561aff33dbfab58aed/076ca/js6.png 914w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;웹 API에서 생성된 타이머가 생성된 시점을 기준으로 1초 뒤에 콜백큐로 콜백함수를 전달한다.&lt;/li&gt;
&lt;li&gt;이벤트루프는 콜스택이 비어 있는 걸 확인 후, 콜백큐에 대기 중인 콜백함수(setTimeout)를 콜스택에 넘겨준다.&lt;br&gt;
❓ &lt;strong&gt;콜백큐란&lt;/strong&gt;&lt;br&gt;
웹 API에서 비동기 작업들이 실행된 후 호출되는 콜백 함수들을 기다리는 공간이다. 이벤트 루프가 정해준 순서대로 줄 서있고 선입선출 방식을 따른다.
또한 콜백큐는 하나의 큐로 이루어져있지 않고 여러개의 큐로 이루어져있다. (쉬운 도식화 그림을 만들기 위해 하나로 퉁친 것)&lt;br&gt;
❓ &lt;strong&gt;이벤트 루프란&lt;/strong&gt;&lt;br&gt;
이벤트가 발생 시 호출되는 콜백 함수들을 관리해서 콜백큐에 전달하고, 콜백큐에 담겨있는 콜백 함수들을 콜스택에 넘겨준다.&lt;/li&gt;
&lt;li&gt;setTimeout이 콜스택에서 실행 후 제거됩니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;자바스크립트는 비동기 작업들을 웹 API에게 넘겨줌으로써, 해당 작업이 완료될 때까지 다른 코드를 실행할 수 있도록 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;만약 http 요청과 같은 작업을 동기로 수행하여 콜스택에서만 모든 작업이 이루어진다면 사용자는 http 요청이 끝날 때까지 화면에서 어떤 작업도 수행할 수 없다. 🙄&lt;br&gt;
하지만 자바스크립트가 비동기 작업이 필요한 (시간이 오래 걸리는) 작업들을 웹 API에게 위임한 덕분에 다른 코드들이 실행이 되고, 이 과정에서 동시성을 갖게 되는 것이다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;즉, 동시성을 가능하게 해 주는 비동기 작업들은 자바스크립트 엔진을 구동하는 런타임 환경(웹 API)에서 담당을 한다. 그리고 여기서 말하는 런타임 환경은 브라우저 혹은 Node.js를 말한다.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;2가지-콜백&quot; style=&quot;position:relative;&quot;&gt;2가지 콜백&lt;a href=&quot;#2%EA%B0%80%EC%A7%80-%EC%BD%9C%EB%B0%B1&quot; aria-label=&quot;2가지 콜백 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;자바스크립트의 싱글스레드 방식을 보완하는 방법으로 웹 API를 이용한 비동기 방식을 채택한 것은 이해했다. 그런데 단순히 비동기를 시켜주는 것만으로 웹에서 일어날 수 있는 블로킹(화면 멈춤 현상)을 완화시킨다는 개념이 잘 닿지 않아 검색을 더 해 보았고, &lt;strong&gt;렌더큐&lt;/strong&gt; 라는 것이 있다는 걸 알게 되었다.&lt;/p&gt;
&lt;p&gt;콜백 함수는 2가지로 나누어볼 수 있습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;함수가 호출하는 다른 콜백 함수&lt;/li&gt;
&lt;li&gt;비동기적으로 호출되는 콜백 함수&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber 0&quot; class=&quot;language-js line-numbers&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 1. Synchronous (동기)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 2. Asynchronous (비동기)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;asyncForEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;array&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;asyncForEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;1번과 2번 코드는 둘다 forEach라는 함수를 사용하지만 1번의 경우는 콜스택에 쌓이는 방식이고 2번의 경우는 웹 API를 활용해 콜백큐로 이동했다가 이벤트 루프를 통해 콜스택으로 호출되는 방식이다.&lt;/p&gt;
&lt;h4 id=&quot;비동기-콜백을-이용해-블로킹-완화시키기&quot; style=&quot;position:relative;&quot;&gt;비동기 콜백을 이용해 블로킹 완화시키기&lt;a href=&quot;#%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%BD%9C%EB%B0%B1%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%B4-%EB%B8%94%EB%A1%9C%ED%82%B9-%EC%99%84%ED%99%94%EC%8B%9C%ED%82%A4%EA%B8%B0&quot; aria-label=&quot;비동기 콜백을 이용해 블로킹 완화시키기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;1번 코드와 같은 기본적인 콜백 방식의 문제점은 웹 브라우저의 렌더링을 못하게 하여 UI를 블로킹시키는데 있다고 합니다. 웹 브라우저는 1초에 60 프레임을 그리는 게 가장 이상적인데, 렌더링 또한 콜백처럼 작용을 해서 콜스택에 들어가게 된다.&lt;br&gt;
즉, 콜스택에서 불필요하게 많은 작업이 쌓인다면 렌더링 또한 지연될 수 있다는 것을 의미한다.&lt;/p&gt;
&lt;p&gt;이런 문제를 해결해 볼 수 있는 것이 렌더큐이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/eede11f125591e52f4efc65febe17a90/c6bbc/js7.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz3WSW28SURSF57f4b/wNPusfqE01MdHWaky8vfrggw9Go0lBaGpiCSBtEVpuhcKYKZRbhQwUGApzQS7zmXMQUpu4kzVnZ7LPmrXWHmVnZwdRtu0wciyG7W1M/R12P8Xo95TxeIxhGMTjca7WZ7/JyqMLHjzTefi8w8p6F89XCyUQCMiB2Uw8RzRyt3j74gad6pvlZdu2SaVS9Pt9iqUzDKPN+y2b23cvWN0wuPekx53VDh+8Jsru7q68NJm6gEPleIWw9ybd849/6VyGwyGJRILRaISutxhcdvF9c1jb7LL+0uDxa4P7T3tsB64onE5nuAhSCxgKzfKdKGH76OjoH8uffCZrmz02XhkSopeWhcJC4YTvoQCRYARNK8kLudwJwWCQUChEPp+XlufRzHBdl/HYxbJn2M4coh9PXBS/z8tBLEP+3ELrqCRTCeq1Gul0SlocDAYIF8KyDMB1cV2WcVyH8sXrIauWaDVNUnqI40KOaqVKsVhc2tvf319anhO6/K8Uz5YHrXwGv4qg98hrGtVKBU3TlkORSGSpcFHT6ZRer0e5XKZer9PtdmXWitfr5aeqkS/NRatqgco1QqEwGo1iWZaMQCjsdDrEYjGpXODw8JDT01MUn89HMpkmke5zeWmSyaRpNBqIZQkiAb/fL5ei67pUNJlM5HIEebPZpNVqyX6pMJPJkEr+IBo9IJvNSvmCSGw4HA6zt7cnLddqNVRVlctqt9skk0k5I/4G8cFSqYSyGI7F4lK2wMKK6MUp7C4iENkt/k3TNGUM4hRwHIc/0jZc3DvwDGgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;렌더큐&quot;
        title=&quot;렌더큐&quot;
        src=&quot;/todayILearned/static/eede11f125591e52f4efc65febe17a90/f058b/js7.png&quot;
        srcset=&quot;/todayILearned/static/eede11f125591e52f4efc65febe17a90/c26ae/js7.png 158w,
/todayILearned/static/eede11f125591e52f4efc65febe17a90/6bdcf/js7.png 315w,
/todayILearned/static/eede11f125591e52f4efc65febe17a90/f058b/js7.png 630w,
/todayILearned/static/eede11f125591e52f4efc65febe17a90/c6bbc/js7.png 910w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이벤트 루프가 콜백큐를 감시하는 것과 비슷한 방식으로 콜스택이 비었을 때 렌더큐가 렌더링을 시도한다. 위와 같은 forEach 함수를 비동기 콜백으로 작업을 실행하면 콜스택이 비는 때가 존재하기 때문에 브라우저가 렌더링이 될 수 있는 틈을 주게 되는 효과를 가져갈 수 있습니다.&lt;/p&gt;
&lt;h3 id=&quot;마무리&quot; style=&quot;position:relative;&quot;&gt;마무리&lt;a href=&quot;#%EB%A7%88%EB%AC%B4%EB%A6%AC&quot; aria-label=&quot;마무리 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;콜스택, 콜백큐, 웹API, 자바스크립트의 비동기에 대한 모호한 개념이 어느 정도 풀린 것 같다. 자바스크립트 자체에서 비동기를 지원하는 것이 아니라 자바스크립트를 실행시키는 런타임 환경인 브라우저가 존재하기에 비동기라는 동시성을 가질 수 있었던 거고, 브라우저에서 제공하는 웹 API를 이용한 콜백이 함수가 호출하는 콜백과 어떻게 다른지 콜스택과 렌더큐를 이용해 이해하게 되었다.&lt;br&gt;
웹 API를 이해하고 활용해 브라우저가 효율적으로 렌더링할 수 있는 코드를 짜도록 노력해야될 것 같다.&lt;/p&gt;
&lt;h3 id=&quot;도움-받은-자료들&quot; style=&quot;position:relative;&quot;&gt;도움 받은 자료들&lt;a href=&quot;#%EB%8F%84%EC%9B%80-%EB%B0%9B%EC%9D%80-%EC%9E%90%EB%A3%8C%EB%93%A4&quot; aria-label=&quot;도움 받은 자료들 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=8aGhZQkoFbQ&amp;#x26;feature=youtu.be&quot;&gt;https://www.youtube.com/watch?v=8aGhZQkoFbQ&amp;#x26;feature=youtu.be&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://baeharam.github.io/posts/javascript/jshow-javascript-works/&quot;&gt;https://baeharam.github.io/posts/javascript/jshow-javascript-works/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/@vdongbin/javascript-%EC%9E%91%EB%8F%99%EC%9B%90%EB%A6%AC-single-thread-event-loop-asynchronous-e47e07b24d1c&quot;&gt;https://medium.com/@vdongbin/javascript-%EC%9E%91%EB%8F%99%EC%9B%90%EB%A6%AC-single-thread-event-loop-asynchronous-e47e07b24d1c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[프론트 디자인 컨벤션]]></title><description><![CDATA[리액트 기반의 프로젝트에 사용할 수 있는 UI 모음 모듈을 만들며 자잘한 내용들을 적어보려고 한다. 투두 리스트는 일정과 역량(?)에 따라 유동적으로 가져갈 생각이다. 22-01-0…]]></description><link>https://ksy8230.github.io/todayILearned/project/work/fdc1/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/project/work/fdc1/</guid><pubDate>Wed, 05 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;리액트 기반의 프로젝트에 사용할 수 있는 UI 모음 모듈을 만들며 자잘한 내용들을 적어보려고 한다.&lt;br&gt;
투두 리스트는 일정과 역량(?)에 따라 유동적으로 가져갈 생각이다.&lt;/p&gt;
&lt;h3 id=&quot;22-01-04---현재까지-진행된-사항&quot; style=&quot;position:relative;&quot;&gt;22-01-04 - 현재까지 진행된 사항&lt;a href=&quot;#22-01-04---%ED%98%84%EC%9E%AC%EA%B9%8C%EC%A7%80-%EC%A7%84%ED%96%89%EB%90%9C-%EC%82%AC%ED%95%AD&quot; aria-label=&quot;22 01 04   현재까지 진행된 사항 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;간단한 컴포넌트 몇 개를 개발해 사설 npm에 배포&lt;/li&gt;
&lt;li&gt;사설 npm에서 내려 받은 &lt;strong&gt;front design system&lt;/strong&gt; 모듈(줄여서 &lt;strong&gt;fds&lt;/strong&gt;라 지칭)을 리액트 기반의 데모 프로젝트에 설치하여 사용 가능 확인&lt;/li&gt;
&lt;li&gt;fds모듈에 사용 중인 색상코드파일, 폰트, 아이콘 중 색상코드 파일만 fds모듈 내부에 포함&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;22-01-06---현재까지-진행된-사항&quot; style=&quot;position:relative;&quot;&gt;22-01-06 - 현재까지 진행된 사항&lt;a href=&quot;#22-01-06---%ED%98%84%EC%9E%AC%EA%B9%8C%EC%A7%80-%EC%A7%84%ED%96%89%EB%90%9C-%EC%82%AC%ED%95%AD&quot; aria-label=&quot;22 01 06   현재까지 진행된 사항 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;폰트 경량화하여 독립 모듈로 배포&lt;/li&gt;
&lt;li&gt;팀 프로젝트의 폰트 파일들 전부 제거 후 폰트 모듈 사용&lt;/li&gt;
&lt;li&gt;사용 중인 폰트가 16픽셀 이하에서 깨지는 현상이 발생했는데 본문용 폰트를 고르고 추가할 시간이 부족해 일단은 16픽셀 이하의 텍스트는 시스템 기본 폰트 사용&lt;/li&gt;
&lt;li&gt;팀 프로젝트에 사용 중인 오픈소스 디자인 라이브러리를 걷어내기 시작. 해당 라이브러리에서 사용하는 컴포넌트를 검색해보니 버튼과 인풋 정도만 사용 중이었다… 제대로 활용도 못한 무거운 라이브러리는 빨리 걷어내자!&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;22-01-15---현재까지-진행된-사항&quot; style=&quot;position:relative;&quot;&gt;22-01-15 - 현재까지 진행된 사항&lt;a href=&quot;#22-01-15---%ED%98%84%EC%9E%AC%EA%B9%8C%EC%A7%80-%EC%A7%84%ED%96%89%EB%90%9C-%EC%82%AC%ED%95%AD&quot; aria-label=&quot;22 01 15   현재까지 진행된 사항 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;fds 모듈을 기존 프로젝트에 이식시키는 과정에서 리액트 버전 에러가 났다.&lt;br&gt;
fds 모듈은 CRA로 만들어졌기 때문에 react.js 라이브러리가 디펜던시에 존재한다. 그래서 나는 기존 프로젝트의 react.js를 삭제해버렸다. 이후 node_modules를 전부 날리고 새로 npm install 로 다시 package.json을 설치하니, 리액트 훅 에러와 린트 에러가 뜨면서 웹화면이 열리지 않았다. 😳 기존프로젝트가 리액트 파일을 찾지 못하게 되었다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;원인 규명&lt;br&gt;
: 기존 프로젝트의 리액트 버전과 fds 모듈의 리액트 메이저 버전이 달라서 생긴 문제였다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;해결 방안
: 기존 프로젝트에 원래 사용 중이던 버전의 리액트를 설치 해 주니 정상 동작했다.&lt;br&gt;
기존 프로젝트는 해당 버전의 리액트에 의존하여 개발된 많은 기타 라이브러리들이 존재하기 때문에 프로젝트를 다시 걷어내는 수준에서 새로 시작할 생각이 아니라면 기존에 설치되어있는 라이브러리들은 유지하는 게 좋겠다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;의문점
: fds 모듈을 npm에 배포할 때 리액트가 없다면 설치해 주고 있다면 건너뛰는 방식으로 설치할 수는 없을까?&lt;br&gt;
방법은 있었다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;✔ 1. fds 모듈에서 리액트를 peerdependency에 넣어주고 배포해보기&lt;br&gt;
✔ 2. fds모듈의 index 파일 경로에 npm init 으로 package.json 만들어서 해당 모듈에 꼭 필요한 파일들만 다시 배포해 보기&lt;/p&gt;
&lt;p&gt;package.json에서 디펜던시에 있는 녀석들은 해당 모듈을 사용하기 위해서는 꼭 필요한 아이들이라 명시해주는 곳이라 node_modules폴더에 설치가 된다. fds모듈의 리액트는 디펜던시에 있다. 그래서 CRA를 이용해 만든 프로젝트에서 리액트 모듈들을 제거해주고 fds만 설치해도 작동했던 것이 그 이유다.&lt;/p&gt;
&lt;p&gt;devdependecy는 개발상에서 필요한 녀석들만 명시해주는 곳이다. 때문에 배포할 때 개발 도구로만 사용했던 라이브러리들은 이곳에 넣어줘야 모듈 배포 때 불필요한 파일을 설치하지 않을 수 있다.&lt;/p&gt;
&lt;p&gt;peerdependecy는 반대로 생각해야 한다. fds모듈 package.json의 피어디펜던시에 리액트를 넣는다는 것은, 리액트의 입장에서 fds 모듈이 부속품이라는 의미가 된다. 즉, fds는 리액트 라이브러리 하에서 구동하는 라이브러리라고 명시해주는 것이다.&lt;/p&gt;
&lt;h3 id=&quot;22-02-11---현재까지-진행된-사항&quot; style=&quot;position:relative;&quot;&gt;22-02-11 - 현재까지 진행된 사항&lt;a href=&quot;#22-02-11---%ED%98%84%EC%9E%AC%EA%B9%8C%EC%A7%80-%EC%A7%84%ED%96%89%EB%90%9C-%EC%82%AC%ED%95%AD&quot; aria-label=&quot;22 02 11   현재까지 진행된 사항 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;개발 버전, 배포 버전 작업 분기 (package.json, package_module.json으로 분기)&lt;/li&gt;
&lt;li&gt;lab-font, lab-icon, fds 모듈들 verdaccio (사내 npm 저장소)에 업로드&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;22-02-24---현재까지-진행된-사항&quot; style=&quot;position:relative;&quot;&gt;22-02-24 - 현재까지 진행된 사항&lt;a href=&quot;#22-02-24---%ED%98%84%EC%9E%AC%EA%B9%8C%EC%A7%80-%EC%A7%84%ED%96%89%EB%90%9C-%EC%82%AC%ED%95%AD&quot; aria-label=&quot;22 02 24   현재까지 진행된 사항 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;모듈을 프로젝트에 적용&lt;/li&gt;
&lt;li&gt;1차 배포&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;22-03-04---현재까지-진행된-사항&quot; style=&quot;position:relative;&quot;&gt;22-03-04 - 현재까지 진행된 사항&lt;a href=&quot;#22-03-04---%ED%98%84%EC%9E%AC%EA%B9%8C%EC%A7%80-%EC%A7%84%ED%96%89%EB%90%9C-%EC%82%AC%ED%95%AD&quot; aria-label=&quot;22 03 04   현재까지 진행된 사항 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;달력 모듈 배포 후 프로젝트에 적용&lt;/li&gt;
&lt;li&gt;셀렉트 박스 모듈 배포 후 프로젝트에 적용&lt;/li&gt;
&lt;li&gt;프로젝트 기한이 촉박한 관계로 버그 발견 시, 배포 -&gt; 적용 -&gt; 스토리북에서 버그 수정 -&gt; 배포 -&gt; 적용 … 단계 반복하며 모듈 관리 중&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&quot;해야할-사항&quot; style=&quot;position:relative;&quot;&gt;해야할 사항&lt;a href=&quot;#%ED%95%B4%EC%95%BC%ED%95%A0-%EC%82%AC%ED%95%AD&quot; aria-label=&quot;해야할 사항 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul class=&quot;contains-task-list&quot;&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; fds를 앞으로 어떻게 가져갈지 도식화하기&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 폰트 경량화 작업&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 폰트 모듈 생성 후 배포&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; 아이콘 모듈 생성 후 배포&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 작업용 프로젝트에 fds 모듈 추가&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;폰트-경량화-작업&quot; style=&quot;position:relative;&quot;&gt;폰트 경량화 작업&lt;a href=&quot;#%ED%8F%B0%ED%8A%B8-%EA%B2%BD%EB%9F%89%ED%99%94-%EC%9E%91%EC%97%85&quot; aria-label=&quot;폰트 경량화 작업 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;fds 모듈은 private npm 서버에 올려서 사용하고 있다.&lt;br&gt;
원래는 디자인 컴포넌트에 사용된 폰트들도 함께 묶어서 올리려고 했는데 413 Request Entity Too Large 에러가 떠서 용량에 대한 문제를 고려하게 되었다.&lt;br&gt;
“무거운 폰트 모듈은 독립적으로 만들고 경량화 작업을 해보자”&lt;br&gt;
(물론 서버측에서 요청 받는 바디의 용량 limit 설정은 진행해야했다. 설정하지 않으면 기본적으론 1mb만 주고 받도록 되어 있다.)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ttf -&gt; woff&lt;/li&gt;
&lt;li&gt;data-urI 변환하여 배포&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;data- urI 관련하여 정리 포스팅 필요&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;아이콘-svg---font화-시키기&quot; style=&quot;position:relative;&quot;&gt;아이콘 svg -&gt; font화 시키기&lt;a href=&quot;#%EC%95%84%EC%9D%B4%EC%BD%98-svg---font%ED%99%94-%EC%8B%9C%ED%82%A4%EA%B8%B0&quot; aria-label=&quot;아이콘 svg   font화 시키기 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;svg 아이콘 파일들을 font 파일로 변환시켜주는 iconmon 사이트를 발견했다.&lt;/p&gt;
&lt;h3 id=&quot;front-design-system-모듈-보완&quot; style=&quot;position:relative;&quot;&gt;front design system 모듈 보완&lt;a href=&quot;#front-design-system-%EB%AA%A8%EB%93%88-%EB%B3%B4%EC%99%84&quot; aria-label=&quot;front design system 모듈 보완 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;fds 모듈은 material-ui를 기반으로 제작되었다.&lt;br&gt;
하지만 “팀 내부 디자인 시스템이 특정 라이브러리에 종속되는 게 맞을까?” 하여, 사용 중이던 디자인 라이브러리를 삭제 결정. 컴포넌트들은 그 자체의 기능에 집중하도록 하고 스타일 작업은 최소한으로 줄이는 방향으로 바꿨다.&lt;/p&gt;
&lt;h4 id=&quot;모듈-번들링에-참고한-링크들&quot; style=&quot;position:relative;&quot;&gt;모듈 번들링에 참고한 링크들&lt;a href=&quot;#%EB%AA%A8%EB%93%88-%EB%B2%88%EB%93%A4%EB%A7%81%EC%97%90-%EC%B0%B8%EA%B3%A0%ED%95%9C-%EB%A7%81%ED%81%AC%EB%93%A4&quot; aria-label=&quot;모듈 번들링에 참고한 링크들 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://velog.io/@velopert/bundle-with-rollup-and-publish-to-npm&quot;&gt;Rollup 옵션들&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[gatsby 배포시 uri 오류]]></title><description><![CDATA[배포 환경에서 레파지토리명이 url 시작부에 붙어서 나오지 않는 문제로 페이지간의 이동에 에러가 발생했다. package.json deploy 명령어 수정 개츠비로 빌드를 할 때 prefix-paths를 지정하여 빌드하겠다고 지정해 준다. gatsby…]]></description><link>https://ksy8230.github.io/todayILearned/bugLists/gatsby/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/bugLists/gatsby/</guid><pubDate>Tue, 04 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;배포 환경에서 레파지토리명이 url 시작부에 붙어서 나오지 않는 문제로 페이지간의 이동에 에러가 발생했다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;package.json deploy 명령어 수정&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token string-property property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby build --prefix-paths &amp;amp;&amp;amp; gh-pages -d public&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;개츠비로 빌드를 할 때 prefix-paths를 지정하여 빌드하겠다고 지정해 준다.&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;gatsby-config.js 파일에서 pathPrefix 명을 지정&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;pathPrefix&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/todayILearned&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당하는 prefix-paths의 값을 개츠비 설정 파일에서 지정해 준다.&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;cache 파일 삭제 후 다시 배포 해보면 의도했던 대로 prefix가 붙어서 배포된다&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm run clean&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[2021 회고]]></title><description><![CDATA[개인사로 너무 바빠서 건강만 챙겨도 성공할 것만 같았던 한 해가 지나갔다. 그럼에도 그 사이사이에 많은 일들을 해낸 것 같아 결론적으론 뿌듯한 마음을 안고 2022년을 맞이했다. ✨ 2021 초창기 목표 엘리의 React 강의 듣기 (10…]]></description><link>https://ksy8230.github.io/todayILearned/review/2021/</link><guid isPermaLink="false">https://ksy8230.github.io/todayILearned/review/2021/</guid><pubDate>Tue, 04 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;개인사로 너무 바빠서 건강만 챙겨도 성공할 것만 같았던 한 해가 지나갔다.&lt;br&gt;
그럼에도 그 사이사이에 많은 일들을 해낸 것 같아 결론적으론 뿌듯한 마음을 안고 2022년을 맞이했다.&lt;/p&gt;
&lt;h3 id=&quot;-2021-초창기-목표&quot; style=&quot;position:relative;&quot;&gt;✨ 2021 초창기 목표&lt;a href=&quot;#-2021-%EC%B4%88%EC%B0%BD%EA%B8%B0-%EB%AA%A9%ED%91%9C&quot; aria-label=&quot; 2021 초창기 목표 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ul class=&quot;contains-task-list&quot;&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 엘리의 React 강의 듣기 (100%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 사이드 프로젝트 (50%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 방통대 1,2학기 완료 (100%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 정보처리기사 자격증 따기 (100%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 운동 시작하기 (50%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; 책 읽는 습관 기르기 (10%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; 영어 공부 꾸준히 하기 (10%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; checked disabled&gt; 팀 내부 프론트 디자인 컨벤션 만들기 (50%)&lt;/li&gt;
&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; 토끼 친구 1.6키로 만들기 (30%)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;-공부-방향성-회고&quot; style=&quot;position:relative;&quot;&gt;🔹 공부 방향성 회고&lt;a href=&quot;#-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%96%A5%EC%84%B1-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot; 공부 방향성 회고 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;기본 다지기&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;새로운 것 배우기&lt;/code&gt; 작년엔 두 키워드를 중심으로 공부 방향을 잡았다.
우선 업무적으로 내가 사용하고 있는 React.js에 집중했고 유명한 현업 개발자는 어떤
식으로 코드를 짜는지에 포커스를 맞춰서 강의를 들었다. 그리고 작년초부터 챙겨보고
싶었던 Typescript를 입혀서 내 나름의 추가 버전으로 코드를 따라쳤다. 나는 강의 중심형
학습을 선호하는 타입이라 이런 방식의 학습이 편하고 재밌다고 느꼈는데 성장에 있어선
한계가 있음을 깨달았다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/a018ff7623a6c02e70f741b16ceda6c6/c80f2/courses_220104.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 94.9367088607595%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABcBAQADAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAeg2RdEV55eMGj//xAAbEAADAQEAAwAAAAAAAAAAAAABAgMABBETFP/aAAgBAQABBQL6Y49URl6JHeieblXyOVc7kG16LWV6lf/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABcRAQEBAQAAAAAAAAAAAAAAAAEAAhD/2gAIAQIBAT8B5iQv/8QAHRAAAgICAwEAAAAAAAAAAAAAAAECIREyEiKBof/aAAgBAQAGPwLcuZUjX4ZUmvEPu3koaUq4ouR//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBUWGhsf/aAAgBAQABPyF3fDGjDZemDvC1plXBrwitTGCGcVK1ojYXqUQwmjqKm3PRP//aAAwDAQACAAMAAAAQo8hC/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EI6z/8QAGREBAAIDAAAAAAAAAAAAAAAAAQAQESEx/9oACAECAQE/EKIu5lcn/8QAHRABAAMAAgMBAAAAAAAAAAAAAQARITFBUWGBkf/aAAgBAQABPxDRbVplefIYghNbjx1FIUsXk/kKwsFW6e3zBAQAYMMxIJtqANoOiupVZDjDHWEIZLZ6jqkVPFR6n//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;..&quot;
        title=&quot;..&quot;
        src=&quot;/todayILearned/static/a018ff7623a6c02e70f741b16ceda6c6/828fb/courses_220104.jpg&quot;
        srcset=&quot;/todayILearned/static/a018ff7623a6c02e70f741b16ceda6c6/ff44c/courses_220104.jpg 158w,
/todayILearned/static/a018ff7623a6c02e70f741b16ceda6c6/a6688/courses_220104.jpg 315w,
/todayILearned/static/a018ff7623a6c02e70f741b16ceda6c6/828fb/courses_220104.jpg 630w,
/todayILearned/static/a018ff7623a6c02e70f741b16ceda6c6/c80f2/courses_220104.jpg 796w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;강의형 학습은 새로운 스킬, 혹은 이론 중심이 아니면 선택하지 않을 것 같다&lt;/li&gt;
&lt;li&gt;라이브러리를 걷어내고 순수 바닐라 js에서 상태관리가 어떻게 이루어지는지를 이해하는 것이 중요할 것 같다&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;새로운 것 배우기&lt;/code&gt; 키워드에서는 Python을 골랐다. 이유는 쓸 줄 아는 언어의 폭을 조금 더 넓히고 싶기도 했고 팀 내부에서 채택된 언어이기도 했고 쉽다는 말에 혹한 것도 있었다. 간단하게 이것만 만들어봐야지 했던 작은 토이 프로젝트에 다른 기능의 페이지들을 추가하고 디자인하고 기획하면서 규모가 살짝 커져버려서 그냥 2022년 상반기 사이드 프로젝트로 결정했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/todayILearned/static/691e311dab3efe0fb903505d340431fa/9f7af/sides1_220104.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABy6EB/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGRABAAIDAAAAAAAAAAAAAAAAAQAQIUFx/9oACAEBAAE/IcRR0HCv/9oADAMBAAIAAwAAABCAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAICAwAAAAAAAAAAAAAAAAERACExYXH/2gAIAQEAAT8QZG2tQKGoEKH2MVmf/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;..&quot;
        title=&quot;..&quot;
        src=&quot;/todayILearned/static/691e311dab3efe0fb903505d340431fa/828fb/sides1_220104.jpg&quot;
        srcset=&quot;/todayILearned/static/691e311dab3efe0fb903505d340431fa/ff44c/sides1_220104.jpg 158w,
/todayILearned/static/691e311dab3efe0fb903505d340431fa/a6688/sides1_220104.jpg 315w,
/todayILearned/static/691e311dab3efe0fb903505d340431fa/828fb/sides1_220104.jpg 630w,
/todayILearned/static/691e311dab3efe0fb903505d340431fa/0ede0/sides1_220104.jpg 945w,
/todayILearned/static/691e311dab3efe0fb903505d340431fa/3ac88/sides1_220104.jpg 1260w,
/todayILearned/static/691e311dab3efe0fb903505d340431fa/9f7af/sides1_220104.jpg 1475w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;지마켓, 쿠팡, 이마트에서 상품판매량 순으로 검색어에 따른 결과값을 크롤링하는 사이드 프로젝트를 만들었다.&lt;/li&gt;
&lt;li&gt;RestAPI를 만들어 데이터베이스를 이용해 토끼친구 체중관리하는 페이지를 만들었다.&lt;/li&gt;
&lt;li&gt;React 상태관리 라이브러리는 Recoil을 적용해 보았다.&lt;/li&gt;
&lt;li&gt;파이썬 파일들은 어떤 구조로 관리되는지 궁금증이 생겼다.&lt;/li&gt;
&lt;li&gt;작년 초에 백엔드 개발자와 협업하면서 생겨난 이슈들을 똑같이 겪으면서 신기함+기록 욕구가 증가했다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;-업무-방향성-회고&quot; style=&quot;position:relative;&quot;&gt;🔹 업무 방향성 회고&lt;a href=&quot;#-%EC%97%85%EB%AC%B4-%EB%B0%A9%ED%96%A5%EC%84%B1-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot; 업무 방향성 회고 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;팀원과 함께 맞춰갈 &lt;code class=&quot;language-text&quot;&gt;프론트 UI 컨벤션&lt;/code&gt;을 만들고 있다.&lt;br&gt;
작년 후반부 쯤… 급하게 몰려온 일들이 많아 잠시 손을 놨던 프로젝트인데 어찌저찌하여 12월 경에 사내 배포까지 성공했다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;공통 모듈 패키지를 다운 받을 사설 npm을 개설했다.&lt;/li&gt;
&lt;li&gt;공통 모듈 패키지는 스토리북을 담고 있어서 컴포넌트 명세서 역할도 겸한다.&lt;/li&gt;
&lt;li&gt;공통 모듈 패키지는 rollup 라이브러리를 이용해 필요한 컴포넌트만 빼내어 배포한다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;테스트 영역&lt;/code&gt;을 개발 ~&gt; 배포 어느 부분에 배치해야할지 고민이었는데 단위 모듈을 개발할 때 테스트 파일을 함께 작성한다면 일단은 테스트된 단위 모듈을 사용할 수는 있을 것 같다. (계속되는 타협과 타협…)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;현재까진 1차 배포만 완료했을 뿐 사실 피그마 파일 정리라든지 컴포넌트들 추가 개발 등… 아직 붙여야할 살들이 많다.&lt;/p&gt;
&lt;h4 id=&quot;-삶의-패턴-방향성-회고&quot; style=&quot;position:relative;&quot;&gt;🔹 삶의 패턴 방향성 회고&lt;a href=&quot;#-%EC%82%B6%EC%9D%98-%ED%8C%A8%ED%84%B4-%EB%B0%A9%ED%96%A5%EC%84%B1-%ED%9A%8C%EA%B3%A0&quot; aria-label=&quot; 삶의 패턴 방향성 회고 permalink&quot; class=&quot;custom-class after&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;운동과 책 읽는 습관은 아주 오래된 나의 투두리스트였다.&lt;br&gt;
다행히 운동은 극하반기에 부랴부랴 시작을 해서 다행이라 생각하는데 책 읽는 습관은 5,6월 이후부터 다시 또 뚝 끊겼다. 읽은 책들도 독후감을 쓰지 않으니 머리에 남지도 않은 기분…&lt;br&gt;
2022년에는 욕심내지않고 뭐든 &lt;code class=&quot;language-text&quot;&gt;꾸준히&lt;/code&gt; 이행하도록 하자.&lt;/p&gt;</content:encoded></item></channel></rss>