{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/project/work/django/8.ë‚´ ì •ë³´ ìˆ˜ì •/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Today I Learned"}},"markdownRemark":{"id":"e1241ee3-7332-5d80-b4a7-4ccd0927bc77","excerpt":"ë§Œë“¤ì–´ë³¼ API ì¢…ë¥˜ âœ… ë‚´ ì •ë³´ ìˆ˜ì • (/account/updateUser/) *** accountapp(ì‚¬ìš©ìì§€ì •ëª…ì¹­)ì´ë¼ëŠ” ê³„ì •ê´€ë ¨í•œ ì¥ê³ ì•±ì´ ë§Œë“¤ì–´ì ¸ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ì§„í–‰í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ serializerâ€¦","html":"<h3>ë§Œë“¤ì–´ë³¼ API ì¢…ë¥˜</h3>\n<ul>\n<li>âœ… ë‚´ ì •ë³´ ìˆ˜ì • (/account/updateUser/)</li>\n</ul>\n<p>*** accountapp(ì‚¬ìš©ìì§€ì •ëª…ì¹­)ì´ë¼ëŠ” ê³„ì •ê´€ë ¨í•œ ì¥ê³ ì•±ì´ ë§Œë“¤ì–´ì ¸ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ì§„í–‰í•©ë‹ˆë‹¤.</p>\n<h4>ìƒˆë¡œìš´ serializer í´ë˜ìŠ¤ ìƒì„± ê¸°ì¤€</h4>\n<p>í”„ë¡ íŠ¸ì—ì„œ ë³´ë‚´ì˜¨ ìƒˆë¡œìš´ ë‚´ ì •ë³´ë¥¼ ë°›ì•„ ì§€ì •í•œ ëª¨ë¸ ì–‘ì‹ì— ë§ê²Œ ê²€ì¦ í›„, json í˜•íƒœë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.<br>\nserializer í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•´ì•¼í•˜ëŠ” ê¸°ì¤€ì´ ë¬´ì—‡ì¸ê°€ ê¶ê¸ˆí–ˆëŠ”ë° Meta ì˜ì—­ì—ì„œ ì§€ì •í•´ì£¼ëŠ” ê²½ìš°ê°€ ë‹¤ë¥´ë‹¤ë©´ ìƒˆë¡œìš´ serializer í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ”ê²Œ ì¢‹ì€ ê²ƒ ê°™ë‹¤.ğŸ‘ˆ</p>\n<p><code class=\"language-text\">fields</code>: í˜¸ì¶œ ë°›ëŠ” ë°ì´í„° ì˜ì—­</p>\n<p><code class=\"language-text\">extra_kwargs</code>: ë°ì´í„° ì§ë ¬í™”í•  ë•Œ ê° ë°ì´í„°ë§ˆë‹¤ ì˜µì…˜ì„ ì„¤ì •í•´ì£¼ëŠ” ì˜ì—­</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">//</span> accountapp <span class=\"token operator\">></span> serializers<span class=\"token punctuation\">.</span>py  \r\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AccountDetailSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span> ğŸ‘ˆ\r\n        model <span class=\"token operator\">=</span> User\r\n        fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\r\n        extra_kwargs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \r\n            <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'read_only'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">//</span> ê³ ìœ í•œ <span class=\"token builtin\">id</span> ê°’ì€ ì½ê¸°ë§Œ ê°€ëŠ¥í•˜ë„ë¡ \r\n            <span class=\"token string\">'password'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'required'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'write_only'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">//</span> ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •ì€ í•„ìˆ˜ê°€ ì•„ë‹ˆë©°<span class=\"token punctuation\">,</span> ì“°ê¸°<span class=\"token punctuation\">(</span>ìˆ˜ì •<span class=\"token punctuation\">)</span>ì´ ê°€ëŠ¥í•˜ë„ë¡\r\n            <span class=\"token string\">'username'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'required'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">//</span> <span class=\"token builtin\">id</span> ìˆ˜ì •ì€ í•„ìˆ˜ê°€ ì•„ë‹ˆë‹¤\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">,</span> validated_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        instance<span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">)</span>\r\n        password <span class=\"token operator\">=</span> validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> password<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">\"pbkdf2_sha256$\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            instance<span class=\"token punctuation\">.</span>set_password<span class=\"token punctuation\">(</span>validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        instance<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"email\"</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">)</span>\r\n        instance<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\r\n        instance<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token keyword\">return</span> instance</code></pre></div>\n<h4>view íŒŒì¼ì—ì„œ serializerë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ë„£ì–´ì£¼ëŠ” ì¸ìê°’</h4>\n<p>ì •ë³´ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•´ serializer í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ update í•¨ìˆ˜ë¥¼ ì´ìš©í•œë‹¤.<br>\nupdate í•¨ìˆ˜ëŠ” ì¸ìê°’ì„ ë‘ ê°œë¥¼ ê°–ê³  ìˆë‹¤. (ë¹„êµ ë° ìˆ˜ì •ë  instanceì™€ ê²€ì¦í•  ë°ì´í„°)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">,</span> validated_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></code></pre></div>\n<p>ë¹„êµ ë° ìˆ˜ì •ëœ instance = í•´ë‹¹ apië¥¼ ìš”ì²­í•œ ì‚¬ìš©ìâœ”<br>\nê²€ì¦í•  ë°ì´í„° = ìˆ˜ì • ìš”ì²­ìœ¼ë¡œ ë„˜ì–´ì˜¨ ë°ì´í„°âœ”</p>\n<p>views.py íŒŒì¼ì—ì„œ AccountDetailSerializerë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ì´ ë‘ ê°œì˜ ì¸ìê°’ê³¼ ë§¤ì¹­ì‹œì¼œì„œ ë³´ë‚´ì¤€ë‹¤.âœ”</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">//</span> accountapp <span class=\"token operator\">></span> views<span class=\"token punctuation\">.</span>py\r\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n<span class=\"token comment\"># ì‚¬ìš©ì ìˆ˜ì •</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UpdateAccount</span><span class=\"token punctuation\">(</span>APIView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    authentication_classes <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>SessionAuthentication<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\r\n    permission_classes <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>permissions<span class=\"token punctuation\">.</span>IsAuthenticated<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> <span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        user <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>user\r\n        serializer <span class=\"token operator\">=</span> AccountDetailSerializer<span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span> partial<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>âœ”\r\n        <span class=\"token keyword\">if</span> serializer<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            serializer<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span>serializer<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">.</span>HTTP_201_CREATED<span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span>serializer<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">.</span>HTTP_400_BAD_REQUEST<span class=\"token punctuation\">)</span></code></pre></div>\n<h4>ë¹„ë°€ë²ˆí˜¸ëŠ” ì•”í˜¸í™”ì‹œì¼œì„œ ì €ì¥</h4>\n<p>í•œì°¸ í—¤ë§¸ë˜ ë¶€ë¶„ì´ë‹¤.<br>\níšŒì›ê°€ì…ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ 1234ë¡œ ìƒì„±í•˜ì˜€ë‹¤í•´ë„ dbì—ëŠ” ì•”í˜¸í™”ëœ ê°’ìœ¼ë¡œ ì €ì¥ì´ ëœë‹¤. ì´ëŠ” ìˆ˜ì •í•  ë•Œë„ ë§ˆì°¬ê°€ì§€ë¡œ ì•”í˜¸í™”ë˜ì–´ì„œ ì €ì¥ë˜ì–´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤.<br>\ní•˜ì§€ë§Œ ê¸°ì¡´ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ 1234 -> 1111ë¡œ ë³€ê²½í–ˆì„ ë•Œ serializerë¡œ ë„˜ì–´ì˜¨ ë°ì´í„°ëŠ” ì•”í˜¸í™”ë˜ì–´ ë„˜ì–´ì˜¤ëŠ”ê²Œ ì•„ë‹Œ, í”„ë¡ íŠ¸ì—ì„œ ë³´ë‚´ì£¼ëŠ” ê·¸ëŒ€ë¡œì˜ ë°ì´í„°ì¸ 111ë¡œ ë„˜ì–´ì˜¨ë‹¤.<br>\në”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì´ instanceì˜ password ê°’ì„ set_password í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ê²€ì¦ëœ ë¹„ë°€ë²ˆí˜¸ë¡œ ì•”í˜¸í™”ì‹œì¼œì£¼ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> password<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">\"pbkdf2_sha256$\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            instance<span class=\"token punctuation\">.</span>set_password<span class=\"token punctuation\">(</span>validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"ë¬´ì‘ì • ì¥ê³ ë¡œ ì‚¬ì´ë“œí”„ë¡œì íŠ¸ ë§Œë“¤ê¸° 8. ë‚´ ì •ë³´ ìˆ˜ì •í•˜ê¸°","date":"July 13, 2022","description":null,"tags":["Django REST framework"]}},"previous":{"fields":{"slug":"/project/work/django/07.Nextjs ì „ì—­ ìƒíƒœ ë§Œë“¤ê¸°/"},"frontmatter":{"title":"ë¬´ì‘ì • ì¥ê³ ë¡œ ì‚¬ì´ë“œí”„ë¡œì íŠ¸ ë§Œë“¤ê¸° 7. Nextjsì—ì„œ ì „ì—­ ìƒíƒœë¡œ ì‚¬ìš©ì ë¶ˆëŸ¬ì˜¤ê¸°"}},"next":{"fields":{"slug":"/project/work/django/0.ìš°ë‹¹íƒ•íƒ• ê¸°íš(update.220721)/"},"frontmatter":{"title":"ë¬´ì‘ì • ì¥ê³ ë¡œ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°"}}},"pageContext":{"id":"e1241ee3-7332-5d80-b4a7-4ccd0927bc77","previousPostId":"bcb89388-fd84-50ca-a919-351c36058166","nextPostId":"8b2ce18a-ed82-5ebd-913f-e567afe0839f"}},
    "staticQueryHashes": ["2841359383","3382539634"]}