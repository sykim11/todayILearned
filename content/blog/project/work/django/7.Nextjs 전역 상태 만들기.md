---
title: ë¬´ì‘ì • ì¥ê³ ë¡œ ì‚¬ì´ë“œí”„ë¡œì íŠ¸ ë§Œë“¤ê¸° 7. Nextjsì—ì„œ ì „ì—­ ìƒíƒœë¡œ ì‚¬ìš©ì ë¶ˆëŸ¬ì˜¤ê¸°
date: 2022-07-13
tags: ["nextjs"]
output:
  html_document:
    css: "./assets/css/style.css"
---


### ì–´ë–¤ ë¬¸ì œê°€ ìˆëŠ”ê°€

![chrome-capture-2022-6-14](https://user-images.githubusercontent.com/24996316/178902066-7bd02c09-f3b0-407c-8c5a-95d5b0a9a7d0.gif)

nextjsë¡œ êµ¬ì¶•í•œ ë‚´ í”„ë¡ íŠ¸ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„±ì€ í—¤ë” | ë³¸ë¬¸ | í‘¸í„°ë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤. ê·¸ë¦¬ê³  ì´ í—¤ë”ì˜ ìš°ì¸¡ì—” ë¡œê·¸ì¸ ìœ ë¬´ë¥¼ ì•Œ ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ìˆëŠ”ë° ë¡œê·¸ì¸ í›„ ìƒˆë¡œê³ ì¹¨í•  ë•Œë§ˆë‹¤ ì´ë ‡ê²Œ ë¡œê·¸ì¸ì´ í’€ë¦´ ê²ƒë§ˆëƒ¥ login í…ìŠ¤íŠ¸ê°€ ì ì‹œ ë³´ì˜€ë‹¤ê°€ ë‹¤ì‹œ ë¡œê·¸ì¸ëœ ìƒíƒœë¡œ ëŒì•„ì˜¨ë‹¤.   
ì°°ë‚˜ì´ê¸´ í•˜ì§€ë§Œ ë„ˆë¬´ ê±°ìŠ¬ë¦¬ë‹ˆ ê³ ì³ë³´ì. ğŸ¤¨


### ì›ì¸ íŒŒì•…

![image](https://user-images.githubusercontent.com/24996316/178902914-16b8417a-839d-4b98-895e-0c2e026ad8fa.png)

í—¤ë”ì˜ ì˜ì—­ì€ ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬ë¥¼ í•˜ê³  ìˆê³ , ì´ í—¤ë” ì»´í¬ë„ŒíŠ¸ê°€ ë¶ˆëŸ¬ì™€ì§ˆ ë•Œ ë¦¬ë•ìŠ¤ì˜ ì•¡ì…˜í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ ì‚¬ìš©ì ì •ë³´ë¥¼ me ë¼ëŠ” ìƒíƒœê°’ìœ¼ë¡œ ì €ì¥í•˜ê³  ìˆë‹¤. meë¼ëŠ” ìƒíƒœì— usernameì´ ì¡´ì¬í•œë‹¤ë©´ (ìœ ì €ê°€ ë¡œê·¸ì¸ëœ ìƒíƒœë¼ë©´) My Pageê°€ ë³´ì¼ ê²ƒì´ê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ Loginì´ ë³´ì¼ ê²ƒì´ë‹¤.   

ë¬¸ì œëŠ” í—¤ë” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ìœ ì €ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì•¡ì…˜ ë¦¬ë“€ì„œê°€ meë¼ëŠ” ìƒíƒœë¥¼ nullë¡œ ì´ˆê¸°í™”ì‹œí‚¨ í›„   
![image](https://user-images.githubusercontent.com/24996316/178903537-4fbfaf0e-6922-4014-97f2-097e3650c650.png)   

ìœ ì €ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” API í˜¸ì¶œì´ ì™„ë£Œë˜ë©´ ì•„ë˜ì™€ ê°™ì´ me ê°ì²´ì— ìœ ì € ì •ë³´ë¥¼ ë‹´ì•„ì„œ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ”ë° pending -> fulfilled ë˜ëŠ” ê³¼ì •ì—ì„œ ìƒê¸°ëŠ” ì‹œê°„ì°¨ì´ ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ ì´ìŠˆê°€ ë°œìƒí•œ ê²ƒì´ë‹¤.   
![image](https://user-images.githubusercontent.com/24996316/178903570-0de173d9-dc0e-4ccb-b42f-2c875421d0f6.png)


### ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ 

ìƒê°í•´ë³¸ ë°©ë²•ì€   
1. í—¤ë” ì»´í¬ë„ŒíŠ¸ì—ì„œ `getInitialProps` í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì„œë²„ì—ì„œ ë¨¼ì € API í˜¸ì¶œì„ í•˜ê³  ë‚˜ì˜¨ ê²°ê³¼ë¥¼ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ propsì— ì£¼ì…ì‹œí‚¤ê¸°.   
2. _app.tsx ë¼ëŠ” ì•±ì˜ ì‹œì‘ì  íŒŒì¼ì—ì„œ ìœ ì €ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì•¡ì…˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ.   

#### 1ë²ˆ ë°©ë²•   
1ë²ˆ ë°©ë²•ì€ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œëŠ” `getInitialProps` í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì„œë²„ì‚¬ì´ë“œë Œë”ë§ì´ ë¶ˆê°€ëŠ¥í•´ ì‹¤íŒ¨í–ˆë‹¤.   
> getInitialProps enables server-side rendering in a page and allows you to do initial data population, it means sending the page with the data already populated from the server. This is especially useful for SEO.   
> getInitialPropsëŠ” í˜ì´ì§€ì—ì„œ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ì´ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ê·¸ë¦¬ê³  ì´ˆê¸° ë°ì´í„°ë¥¼ ë„¤ ì„ì˜ëŒ€ë¡œ ì±„ìš¸ ìˆ˜ ìˆê²Œ í•œë‹¤. ì´ ë§ì¸ì¦‰, ì„œë²„ë¡œë¶€í„° ì´ë¯¸ ì±„ì›Œì§„ ë°ì´í„°ì™€ ê°™ì´ í˜ì´ì§€ë¥¼ í”„ë¡ íŠ¸ë¡œ ë³´ë‚´ì¤€ë‹¤ëŠ” ëœ»ì´ë‹¤. ì´ê²ƒì€ SEOì—ë„ ì•„ì£¼ ìœ ìš©í•˜ë‹¤.   

#### 2ë²ˆ ë°©ë²•    
2ë²ˆ ë°©ë²•ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  `next-redux-wrapper` ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” createWrapperë¼ëŠ” í•¨ìˆ˜ê°€ í•„ìš”í•˜ë‹¤.   
```tsx
> /store/index.ts
import { createWrapper, MakeStore } from "next-redux-wrapper";
export const wrapper = createWrapper(makeStore, {
  debug: process.env.NODE_ENV !== "production",
});


> _app.tsx
...

MyApp.getInitialProps = wrapper.getInitialPageProps(
  (store) => async (context) => {
    const { ctx } = context;
    const allCookies = ctx.req?.headers.cookie;
    const parts = allCookies?.split(`; `);
    let sessionid = "" as string | undefined;
    if (parts?.length === 2) {
      sessionid = parts?.[1]?.split("sessionid=")?.[1];
    }
    if (sessionid) {
      const res = await axios.get("http://localhost:8000/account/whoIam/", {
        withCredentials: true,
        headers: {
          Cookie: allCookies as string,
        },
      });
      store.dispatch({
        type: HYDRATE,
        payload: { users: { me: res.data } },
      });
    } else {
      store.dispatch({
        type: HYDRATE,
        payload: { hydrate: { username: "" } },
      });
    }
  }
);


```
ìœ„ì˜ ì½”ë“œì™€ ê°™ì´ MyAppì´ ê°–ê³  ìˆëŠ” `getInitialProps` í•¨ìˆ˜ë¥¼ createWrapperë¥¼ ì´ìš©í•´ ìš°ë¦¬ê°€ ì§€ì •í•˜ê³  ì‹¶ì€ ë¡œì§ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.   
`getInitialPageProps`ë¼ëŠ” ë§ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ nextjsì—ì„œ ë§Œë“  ëª¨ë“  í˜ì´ì§€ë“¤ì—ì„œ ë‚´ê°€ ì§€ì •í•œ ë°ì´í„°ë“¤ì„ propsìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤. ğŸ‘ ê·¼ë° ë‚´ê°€ ì›í–ˆë˜ ê±´ í˜ì´ì§€ë§ˆë‹¤ user ì •ë³´ë¥¼ ì£¼ì…ì‹œí‚¤ëŠ”ê²Œ ì•„ë‹ˆë¼ ë¦¬ë•ìŠ¤ë¥¼ ì´ìš©í•´ ì „ì—­ ìƒíƒœì— ìœ ì € ìƒíƒœë¥¼ ì €ì¥í•´ì£¼ê³  ì‹¶ì€ ê²ƒ.   


